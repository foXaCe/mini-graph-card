(function(){"use strict";function a(){var b=Aa([""]);return a=function(){return b},b}function b(){var a=Aa(["\n          <div class=\"info__item\">\n            <span class=\"info__item__type\">","</span>\n            <span class=\"info__item__value\">\n              "," ","\n            </span>\n            <span class=\"info__item__time\">\n              ","\n            </span>\n          </div>\n        "]);return b=function(){return a},a}function c(){var a=Aa(["\n      <div class=\"info flex\">\n        ","\n      </div>\n    "]);return c=function(){return a},a}function d(){var a=Aa(["\n      <div class=\"graph__labels --secondary flex\">\n        <span class=\"label--max\">","</span>\n        <span class=\"label--min\">","</span>\n      </div>\n    "]);return d=function(){return a},a}function e(){var a=Aa(["\n      <div class=\"graph__labels --primary flex\">\n        <span class=\"label--max\">","</span>\n        <span class=\"label--min\">","</span>\n      </div>\n    "]);return e=function(){return a},a}function f(){var a=Aa(["\n      <svg width='100%' height='100%' viewBox='0 0 500 ","' preserveAspectRatio='none'\n        @click=",">\n        <g>\n          <defs>\n            ","\n          </defs>\n          ","\n          ","\n          ","\n          ","\n          ","\n        </g>\n        ","\n      </svg>"]);return f=function(){return a},a}function g(){var a=Aa(["<g class='bars' ?anim=",">","</g>"]);return g=function(){return a},a}function h(){var a=Aa(["\n        <rect class='bar' x="," y=","\n          height="," width="," fill=","\n          @mouseover=","\n          @mouseout=",">\n          ","\n        </rect>"]);return h=function(){return a},a}function j(){var a=Aa(["\n          <animate attributeName='y' from="," to="," dur='1s' fill='remove'\n            calcMode='spline' keyTimes='0; 1' keySplines='0.215 0.61 0.355 1'>\n          </animate>"]);return j=function(){return a},a}function k(){var a=Aa(["\n      <rect class='fill--rect'\n        ?inactive=","\n        id=","\n        fill="," height=\"100%\" width=\"100%\"\n        mask=","\n      />"]);return k=function(){return a},a}function l(){var a=Aa(["\n      <rect class='line--rect'\n        ?inactive=","\n        id=","\n        fill="," height=\"100%\" width=\"100%\"\n        mask=","\n      />"]);return l=function(){return a},a}function m(){var a=Aa(["",""]);return m=function(){return a},a}function n(){var a=Aa(["\n            <stop stop-color="," offset="," />\n          "]);return n=function(){return a},a}function o(){var a=Aa(["\n        <linearGradient id="," gradientTransform=\"rotate(90)\">\n          ","\n        </linearGradient>"]);return o=function(){return a},a}function p(){var a=Aa(["\n      <g class='line--points'\n        ?tooltip=","\n        ?inactive=","\n        ?init=","\n        anim=","\n        style=\"animation-delay: ","\"\n        fill=","\n        stroke=","\n        stroke-width=",">\n        ","\n      </g>"]);return p=function(){return a},a}function q(){var a=Aa(["\n      <circle\n        class='line--point'\n        ?inactive=","\n        style=","\n        stroke=","\n        fill=","\n        cx="," cy="," r=","\n        @mouseover=","\n        @mouseout=","\n        data-entity-index=","\n        data-point-value=","\n      />\n    "]);return q=function(){return a},a}function r(){var a=Aa(["\n      <mask id=",">\n        ","\n      </mask>\n    "]);return r=function(){return a},a}function s(){var a=Aa(["\n      <path\n        class='line'\n        .id=","\n        anim="," ?init=","\n        style=\"animation-delay: ","\"\n        fill='none'\n        stroke-dasharray="," stroke-dashoffset=","\n        stroke=","\n        stroke-width=","\n        d=","\n      />"]);return s=function(){return a},a}function t(){var a=Aa(["\n      <defs>\n        <linearGradient id="," x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">\n          <stop stop-color='white' offset='0%' stop-opacity='1'/>\n          <stop stop-color='white' offset='100%' stop-opacity='.15'/>\n        </linearGradient>\n        <mask id=",">\n          <rect width=\"100%\" height=\"100%\" fill="," />\n        </mask>\n      </defs>\n      <mask id=",">\n        <path class='fill'\n          type=","\n          .id="," anim="," ?init=","\n          style=\"animation-delay: ","\"\n          fill='white'\n          mask=\"\"\n          d=","\n        />\n      </mask>"]);return t=function(){return a},a}function u(){var a=Aa(["\n      <svg width='10' height='10'>\n        <rect width='10' height='10' fill="," />\n      </svg>\n    "]);return u=function(){return a},a}function v(){var a=Aa(["\n            <div class=\"graph__legend__item\"\n              @click=","\n              @mouseenter=","\n              @mouseleave=",">\n              ","\n              <span class=\"ellipsis\">","</span>\n            </div>\n          "]);return v=function(){return a},a}function w(){var a=Aa(["\n      <div class=\"graph__legend\">\n        ","\n      </div>\n    "]);return w=function(){return a},a}function x(){var a=Aa(["<ha-spinner aria-label=\"Loading\" size=\"small\"></ha-spinner>"]);return x=function(){return a},a}function y(){var a=Aa(["\n            <div class=\"graph__container\">\n              ","\n              ","\n              <div class=\"graph__container__svg\">\n                ","\n              </div>\n            </div>\n            ","\n        "]);return y=function(){return a},a}function z(){var a=Aa(["\n      <div class=\"graph\">\n        ","\n      </div>"]);return z=function(){return a},a}function A(){var a=Aa(["\n          <span>","</span> -\n          <span>","</span>\n        "]);return A=function(){return a},a}function B(){var a=Aa(["\n          <span class=\"tooltip--label\">","</span>\n        "]);return B=function(){return a},a}function C(){var a=Aa(["\n      <div class=\"state__time\">\n        ","\n      </div>\n    "]);return C=function(){return a},a}function D(){var a=Aa(["\n        <div\n          class=\"state ","\"\n          @click=","\n          style=",">\n          ","\n          <span class=\"state__value ellipsis\">\n            ","\n          </span>\n          <span class=\"state__uom ellipsis\">\n            ","\n          </span>\n          ","\n        </div>\n      "]);return D=function(){return a},a}function E(){var a=Aa(["\n        <div class=\"states flex\" loc=",">\n          ","\n          <div class=\"states--secondary\">","</div>\n          ","\n        </div>\n      "]);return E=function(){return a},a}function F(){var a=Aa(["\n      <div class=\"name flex\">\n        <span class=\"ellipsis\" style=",">","</span>\n      </div>\n    "]);return F=function(){return a},a}function G(){var a=Aa(["\n      <div class=\"icon\" loc=","\n        style=",">\n        <ha-icon .icon=","></ha-icon>\n      </div>\n    "]);return G=function(){return a},a}function H(){var a=Aa(["\n        <div class=\"icon\">\n          <img src=\"","\" height=\"25\"/>\n        </div>\n      "]);return H=function(){return a},a}function I(){var a=Aa(["\n          <div class=\"header flex\" loc="," style=\"font-size: ","px;\">\n            "," ","\n          </div>\n        "]);return I=function(){return a},a}function J(){var a=Aa([""]);return J=function(){return a},a}function K(){var a=Aa(["\n          <div>\n            Entity not available: ","\n          </div>\n        "]);return K=function(){return a},a}function L(){var a=Aa(["\n      <hui-warning>\n        <div>mini-graph-card</div>\n        ","\n      </hui-warning>\n    "]);return L=function(){return a},a}function M(){var a=Aa(["\n      <ha-card\n        class=\"flex\"\n        ?group=","\n        ?fill=","\n        ?points=","\n        ?labels=","\n        ?labels-secondary=","\n        ?gradient=","\n        ?hover=","\n        style=\"font-size: ","px;\"\n        @click=","\n      >\n        "," "," "," ","\n      </ha-card>\n    "]);return M=function(){return a},a}function N(){var a=Aa([""]);return N=function(){return a},a}function O(){var a=Aa(["\n      :host {\n        display: block;\n        font-family: var(--paper-font-body1_-_font-family);\n      }\n\n      .loading, .error {\n        text-align: center;\n        padding: 40px 20px;\n        color: var(--primary-text-color);\n      }\n\n      .error {\n        color: var(--error-color);\n      }\n\n      .error pre {\n        text-align: left;\n        background: var(--secondary-background-color);\n        padding: 10px;\n        border-radius: 4px;\n        overflow: auto;\n        font-size: 12px;\n      }\n\n      .card-config {\n        padding: 20px;\n        max-width: 800px;\n        margin: 0 auto;\n      }\n\n      .header {\n        text-align: center;\n        margin-bottom: 30px;\n        padding-bottom: 20px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .header h2 {\n        color: var(--primary-text-color);\n        margin: 0 0 10px 0;\n        font-size: 1.5em;\n      }\n\n      .header p {\n        color: var(--secondary-text-color);\n        margin: 0;\n      }\n\n      .debug-info {\n        margin-top: 10px;\n        opacity: 0.7;\n      }\n\n      .section {\n        margin-bottom: 20px;\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--card-background-color);\n        overflow: hidden;\n      }\n\n      .section-header {\n        display: flex;\n        align-items: center;\n        padding: 16px 20px;\n        cursor: pointer;\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        transition: background-color 0.2s ease;\n      }\n\n      .section-header:hover {\n        opacity: 0.9;\n      }\n\n      .section-header.expanded {\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .section-info {\n        flex: 1;\n      }\n\n      .section-title {\n        font-weight: 500;\n        font-size: 1.1em;\n        margin-bottom: 2px;\n      }\n\n      .section-description {\n        font-size: 0.9em;\n        opacity: 0.8;\n      }\n\n      .section-toggle {\n        font-size: 1.2em;\n        font-weight: bold;\n      }\n\n      .section-content {\n        padding: 20px;\n      }\n\n      .form-group {\n        margin-bottom: 16px;\n        min-width: 0; /* Prevents overflow in grid */\n      }\n\n      .form-group label {\n        display: block;\n        margin-bottom: 6px;\n        font-weight: 500;\n        color: var(--primary-text-color);\n        font-size: 0.9em;\n      }\n\n      .form-row {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 20px;\n        margin-bottom: 16px;\n      }\n\n      input[type=\"text\"],\n      input[type=\"number\"],\n      input[type=\"color\"],\n      select {\n        width: 100%;\n        padding: 10px 14px;\n        border: 1px solid var(--divider-color);\n        border-radius: 6px;\n        background: var(--card-background-color);\n        color: var(--primary-text-color);\n        font-size: 14px;\n        box-sizing: border-box;\n        transition: border-color 0.2s ease;\n      }\n\n      input[type=\"text\"]:focus,\n      input[type=\"number\"]:focus,\n      select:focus {\n        outline: none;\n        border-color: var(--accent-color);\n        box-shadow: 0 0 0 2px rgba(var(--accent-color-rgb, 3, 169, 244), 0.1);\n      }\n\n      input[type=\"color\"] {\n        padding: 4px;\n        height: 40px;\n        cursor: pointer;\n      }\n\n      button {\n        padding: 8px 16px;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 14px;\n        transition: all 0.2s ease;\n      }\n\n      .btn-add {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n      }\n\n      .btn-remove {\n        background: var(--error-color);\n        color: white;\n      }\n\n      .btn-add:hover,\n      .btn-remove:hover {\n        opacity: 0.9;\n        transform: translateY(-1px);\n      }\n\n      .checkbox-label {\n        display: flex !important;\n        align-items: center;\n        gap: 8px;\n        cursor: pointer;\n      }\n\n      .checkbox-label input[type=\"checkbox\"] {\n        width: auto;\n      }\n\n      .show-options,\n      .thresholds-section,\n      .tap-action-section {\n        margin-top: 24px;\n        padding-top: 20px;\n        border-top: 1px solid var(--divider-color);\n      }\n\n      .show-options h4,\n      .thresholds-section h4,\n      .tap-action-section h4 {\n        margin: 0 0 16px 0;\n        color: var(--primary-text-color);\n        font-size: 1em;\n      }\n\n      .checkbox-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n        gap: 12px;\n      }\n\n      .checkbox-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px;\n        background: var(--secondary-background-color);\n        border-radius: 4px;\n        cursor: pointer;\n        transition: background-color 0.2s ease;\n      }\n\n      .checkbox-item:hover {\n        background: var(--divider-color);\n      }\n\n      .checkbox-item input[type=\"checkbox\"] {\n        margin: 0;\n        width: auto;\n      }\n\n      .entity-row,\n      .threshold-row {\n        display: flex;\n        align-items: center;\n        gap: 16px;\n        margin-bottom: 12px;\n        padding: 14px;\n        background: var(--secondary-background-color);\n        border-radius: 6px;\n        border: 1px solid var(--divider-color);\n      }\n\n      .entity-row > *:first-child,\n      .threshold-row > *:first-child {\n        flex: 1;\n      }\n\n      .thresholds-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 16px;\n      }\n\n      .entities-info {\n        color: var(--secondary-text-color);\n        font-size: 0.9em;\n        margin-bottom: 20px;\n        padding: 16px;\n        background: var(--secondary-background-color);\n        border-radius: 4px;\n        border-left: 4px solid var(--primary-color);\n      }\n\n      .entity-config {\n        margin-bottom: 16px;\n        border: 1px solid var(--divider-color);\n        border-radius: 6px;\n        overflow: hidden;\n      }\n\n      .entity-config-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 12px 16px;\n        background: var(--secondary-background-color);\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .entity-config-header button {\n        flex-shrink: 0;\n        min-width: 80px;\n      }\n\n      .entity-info {\n        display: flex;\n        align-items: center;\n        flex: 1;\n        min-width: 0;\n        margin-right: 16px;\n      }\n\n      .entity-icon {\n        color: var(--state-icon-color, var(--state-icon-unavailable-color, #bdbdbd));\n        width: 24px;\n        height: 24px;\n        margin-right: 12px;\n        flex-shrink: 0;\n      }\n\n      .entity-details {\n        flex: 1;\n        min-width: 0;\n        overflow: hidden;\n      }\n\n      .entity-friendly-name {\n        font-weight: 500;\n        color: var(--primary-text-color);\n        font-size: 0.95em;\n        word-wrap: break-word;\n        line-height: 1.3;\n      }\n\n      .entity-id {\n        color: var(--secondary-text-color);\n        font-size: 0.8em;\n        word-wrap: break-word;\n        margin-top: 2px;\n        line-height: 1.2;\n      }\n\n      .entities-section {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n      }\n\n      .entity-management-row {\n        display: flex;\n        flex-direction: column;\n        gap: 12px;\n        padding: 16px;\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--card-background-color);\n      }\n\n      .entity-top-section {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 16px;\n        align-items: center;\n      }\n\n      .entity-picker-section {\n        min-width: 0;\n      }\n\n      .entity-info-section {\n        min-width: 0;\n      }\n\n      .entity-display {\n        display: flex;\n        align-items: center;\n        min-width: 0;\n      }\n\n      .entity-display .entity-icon {\n        margin-right: 12px;\n        flex-shrink: 0;\n      }\n\n      .entity-display .entity-details {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .entity-actions {\n        display: flex;\n        gap: 8px;\n        justify-content: flex-end;\n        flex-wrap: wrap;\n      }\n\n      .btn-configure {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border: none;\n        padding: 8px 16px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 14px;\n        min-width: 80px;\n      }\n\n      .btn-configure:hover {\n        opacity: 0.9;\n      }\n\n      .btn-remove {\n        background: var(--error-color);\n        color: white;\n        border: none;\n        padding: 8px 12px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 16px;\n        font-weight: bold;\n        width: 36px;\n        height: 36px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .btn-remove:hover {\n        opacity: 0.9;\n        transform: translateY(-1px);\n      }\n\n      .entity-config-expanded {\n        margin-top: 12px;\n        padding: 16px;\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--secondary-background-color);\n      }\n\n\n      .entity-config-content {\n        padding: 16px;\n      }\n\n      .entity-switches {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n        gap: 8px;\n        margin-top: 16px;\n      }\n\n      ha-entity-picker,\n      ha-icon-picker {\n        width: 100%;\n      }\n\n      @media (max-width: 768px) {\n        .form-row {\n          gap: 16px;\n        }\n      }\n\n      @media (max-width: 600px) {\n        .card-config {\n          padding: 16px;\n        }\n\n        .form-row {\n          grid-template-columns: 1fr;\n          gap: 12px;\n        }\n\n        .checkbox-grid {\n          grid-template-columns: 1fr;\n        }\n\n        .entity-switches {\n          grid-template-columns: 1fr;\n        }\n\n        .entity-row,\n        .threshold-row {\n          flex-direction: column;\n          align-items: stretch;\n        }\n\n        .entity-row > *,\n        .threshold-row > * {\n          flex: none;\n        }\n      }\n    "]);return O=function(){return a},a}function P(){var a=Aa(["\n            <label class=\"checkbox-item\">\n              <input\n                type=\"checkbox\"\n                .checked=\"","\"\n                @change=\"","\"\n              />\n              ","\n            </label>\n          "]);return P=function(){return a},a}function Q(){var a=Aa(["\n      <div class=\"entity-config-content\">\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label>",":</label>\n            <input\n              type=\"text\"\n              .value=\"","\"\n              @input=\"","\"\n            />\n          </div>\n\n          <div class=\"form-group\">\n            <label>",":</label>\n            <input\n              type=\"color\"\n              .value=\"","\"\n              @input=\"","\"\n            />\n          </div>\n        </div>\n\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label>",":</label>\n            <input\n              type=\"text\"\n              .value=\"","\"\n              @input=\"","\"\n              placeholder=\"temperature\"\n            />\n          </div>\n\n          <div class=\"form-group\">\n            <label>",":</label>\n            <select .value=\"","\" @change=\"","\">\n              <option value=\"primary\">","</option>\n              <option value=\"secondary\">","</option>\n            </select>\n          </div>\n        </div>\n\n        <div class=\"entity-switches\">\n          ","\n        </div>\n      </div>\n    "]);return Q=function(){return a},a}function R(){var a=Aa(["\n      <input\n        type=\"text\"\n        .value=\"","\"\n        @input=\"","\"\n        placeholder=\"mdi:thermometer\"\n      />\n    "]);return R=function(){return a},a}function S(){var a=Aa(["\n          <ha-icon-picker\n            .hass=\"","\"\n            .value=\"","\"\n            @value-changed=\"","\"\n          ></ha-icon-picker>\n        "]);return S=function(){return a},a}function T(){var a=Aa(["\n          <option value=\"","\"></option>\n        "]);return T=function(){return a},a}function U(){var a=Aa(["\n      <input\n        type=\"text\"\n        .value=\"","\"\n        @input=\"","\"\n        placeholder=\"sensor.temperature\"\n        list=\"entity-list\"\n      />\n      <datalist id=\"entity-list\">\n        ","\n      </datalist>\n    "]);return U=function(){return a},a}function V(){var a=Aa(["\n          <ha-entity-picker\n            .hass=\"","\"\n            .value=\"","\"\n            @value-changed=\"","\"\n            allow-custom-entity\n          ></ha-entity-picker>\n        "]);return V=function(){return a},a}function W(){var a=Aa(["<div class=\"section-content\">","</div>"]);return W=function(){return a},a}function X(){var a=Aa(["\n      <div class=\"section\">\n        <div class=\"section-header ","\" @click=\"","\">\n          <div class=\"section-info\">\n            <div class=\"section-title\">","</div>\n            <div class=\"section-description\">","</div>\n          </div>\n          <div class=\"section-toggle\">","</div>\n        </div>\n        ","\n      </div>\n    "]);return X=function(){return a},a}function Y(){var a=Aa(["\n        <div class=\"error\">\n          <h3>","</h3>\n          <p>",": ","</p>\n          <pre>","</pre>\n        </div>\n      "]);return Y=function(){return a},a}function Z(){var a=Aa(["\n                  <div class=\"form-group\">\n                    <label>Service:</label>\n                    <input\n                      type=\"text\"\n                      .value=\"","\"\n                      @input=\"","\"\n                      placeholder=\"light.toggle\"\n                    />\n                  </div>\n                "]);return Z=function(){return a},a}function $(){var a=Aa(["\n                  <div class=\"form-group\">\n                    <label>URL:</label>\n                    <input\n                      type=\"text\"\n                      .value=\"","\"\n                      @input=\"","\"\n                      placeholder=\"https://example.com\"\n                    />\n                  </div>\n                "]);return $=function(){return a},a}function _(){var a=Aa(["\n                  <div class=\"form-group\">\n                    <label>Navigation Path:</label>\n                    <input\n                      type=\"text\"\n                      .value=\"","\"\n                      @input=\"","\"\n                      placeholder=\"/lovelace/dashboard\"\n                    />\n                  </div>\n                "]);return _=function(){return a},a}function aa(){var a=Aa(["\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label class=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    .checked=\"","\"\n                    @change=\"","\"\n                  />\n                  ","\n                </label>\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    .checked=\"","\"\n                    @change=\"","\"\n                  />\n                  ","\n                </label>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <label class=\"checkbox-label\">\n                <input\n                  type=\"checkbox\"\n                  .checked=\"","\"\n                  @change=\"","\"\n                />\n                ","\n              </label>\n            </div>\n\n            <div class=\"tap-action-section\">\n              <h4>","</h4>\n              <div class=\"form-row\">\n                <div class=\"form-group\">\n                  <label>",":</label>\n                  <select .value=\"","\" @change=\"","\">\n                    <option value=\"more-info\">More Info</option>\n                    <option value=\"navigate\">Navigate</option>\n                    <option value=\"call-service\">Call Service</option>\n                    <option value=\"url\">Open URL</option>\n                    <option value=\"none\">No Action</option>\n                  </select>\n                </div>\n\n                ","\n\n                ","\n\n                ","\n              </div>\n            </div>\n          "]);return aa=function(){return a},a}function ba(){var a=Aa(["\n                <div class=\"threshold-row\">\n                  <input\n                    type=\"number\"\n                    .value=\"","\"\n                    @input=\"","\"\n                    placeholder=\"","\"\n                  />\n                  <input\n                    type=\"color\"\n                    .value=\"","\"\n                    @input=\"","\"\n                  />\n                  <button class=\"btn-remove\" @click=\"","\">Remove</button>\n                </div>\n              "]);return ba=function(){return a},a}function ca(){var a=Aa(["\n            <div class=\"form-group\">\n              <label>",":</label>\n              <select .value=\"","\" @change=\"","\">\n                <option value=\"smooth\">","</option>\n                <option value=\"hard\">","</option>\n              </select>\n            </div>\n\n            <div class=\"thresholds-section\">\n              <div class=\"thresholds-header\">\n                <h4>","</h4>\n                <button class=\"btn-add\" @click=\"","\">","</button>\n              </div>\n\n              ","\n            </div>\n          "]);return ca=function(){return a},a}function da(){var a=Aa(["\n            <h4>","</h4>\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"text\"\n                  .value=\"","\"\n                  @input=\"","\"\n                  placeholder=\"","\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"text\"\n                  .value=\"","\"\n                  @input=\"","\"\n                  placeholder=\"","\"\n                />\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <label>",":</label>\n              <input\n                type=\"number\"\n                min=\"0\"\n                .value=\"","\"\n                @input=\"","\"\n              />\n            </div>\n          "]);return da=function(){return a},a}function ea(){var a=Aa(["\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"168\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"0.1\"\n                  max=\"60\"\n                  step=\"0.1\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <select .value=\"","\" @change=\"","\">\n                  <option value=\"avg\">","</option>\n                  <option value=\"median\">","</option>\n                  <option value=\"min\">","</option>\n                  <option value=\"max\">","</option>\n                  <option value=\"first\">","</option>\n                  <option value=\"last\">","</option>\n                  <option value=\"sum\">","</option>\n                  <option value=\"delta\">","</option>\n                  <option value=\"diff\">","</option>\n                </select>\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <select .value=\"","\" @change=\"","\">\n                  <option value=\"interval\">","</option>\n                  <option value=\"date\">","</option>\n                  <option value=\"hour\">","</option>\n                </select>\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    .checked=\"","\"\n                    @change=\"","\"\n                  />\n                  ","\n                </label>\n              </div>\n            </div>\n          "]);return ea=function(){return a},a}function fa(){var a=Aa(["\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"50\"\n                  max=\"500\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"20\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"text\"\n                  .value=\"","\"\n                  @input=\"","\"\n                  placeholder=\"","\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"20\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label class=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    .checked=\"","\"\n                    @change=\"","\"\n                  />\n                  ","\n                </label>\n              </div>\n\n              <div class=\"form-group\">\n                <label class=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    .checked=\"","\"\n                    @change=\"","\"\n                  />\n                  ","\n                </label>\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label class=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    .checked=\"","\"\n                    @change=\"","\"\n                  />\n                  ","\n                </label>\n              </div>\n            </div>\n          "]);return fa=function(){return a},a}function ga(){var a=Aa(["\n                  <label class=\"checkbox-item\">\n                    <input\n                      type=\"checkbox\"\n                      .checked=\"","\"\n                      @change=\"","\"\n                    />\n                    ","\n                  </label>\n                "]);return ga=function(){return a},a}function ha(){var a=Aa(["\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"text\"\n                  .value=\"","\"\n                  @input=\"","\"\n                  placeholder=\"","\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                ","\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"text\"\n                  .value=\"","\"\n                  @input=\"","\"\n                  placeholder=\"https://example.com/image.png\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"text\"\n                  .value=\"","\"\n                  @input=\"","\"\n                  placeholder=\"","\"\n                />\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"50\"\n                  max=\"200\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"8\"\n                  max=\"32\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <select .value=\"","\" @change=\"","\">\n                  <option value=\"default\">","</option>\n                  <option value=\"left\">","</option>\n                  <option value=\"right\">","</option>\n                  <option value=\"center\">","</option>\n                </select>\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <select .value=\"","\" @change=\"","\">\n                  <option value=\"left\">","</option>\n                  <option value=\"right\">","</option>\n                  <option value=\"center\">","</option>\n                  <option value=\"state\">","</option>\n                </select>\n              </div>\n            </div>\n\n            <div class=\"form-row\">\n              <div class=\"form-group\">\n                <label>",":</label>\n                <select .value=\"","\" @change=\"","\">\n                  <option value=\"left\">","</option>\n                  <option value=\"right\">","</option>\n                  <option value=\"center\">","</option>\n                </select>\n              </div>\n\n              <div class=\"form-group\">\n                <label>",":</label>\n                <input\n                  type=\"number\"\n                  min=\"0\"\n                  max=\"10\"\n                  .value=\"","\"\n                  @input=\"","\"\n                />\n              </div>\n            </div>\n\n            <div class=\"show-options\">\n              <h4>","</h4>\n              <div class=\"checkbox-grid\">\n                ","\n              </div>\n            </div>\n          "]);return ha=function(){return a},a}function ia(){var a=Aa(["\n                  <div class=\"entity-config-expanded\">\n                    ","\n                  </div>\n                "]);return ia=function(){return a},a}function ja(){var a=Aa(["\n                          <div class=\"entity-display\">\n                            <ha-icon .icon=\"","\" class=\"entity-icon\"></ha-icon>\n                            <div class=\"entity-details\">\n                              <div class=\"entity-friendly-name\">","</div>\n                              <div class=\"entity-id\">","</div>\n                            </div>\n                          </div>\n                        "]);return ja=function(){return a},a}function ka(){var a=Aa(["\n                <div class=\"entity-management-row\">\n                  <div class=\"entity-top-section\">\n                    <div class=\"entity-picker-section\">\n                      ","\n                    </div>\n                    <div class=\"entity-info-section\">\n                      ","\n                    </div>\n                  </div>\n                  <div class=\"entity-actions\">\n                    <button class=\"btn-configure\" @click=\"","\">\n                      ","\n                    </button>\n                    <button class=\"btn-remove\" @click=\"","\" title=\"","\">\xD7</button>\n                  </div>\n                </div>\n                ","\n              "]);return ka=function(){return a},a}function la(){var a=Aa(["\n              <div class=\"form-group\">\n                <label>",":</label>\n                ","\n              </div>\n            "]);return la=function(){return a},a}function ma(){var a=Aa(["\n            ","\n\n            <div class=\"entities-section\">\n              ","\n              <button class=\"btn-add\" @click=\"","\">","</button>\n            </div>\n          "]);return ma=function(){return a},a}function na(){var a=Aa(["\n        <div class=\"card-config\">\n          <div class=\"header\">\n            <h2>","</h2>\n            <p>","</p>\n          </div>\n\n          <!-- ENTITIES MANAGEMENT -->\n          ","\n\n          <!-- DISPLAY OPTIONS -->\n          ","\n\n          <!-- GRAPH SETTINGS -->\n          ","\n\n          <!-- DATA & TIME -->\n          ","\n\n          <!-- SCALE & BOUNDS -->\n          ","\n\n          <!-- COLORS & THRESHOLDS -->\n          ","\n\n          <!-- ADVANCED OPTIONS -->\n          ","\n\n        </div>\n      "]);return na=function(){return a},a}function oa(){var a=Aa(["\n        <div class=\"loading\">\n          <h3>","</h3>\n          <p>","</p>\n        </div>\n      "]);return oa=function(){return a},a}function pa(){var a=Aa(["\n      <g class=\"multi-axis-chart\">\n        ","\n      </g>\n    "]);return pa=function(){return a},a}function qa(){var a=Aa(["\n        <path\n          class=\"multi-axis-line\"\n          d=\"","\"\n          fill=\"none\"\n          stroke=\"","\"\n          stroke-width=\"2\"\n          data-axis=\"","\"\n          data-entity=\"","\"\n          style=\"transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\"\n        />\n      "]);return qa=function(){return a},a}function ra(){var a=Aa(["\n      <g class=\"candlestick-chart\">\n        ","\n      </g>\n    "]);return ra=function(){return a},a}function sa(){var a=Aa(["\n        <g class=\"candlestick\" data-index=\"","\">\n          <!-- High-Low Wick -->\n          <line\n            x1=\"","\" y1=\"","\"\n            x2=\"","\" y2=\"","\"\n            stroke=\"","\"\n            stroke-width=\"1\"\n          />\n\n          <!-- Open-Close Body -->\n          <rect\n            x=\"","\"\n            y=\"","\"\n            width=\"","\"\n            height=\"","\"\n            fill=\"","\"\n            stroke=\"","\"\n            stroke-width=\"1\"\n            style=\"transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\"\n            @mouseover=\"","\"\n            @mouseout=\"","\"\n          />\n\n          <!-- High/Low markers for precision -->\n          <circle cx=\"","\" cy=\"","\" r=\"1\" fill=\"","\" />\n          <circle cx=\"","\" cy=\"","\" r=\"1\" fill=\"","\" />\n        </g>\n      "]);return sa=function(){return a},a}function ta(){var a=Aa(["\n      <g class=\"stacked-area-chart\">\n        ","\n      </g>\n    "]);return ta=function(){return a},a}function ua(){var a=Aa(["\n        <path\n          class=\"stacked-area-layer\"\n          d=\"","\"\n          fill=\"","\"\n          fill-opacity=\"0.7\"\n          stroke=\"","\"\n          stroke-width=\"1\"\n          style=\"transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\"\n          @mouseover=\"","\"\n          @mouseout=\"","\"\n        />\n      "]);return ua=function(){return a},a}function va(){var a=Aa([""]);return va=function(){return a},a}function wa(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function xa(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?wa(Object(b),!0).forEach(function(c){ya(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):wa(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function ya(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function za(){var a=Aa(["\n  :host {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    box-sizing: border-box;\n  }\n  ha-card {\n    flex-direction: column;\n    flex: 1;\n    padding: 0;\n    position: relative;\n    overflow: hidden;\n    border-radius: 12px;\n    box-shadow:\n      0 2px 8px rgba(0, 0, 0, 0.1),\n      0 1px 3px rgba(0, 0, 0, 0.06),\n      0 0 0 1px rgba(255, 255, 255, 0.05);\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    display: flex;\n    height: auto; /* let HA grid define height */\n    min-height: 0;\n    box-sizing: border-box;\n    gap: 0;\n  }\n  ha-card > div {\n    padding: 0 16px;\n    margin: 0;\n  }\n  ha-card > div:first-child {\n    padding-top: 16px;\n  }\n  ha-card > div:not(:has(.graph)) {\n    padding-bottom: 16px;\n  }\n  ha-card > div:has(.graph) {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    min-height: 0;\n    overflow: hidden;\n    padding: 0 16px;\n    margin: 0;\n    height: 100%;\n  }\n  ha-card .graph {\n    padding: 0;\n    margin: 0;\n    order: 10;\n  }\n  ha-card[points] .line--points,\n  ha-card[labels] .graph__labels.--primary {\n    opacity: 0;\n    transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n    animation: none;\n  }\n  ha-card[labels-secondary] .graph__labels.--secondary {\n    opacity: 0;\n    transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n    animation: none;\n  }\n  ha-card[points]:hover .line--points,\n  ha-card:hover .graph__labels.--primary,\n  ha-card:hover .graph__labels.--secondary {\n      opacity: 1;\n  }\n  ha-card[fill] path {\n    stroke-linecap: initial;\n    stroke-linejoin: initial;\n  }\n  ha-card .graph__legend {\n    order: -1;\n    padding: 0 16px 8px 16px;\n  }\n  ha-card[group] {\n    padding: 0;\n  }\n  ha-card[group] > div {\n    padding-left: 0;\n    padding-right: 0;\n  }\n  ha-card[group] .graph__legend {\n    padding-left: 0;\n    padding-right: 0;\n  }\n  ha-card[hover] {\n    cursor: pointer;\n  }\n  ha-card:hover {\n    box-shadow:\n      0 8px 25px rgba(0, 0, 0, 0.15),\n      0 4px 10px rgba(0, 0, 0, 0.08),\n      0 0 0 1px rgba(255, 255, 255, 0.1);\n    transform: translateY(-2px);\n  }\n  ha-card[hover]:hover {\n    box-shadow:\n      0 12px 35px rgba(0, 0, 0, 0.2),\n      0 6px 15px rgba(0, 0, 0, 0.12),\n      0 0 0 1px rgba(255, 255, 255, 0.15);\n    transform: translateY(-4px);\n  }\n  ha-spinner {\n    margin: 4px auto;\n  }\n  .flex {\n    display: flex;\n    display: -webkit-flex;\n    min-width: 0;\n  }\n  .header {\n    justify-content: space-between;\n    flex-shrink: 0;\n  }\n  .header[loc=\"center\"] {\n    justify-content: space-around;\n  }\n  .header[loc=\"left\"] {\n    align-self: flex-start;\n  }\n  .header[loc=\"right\"] {\n    align-self: flex-end;\n  }\n  .name {\n    align-items: center;\n    min-width: 0;\n    letter-spacing: var(--mcg-title-letter-spacing, normal);\n  }\n  .name > span {\n    font-size: 1.2em;\n    font-weight: var(--mcg-title-font-weight, 500);\n    max-height: 1.4em;\n    min-height: 1.4em;\n    opacity: .65;\n  }\n  .icon {\n    color: var(--state-icon-color, #44739e);\n    display: inline-block;\n    flex: 0 0 1.7em;\n    text-align: center;\n  }\n  .icon > ha-icon {\n    height: 1.7em;\n    width: 1.7em;\n  }\n  .icon[loc=\"left\"] {\n    order: -1;\n    margin-right: .6em;\n    margin-left: 0;\n  }\n  .icon[loc=\"state\"] {\n    align-self: center;\n  }\n  .states {\n    align-items: flex-start;\n    font-weight: 300;\n    justify-content: space-between;\n    flex-wrap: nowrap;\n    flex-shrink: 0;\n  }\n  .states .icon {\n    align-self: center;\n    margin-left: 0;\n  }\n  .states[loc=\"center\"] {\n    justify-content: space-evenly;\n  }\n  .states[loc=\"right\"] > .state {\n    margin-left: auto;\n    order: 2;\n  }\n  .states[loc=\"center\"] .states--secondary,\n  .states[loc=\"right\"] .states--secondary {\n    margin-left: 0;\n  }\n  .states[loc=\"center\"] .states--secondary {\n    align-items: center;\n  }\n  .states[loc=\"right\"] .states--secondary {\n    align-items: flex-start;\n  }\n  .states[loc=\"center\"] .state__time {\n    left: 50%;\n    transform: translateX(-50%);\n  }\n  .states > .icon > ha-icon {\n    height: 2em !important;\n    width: 2em !important;\n  }\n  .states--secondary {\n    display: flex;\n    flex-flow: column;\n    flex-wrap: wrap;\n    align-items: flex-end;\n    margin-left: 1rem;\n    min-width: 0;\n    margin-left: 1.4em;\n  }\n  .states--secondary:empty {\n    display: none;\n  }\n  .state {\n    position: relative;\n    display: flex;\n    flex-wrap: nowrap;\n    max-width: 100%;\n    min-width: 0;\n  }\n  .state > svg {\n    align-self: center;\n    border-radius: 100%;\n  }\n  .state--small {\n    font-size: .6em;\n    margin-bottom: .6rem;\n    flex-wrap: nowrap;\n  }\n  .state--small > svg {\n    position: absolute;\n    left: -1.6em;\n    align-self: center;\n    height: 1em;\n    width: 1em;\n    border-radius: 100%;\n    margin-right: 1em;\n  }\n  .state--small:last-child {\n    margin-bottom: 0;\n  }\n  .states--secondary > :only-child {\n    font-size: 1em;\n    margin-bottom: 0;\n  }\n  .states--secondary > :only-child svg {\n    display: none;\n  }\n  .state__value {\n    display: inline-block;\n    font-size: 2.4em;\n    margin-right: .25rem;\n    line-height: 1.2em;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  .state__uom {\n    flex: 1;\n    align-self: flex-end;\n    display: inline-block;\n    font-size: 1.4em;\n    font-weight: 400;\n    line-height: 1.6em;\n    margin-top: .1em;\n    opacity: .6;\n    vertical-align: bottom;\n  }\n  .state--small .state__uom {\n    flex: 1;\n  }\n  .state__time {\n    font-size: .95rem;\n    font-weight: 500;\n    bottom: -1.1rem;\n    left: 0;\n    opacity: .75;\n    position: absolute;\n    white-space: nowrap;\n    animation: fade 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    transition: opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  .states[loc=\"right\"] .state__time {\n    left: initial;\n    right: 0;\n  }\n  .graph {\n    align-self: stretch;\n    box-sizing: border-box;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    margin: 0;\n    width: 100%;\n    min-height: 0;\n    overflow: hidden;\n    height: 100%;\n    position: relative;\n  }\n  .graph__container {\n    display: flex;\n    flex-direction: row;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    flex: 1;\n    min-height: 0;\n    overflow: hidden;\n  }\n  .graph__container__svg {\n    cursor: default;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    min-height: 0;\n    overflow: hidden;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n  svg {\n    overflow: visible;\n    display: block;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    /* Ensure no extra baseline space from inline SVG rendering */\n    vertical-align: top;\n  }\n  path {\n    stroke-linecap: round;\n    stroke-linejoin: round;\n  }\n  .fill[anim=\"false\"] {\n    animation: reveal .25s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;\n  }\n  .fill[anim=\"false\"][type=\"fade\"] {\n    animation: reveal-2 .25s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;\n  }\n  .line--points[anim=\"false\"],\n  .line[anim=\"false\"] {\n    animation: pop .25s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;\n  }\n  .line--points[inactive],\n  .line--rect[inactive],\n  .fill--rect[inactive] {\n    opacity: 0 !important;\n    animation: none !important;\n    transition: all .15s !important;\n  }\n  .line--points[tooltip] .line--point[inactive] {\n    opacity: 0;\n  }\n  .line--point {\n    cursor: pointer;\n    fill: var(--primary-background-color, white);\n    stroke-width: inherit;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  .line--point:hover {\n    fill: var(--mcg-hover, inherit) !important;\n    transform: scale(1.15);\n    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));\n  }\n  .bars {\n    animation: pop .25s cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  .bars[anim] {\n    animation: bars .5s cubic-bezier(0.215, 0.61, 0.355, 1);\n  }\n  .bar {\n    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  .bar:hover {\n    opacity: 0.8;\n    cursor: pointer;\n    filter: brightness(1.1) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));\n    transform: translateY(-1px);\n  }\n  ha-card[gradient] .line--point:hover {\n    fill: var(--primary-text-color, white);\n  }\n  path,\n  .line--points,\n  .fill {\n    opacity: 0;\n  }\n  .line--points[anim=\"true\"][init] {\n    animation: pop .5s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;\n  }\n  .fill[anim=\"true\"][init] {\n    animation: reveal .5s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;\n  }\n  .fill[anim=\"true\"][init][type=\"fade\"] {\n    animation: reveal-2 .5s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;\n  }\n  .line[anim=\"true\"][init] {\n    animation: dash 1s cubic-bezier(0.215, 0.61, 0.355, 1) forwards;\n  }\n  .graph__labels.--secondary {\n    right: 0;\n    margin-right: 0px;\n    align-items: flex-end;\n  }\n  .graph__labels {\n    align-items: flex-start;\n    flex-direction: column;\n    font-size: calc(.15em + 8.5px);\n    font-weight: 400;\n    justify-content: space-between;\n    margin-right: 10px;\n    padding: .6em;\n    position: absolute;\n    pointer-events: none;\n    top: 0; bottom: 0;\n    opacity: .75;\n  }\n  .graph__labels > span {\n    cursor: pointer;\n    background: var(--primary-background-color, white);\n    border-radius: 0.75em;\n    padding: .3em .8em;\n    box-shadow:\n      0 2px 4px rgba(0, 0, 0, 0.08),\n      0 1px 2px rgba(0, 0, 0, 0.04);\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    backdrop-filter: blur(8px);\n    border: 1px solid rgba(255, 255, 255, 0.15);\n  }\n  .graph__labels > span:hover {\n    box-shadow:\n      0 4px 8px rgba(0, 0, 0, 0.12),\n      0 2px 4px rgba(0, 0, 0, 0.08);\n    transform: translateY(-1px);\n    background: var(--card-background-color, white);\n  }\n  .graph__legend {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-evenly;\n    padding: 16px 0 0 0;\n    margin: 0;\n    flex-wrap: wrap;\n    flex-shrink: 0;\n  }\n  .graph__legend__item {\n    cursor: pointer;\n    display: flex;\n    min-width: 0;\n    margin: .4em;\n    align-items: center;\n    padding: 0.3em 0.6em;\n    border-radius: 0.5em;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  .graph__legend__item:hover {\n    background: rgba(255, 255, 255, 0.05);\n    transform: translateY(-1px);\n    box-shadow:\n      0 2px 4px rgba(0, 0, 0, 0.08),\n      0 1px 2px rgba(0, 0, 0, 0.04);\n  }\n  .graph__legend__item span {\n    opacity: .75;\n    margin-left: .4em;\n  }\n  .graph__legend__item svg {\n    border-radius: 100%;\n    min-width: 10px;\n  }\n  .info {\n    justify-content: space-between;\n    align-items: middle;\n    flex-shrink: 0;\n  }\n  .info__item {\n    display: flex;\n    flex-flow: column;\n    text-align: center;\n  }\n  .info__item:last-child {\n    align-items: flex-end;\n    text-align: right;\n  }\n  .info__item:first-child {\n    align-items: flex-start;\n    text-align: left;\n  }\n  .info__item__type {\n    text-transform: capitalize;\n    font-weight: 500;\n    opacity: .9;\n  }\n  .info__item__time,\n  .info__item__value {\n    opacity: .75;\n  }\n  .ellipsis {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  @keyframes fade {\n    0% {\n      opacity: 0;\n      transform: translateY(4px);\n    }\n    100% {\n      opacity: 0.75;\n      transform: translateY(0);\n    }\n  }\n  @keyframes reveal {\n    0% { opacity: 0; }\n    100% { opacity: .15; }\n  }\n  @keyframes reveal-2 {\n    0% { opacity: 0; }\n    100% { opacity: .4; }\n  }\n  @keyframes pop {\n    0% { opacity: 0; }\n    100% { opacity: 1; }\n  }\n  @keyframes bars {\n    0% { opacity: 0; }\n    50% { opacity: 0; }\n    100% { opacity: 1; }\n  }\n  @keyframes dash {\n    0% {\n      opacity: 0;\n    }\n    25% {\n      opacity: 1;\n    }\n    100% {\n      opacity: 1;\n      stroke-dashoffset: 0;\n    }\n  }"]);return za=function(){return a},a}function Aa(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function Ba(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function Ca(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){Ba(h,d,e,f,g,"next",a)}function g(a){Ba(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}function Da(a){return Ha(a)||Ga(a)||Fa(a)||Ea()}function Ea(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fa(a,b){if(a){if("string"==typeof a)return Ia(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Ia(a,b):void 0}}function Ga(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function Ha(a){if(Array.isArray(a))return Ia(a)}function Ia(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}(function(a){"function"==typeof define&&define.amd?define(a):a()})(function(){var $b=Number.isNaN,_b=Math.log10,ac=Number.isFinite,bc=Math.ceil,cc=Math.PI,dc=String.fromCharCode,ec=Math.floor,fc=Math.abs,gc=Math.sin,hc=Math.cos,ic=Math.sqrt,jc=Math.atan2,kc=Math.pow,lc=Math.round,mc=Math.max,nc=Math.min;function i(a,b){for(var{element:{content:d},parts:c}=a,e=document.createTreeWalker(d,133,null,!1),f=Bc(c),g=c[f],h=-1,i=0,j=[],k=null;e.nextNode();){h++;var l=e.currentNode;for(l.previousSibling===k&&(k=null),b.has(l)&&(j.push(l),null===k&&(k=l)),null!==k&&i++;g!==void 0&&g.index===h;)g.index=null===k?g.index-i:-1,f=Bc(c,f),g=c[f]}j.forEach(a=>a.parentNode.removeChild(a))}function wa(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,{element:{content:e},parts:d}=a;if(null===c||void 0===c)return void e.appendChild(b);for(var f=document.createTreeWalker(e,133,null,!1),g=Bc(d),h=0,i=-1;f.nextNode();){i++;var j=f.currentNode;for(j===c&&(h=Ac(b),c.parentNode.insertBefore(b,c));-1!==g&&d[g].index===i;){if(0<h){for(;-1!==g;)d[g].index+=h,g=Bc(d,g);return}g=Bc(d,g)}}}function ya(a){var b=Wc.get(a.type);void 0===b&&(b={stringsArray:new WeakMap,keyString:new Map},Wc.set(a.type,b));var c=b.stringsArray.get(a.strings);if(void 0!==c)return c;var d=a.strings.join(rc);return c=b.keyString.get(d),void 0===c&&(c=new vc(a,a.getTemplateElement()),b.keyString.set(d,c)),b.stringsArray.set(a.strings,c),c}function Aa(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(var c="undefined"==typeof BlobBuilder?"undefined"==typeof MSBlobBuilder?"undefined"==typeof MozBlobBuilder?WebKitBlobBuilder:MozBlobBuilder:MSBlobBuilder:BlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function Ba(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}function Ea(a,b,c){"function"==typeof b&&a.then(b),"function"==typeof c&&a.catch(c)}function Fa(a){return"string"!=typeof a&&(console.warn("".concat(a," used as a key, but it is not a string.")),a+=""),a}function Ga(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function Ha(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt(e);return c}function Ia(a){return new Cd(function(b){var c=a.transaction("local-forage-detect-blob-support","readwrite"),d=Aa([""]);c.objectStore("local-forage-detect-blob-support").put(d,"key"),c.onabort=function(a){a.preventDefault(),a.stopPropagation(),b(!1)},c.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);b(c||!a||43<=parseInt(a[1],10))}}).catch(function(){return!1})}function Ja(a){return"boolean"==typeof Bd?Cd.resolve(Bd):Ia(a).then(function(a){return Bd=a,Bd})}function Ka(a){var b=Dd[a.name],c={};c.promise=new Cd(function(a,b){c.resolve=a,c.reject=b}),b.deferredOperations.push(c),b.dbReady=b.dbReady?b.dbReady.then(function(){return c.promise}):c.promise}function La(a){var b=Dd[a.name],c=b.deferredOperations.pop();if(c)return c.resolve(),c.promise}function Ma(a,b){var c=Dd[a.name],d=c.deferredOperations.pop();if(d)return d.reject(b),d.promise}function Na(a,b){return new Cd(function(c,d){if(Dd[a.name]=Dd[a.name]||Xa(),a.db)if(b)Ka(a),a.db.close();else return c(a.db);var e=[a.name];b&&e.push(a.version);var f=Ad.open.apply(Ad,e);b&&(f.onupgradeneeded=function(b){var c=f.result;try{c.createObjectStore(a.storeName),1>=b.oldVersion&&c.createObjectStore("local-forage-detect-blob-support")}catch(c){if("ConstraintError"===c.name)console.warn("The database \""+a.name+"\" has been upgraded from version "+b.oldVersion+" to version "+b.newVersion+", but the storage \""+a.storeName+"\" already exists.");else throw c}}),f.onerror=function(a){a.preventDefault(),d(f.error)},f.onsuccess=function(){c(f.result),La(a)}})}function Oa(a){return Na(a,!1)}function Pa(a){return Na(a,!0)}function Qa(a,b){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),d=a.version<a.db.version,e=a.version>a.db.version;if(d&&(a.version!==b&&console.warn("The database \""+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),e||c){if(c){var f=a.db.version+1;f>a.version&&(a.version=f)}return!0}return!1}function Ra(a){return new Cd(function(b,c){var d=new FileReader;d.onerror=c,d.onloadend=function(c){var d=btoa(c.target.result||"");b({__local_forage_encoded_blob:!0,data:d,type:a.type})},d.readAsBinaryString(a)})}function Sa(a){var b=Ha(atob(a.data));return Aa([b],{type:a.type})}function Ta(a){return a&&a.__local_forage_encoded_blob}function Ua(a){var b=this,c=b._initReady().then(function(){var a=Dd[b._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return Ea(c,a,a),c}function Va(a){Ka(a);for(var b,c=Dd[a.name],d=c.forages,e=0;e<d.length;e++)b=d[e],b._dbInfo.db&&(b._dbInfo.db.close(),b._dbInfo.db=null);return a.db=null,Oa(a).then(b=>(a.db=b,Qa(a)?Pa(a):b)).then(b=>{a.db=c.db=b;for(var e=0;e<d.length;e++)d[e]._dbInfo.db=b}).catch(b=>{throw Ma(a,b),b})}function Wa(a,b,c,d){d===void 0&&(d=1);try{var e=a.db.transaction(a.storeName,b);c(null,e)}catch(e){if(0<d&&(!a.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return Cd.resolve().then(()=>{if(!a.db||"NotFoundError"===e.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),Pa(a)}).then(()=>Va(a).then(function(){Wa(a,b,c,d-1)})).catch(c);c(e)}}function Xa(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ya(a){var b,c,d,e,f,g=.75*a.length,h=a.length,j=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var k=new ArrayBuffer(g),l=new Uint8Array(k);for(b=0;b<h;b+=4)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[b]),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[b+1]),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[b+2]),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a[b+3]),l[j++]=c<<2|d>>4,l[j++]=(15&d)<<4|e>>2,l[j++]=(3&e)<<6|63&f;return k}function Za(a){var b,c=new Uint8Array(a),d="";for(b=0;b<c.length;b+=3)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c[b]>>2],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(3&c[b])<<4|c[b+1]>>4],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(15&c[b+1])<<2|c[b+2]>>6],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[63&c[b+2]];return 2==c.length%3?d=d.substring(0,d.length-1)+"=":1==c.length%3&&(d=d.substring(0,d.length-2)+"=="),d}function $a(a,b,c,d){a.executeSql("CREATE TABLE IF NOT EXISTS ".concat(b.storeName," ")+"(id INTEGER PRIMARY KEY, key unique, value)",[],c,d)}function ab(a,b,c,d,e,f){a.executeSql(c,d,e,function(a,g){g.code===g.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[b.storeName],function(a,h){h.rows.length?f(a,g):$a(a,b,function(){a.executeSql(c,d,e,f)},f)},f):f(a,g)},f)}function bb(a,b,c,d){var e=this;a=Fa(a);var f=new Cd(function(f,g){e.ready().then(function(){void 0===b&&(b=null);var h=b,i=e._dbInfo;i.serializer.serialize(b,function(b,j){j?g(j):i.db.transaction(function(c){ab(c,i,"INSERT OR REPLACE INTO ".concat(i.storeName," ")+"(key, value) VALUES (?, ?)",[a,b],function(){f(h)},function(a,b){g(b)})},function(b){if(b.code===b.QUOTA_ERR){if(0<d)return void f(bb.apply(e,[a,h,c,d-1]));g(b)}})})}).catch(g)});return Ba(f,c),f}function cb(a){return new Cd(function(b,c){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,d){for(var e=[],f=0;f<d.rows.length;f++)e.push(d.rows.item(f).name);b({db:a,storeNames:e})},function(a,b){c(b)})},function(a){c(a)})})}function db(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(a){return!1}}function eb(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function fb(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(a){return!0}}function gb(){return!fb()||0<localStorage.length}function hb(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function ib(){for(var a,b=1;b<arguments.length;b++)if(a=arguments[b],a)for(var c in a)a.hasOwnProperty(c)&&(arguments[0][c]=Pd(a[c])?a[c].slice():a[c]);return arguments[0]}function jb(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c.push(a[d].substr(0,b));return c}function kb(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(var d,e=0,f=b;e<f.length;e++)for(var g in d=f[e],d)a[g]=d[g];return a}function lb(a,b,c){if(void 0===c&&(c={}),"string"!=typeof b)throw new Error("Invalid format in fecha parse");if(b=te[b]||b,1e3<a.length)return null;var d=new Date,e={year:d.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},f=[],g=[],h=b.replace(be,function(a,b){return g.push(ke(b)),"@@@"}),j={},k={};h=ke(h).replace(Zd,function(a){var b=se[a],c=b[0],d=b[1],e=b[3];if(j[c])throw new Error("Invalid format. "+c+" specified twice in format");return j[c]=!0,e&&(k[e]=!0),f.push(b),"("+d+")"}),Object.keys(k).forEach(function(a){if(!j[a])throw new Error("Invalid format. "+a+" is required in specified format")}),h=h.replace(/@@@/g,function(){return g.shift()});var l=a.match(new RegExp(h,"i"));if(!l)return null;for(var m=kb(kb({},ie),c),n=1;n<l.length;n++){var o=f[n-1],p=o[0],q=o[2],r=q?q(l[n],m):+l[n];if(null==r)return null;e[p]=r}1===e.isPm&&null!=e.hour&&12!=+e.hour?e.hour=+e.hour+12:0===e.isPm&&12==+e.hour&&(e.hour=0);for(var s=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond),t=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],n=0,u=t.length;n<u;n++)if(j[t[n][0]]&&e[t[n][0]]!==s[t[n][1]]())return null;return null==e.timezoneOffset?s:new Date(Date.UTC(e.year,e.month,e.day,e.hour,e.minute-e.timezoneOffset,e.second,e.millisecond))}function mb(a){return a.substr(0,a.indexOf("."))}function nb(a,b){if(a in Ae)return Ae[a];return"alarm_control_panel"===a?"armed_home"===b?"hass:bell-plus":"armed_night"===b?"hass:bell-sleep":"disarmed"===b?"hass:bell-outline":"triggered"===b?"hass:bell-ring":"hass:bell":"binary_sensor"===a?b&&"off"===b?"hass:radiobox-blank":"hass:checkbox-marked-circle":"cover"===a?"closed"===b?"hass:window-closed":"hass:window-open":"lock"===a?b&&"unlocked"===b?"hass:lock-open":"hass:lock":"media_player"===a?b&&"off"!==b&&"idle"!==b?"hass:cast-connected":"hass:cast":"zwave"===a?"dead"===b?"hass:emoticon-dead":"sleeping"===b?"hass:sleep":"initializing"===b?"hass:timer-sand":"hass:z-wave":(console.warn("Unable to find icon for domain "+a+" ("+b+")"),"hass:bookmark")}function ob(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function pb(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function qb(){}function rb(){return this.rgb().formatHex()}function sb(){return this.rgb().formatRgb()}function tb(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=Ke.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?ub(b):3===c?new yb(15&b>>8|240&b>>4,15&b>>4|240&b,(15&b)<<4|15&b,1):8===c?vb(255&b>>24,255&b>>16,255&b>>8,(255&b)/255):4===c?vb(15&b>>12|240&b>>8,15&b>>8|240&b>>4,15&b>>4|240&b,((15&b)<<4|15&b)/255):null):(b=Le.exec(a))?new yb(b[1],b[2],b[3],1):(b=Me.exec(a))?new yb(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=Ne.exec(a))?vb(b[1],b[2],b[3],b[4]):(b=Oe.exec(a))?vb(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=Pe.exec(a))?Eb(b[1],b[2]/100,b[3]/100,1):(b=Qe.exec(a))?Eb(b[1],b[2]/100,b[3]/100,b[4]):Re.hasOwnProperty(a)?ub(Re[a]):"transparent"===a?new yb(NaN,NaN,NaN,0):null}function ub(a){return new yb(255&a>>16,255&a>>8,255&a,1)}function vb(c,d,e,f){return 0>=f&&(c=d=e=NaN),new yb(c,d,e,f)}function wb(a){return(a instanceof qb||(a=tb(a)),!a)?new yb:(a=a.rgb(),new yb(a.r,a.g,a.b,a.opacity))}function xb(a,c,d,b){return 1===arguments.length?wb(a):new yb(a,c,d,null==b?1:b)}function yb(a,c,d,b){this.r=+a,this.g=+c,this.b=+d,this.opacity=+b}function zb(){return"#".concat(Db(this.r)).concat(Db(this.g)).concat(Db(this.b))}function Ab(){var b=Bb(this.opacity);return"".concat(1===b?"rgb(":"rgba(").concat(Cb(this.r),", ").concat(Cb(this.g),", ").concat(Cb(this.b)).concat(1===b?")":", ".concat(b,")"))}function Bb(a){return isNaN(a)?1:mc(0,nc(1,a))}function Cb(a){return mc(0,nc(255,lc(a)||0))}function Db(a){return a=Cb(a),(16>a?"0":"")+a.toString(16)}function Eb(b,c,d,e){return 0>=e?b=c=d=NaN:0>=d||1<=d?b=c=NaN:0>=c&&(b=NaN),new Gb(b,c,d,e)}function Fb(a){if(a instanceof Gb)return new Gb(a.h,a.s,a.l,a.opacity);if(a instanceof qb||(a=tb(a)),!a)return new Gb;if(a instanceof Gb)return a;a=a.rgb();var c=a.r/255,d=a.g/255,e=a.b/255,b=nc(c,d,e),f=mc(c,d,e),g=NaN,i=f-b,j=(f+b)/2;return i?(g=c===f?(d-e)/i+6*(d<e):d===f?(e-c)/i+2:(c-d)/i+4,i/=.5>j?f+b:2-f-b,g*=60):i=0<j&&1>j?0:g,new Gb(g,i,j,a.opacity)}function Gb(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function Hb(a){return a=(a||0)%360,0>a?a+360:a}function Ib(a){return mc(0,nc(1,a||0))}function Jb(a,b,c){return 255*(60>a?b+(c-b)*a/60:180>a?c:240>a?b+(c-b)*(240-a)/60:b)}function Kb(a){if(a instanceof Lb)return new Lb(a.l,a.a,a.b,a.opacity);if(a instanceof Rb)return Sb(a);a instanceof yb||(a=wb(a));var c,d,e=Pb(a.r),f=Pb(a.g),g=Pb(a.b),b=Mb((.2225045*e+.7168786*f+.0606169*g)/1);return e===f&&f===g?c=d=b:(c=Mb((.4360747*e+.3850649*f+.1430804*g)/Ve),d=Mb((.0139322*e+.0971045*f+.7141733*g)/We)),new Lb(116*b-16,500*(c-b),200*(b-d),a.opacity)}function Lb(c,d,a,b){this.l=+c,this.a=+d,this.b=+a,this.opacity=+b}function Mb(a){return a>$e?kc(a,1/3):a/Ze+Xe}function Nb(a){return a>Ye?a*a*a:Ze*(a-Xe)}function Ob(a){return 255*(.0031308>=a?12.92*a:1.055*kc(a,1/2.4)-.055)}function Pb(a){return .04045>=(a/=255)?a/12.92:kc((a+.055)/1.055,2.4)}function Qb(a){if(a instanceof Rb)return new Rb(a.h,a.c,a.l,a.opacity);if(a instanceof Lb||(a=Kb(a)),0===a.a&&0===a.b)return new Rb(NaN,0<a.l&&100>a.l?0:NaN,a.l,a.opacity);var b=jc(a.b,a.a)*Te;return new Rb(0>b?b+360:b,ic(a.a*a.a+a.b*a.b),a.l,a.opacity)}function Rb(a,b,c,d){this.h=+a,this.c=+b,this.l=+c,this.opacity=+d}function Sb(a){if(isNaN(a.h))return new Lb(a.l,0,0,a.opacity);var b=a.h*Se;return new Lb(a.l,hc(b)*a.c,gc(b)*a.c,a.opacity)}function Tb(a){if(a instanceof Ub)return new Ub(a.h,a.s,a.l,a.opacity);a instanceof yb||(a=wb(a));var c=a.r/255,d=a.g/255,e=a.b/255,b=(gf*e+ef*c-ff*d)/(gf+ef-ff),f=e-b,g=(df*(d-b)-bf*f)/cf,i=ic(g*g+f*f)/(df*b*(1-b)),j=i?jc(g,f)*Te-120:NaN;return new Ub(0>j?j+360:j,i,b,a.opacity)}function Ub(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function Vb(b,a){return function(c){return b+c*a}}function Wb(c,d,e){return c=kc(c,e),d=kc(d,e)-c,e=1/e,function(a){return kc(c+a*d,e)}}function Xb(c){return 1==(c=+c)?Yb:function(d,a){return a-d?Wb(d,a,c):hf(isNaN(d)?a:d)}}function Yb(c,a){var b=a-c;return b?Vb(c,b):hf(isNaN(c)?a:c)}function Zb(a){return Uf||(Uf=new Sf(a)),Uf}var oc="undefined"!=typeof window&&null!=window.customElements&&window.customElements.polyfillWrapFlushCallback!==void 0,pc=function(a,b){for(var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;b!==c;){var e=b.nextSibling;a.insertBefore(b,d),b=e}},qc=function(a,b){for(var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;b!==c;){var d=b.nextSibling;a.removeChild(b),b=d}},rc="{{lit-".concat((Math.random()+"").slice(2),"}}"),sc="<!--".concat(rc,"-->"),tc=new RegExp("".concat(rc,"|").concat(sc)),uc="$lit$";class vc{constructor(a,b){this.parts=[],this.element=b;for(var c,d=[],e=[],f=document.createTreeWalker(b.content,133,null,!1),g=0,h=-1,j=0,{strings:k,values:{length:l}}=a;j<l;){if(c=f.nextNode(),null===c){f.currentNode=e.pop();continue}if(h++,1===c.nodeType){if(c.hasAttributes()){for(var m=c.attributes,{length:n}=m,o=0,p=0;p<n;p++)wc(m[p].name,uc)&&o++;for(;0<o--;){var q=k[j],r=zc.exec(q)[2],t=r.toLowerCase()+uc,u=c.getAttribute(t);c.removeAttribute(t);var B=u.split(tc);this.parts.push({type:"attribute",index:h,name:r,strings:B}),j+=B.length-1}}"TEMPLATE"===c.tagName&&(e.push(c),f.currentNode=c.content)}else if(3===c.nodeType){var C=c.data;if(0<=C.indexOf(rc)){for(var v=c.parentNode,w=C.split(tc),x=w.length-1,y=0;y<x;y++){var z=void 0,A=w[y];if(""===A)z=yc();else{var D=zc.exec(A);null!==D&&wc(D[2],uc)&&(A=A.slice(0,D.index)+D[1]+D[2].slice(0,-uc.length)+D[3]),z=document.createTextNode(A)}v.insertBefore(z,c),this.parts.push({type:"node",index:++h})}""===w[x]?(v.insertBefore(yc(),c),d.push(c)):c.data=w[x],j+=x}}else if(8===c.nodeType)if(c.data===rc){var E=c.parentNode;(null===c.previousSibling||h===g)&&(h++,E.insertBefore(yc(),c)),g=h,this.parts.push({type:"node",index:h}),null===c.nextSibling?c.data="":(d.push(c),h--),j++}else for(var F=-1;-1!==(F=c.data.indexOf(rc,F+1));)this.parts.push({type:"node",index:-1}),j++}for(var G of d)G.parentNode.removeChild(G)}}var wc=(a,b)=>{var c=a.length-b.length;return 0<=c&&a.slice(c)===b},xc=a=>-1!==a.index,yc=()=>document.createComment(""),zc=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,Ac=a=>{for(var b=11===a.nodeType?0:1,c=document.createTreeWalker(a,133,null,!1);c.nextNode();)b++;return b},Bc=function(a){for(var b,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,d=c+1;d<a.length;d++)if(b=a[d],xc(b))return d;return-1},Cc=new WeakMap,Dc=a=>"function"==typeof a&&Cc.has(a),Ec={},Fc={};class Gc{constructor(a,b,c){this.__parts=[],this.template=a,this.processor=b,this.options=c}update(a){var b=0;for(var c of this.__parts)void 0!==c&&c.setValue(a[b]),b++;for(var d of this.__parts)void 0!==d&&d.commit()}_clone(){for(var a,b=oc?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),c=[],d=this.template.parts,e=document.createTreeWalker(b,133,null,!1),f=0,g=0,h=e.nextNode();f<d.length;){if(a=d[f],!xc(a)){this.__parts.push(void 0),f++;continue}for(;g<a.index;)g++,"TEMPLATE"===h.nodeName&&(c.push(h),e.currentNode=h.content),null===(h=e.nextNode())&&(e.currentNode=c.pop(),h=e.nextNode());if("node"===a.type){var j=this.processor.handleTextExpression(this.options);j.insertAfterNode(h.previousSibling),this.__parts.push(j)}else{var i;(i=this.__parts).push.apply(i,Da(this.processor.handleAttributeExpressions(h,a.name,a.strings,this.options)))}f++}return oc&&(document.adoptNode(b),customElements.upgrade(b)),b}}var Hc=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:a=>a}),Ic=" ".concat(rc," ");class Jc{constructor(a,b,c,d){this.strings=a,this.values=b,this.type=c,this.processor=d}getHTML(){for(var a=this.strings.length-1,b="",c=!1,d=0;d<a;d++){var e=this.strings[d],f=e.lastIndexOf("<!--");c=(-1<f||c)&&-1===e.indexOf("-->",f+1);var g=zc.exec(e);b+=null===g?e+(c?Ic:sc):e.substr(0,g.index)+g[1]+g[2]+uc+g[3]+rc}return b+=this.strings[a],b}getTemplateElement(){var a=document.createElement("template"),b=this.getHTML();return void 0!==Hc&&(b=Hc.createHTML(b)),a.innerHTML=b,a}}class Kc extends Jc{getHTML(){return"<svg>".concat(super.getHTML(),"</svg>")}getTemplateElement(){var a=super.getTemplateElement(),b=a.content,c=b.firstChild;return b.removeChild(c),pc(b,c.firstChild),a}}var Lc=a=>null===a||"object"!=typeof a&&"function"!=typeof a,Mc=a=>Array.isArray(a)||!!(a&&a[Symbol.iterator]);class Nc{constructor(a,b,c){this.dirty=!0,this.element=a,this.name=b,this.strings=c,this.parts=[];for(var d=0;d<c.length-1;d++)this.parts[d]=this._createPart()}_createPart(){return new Oc(this)}_getValue(){var a=this.strings,b=a.length-1,c=this.parts;if(1===b&&""===a[0]&&""===a[1]){var f=c[0].value;if("symbol"==typeof f)return f+"";if("string"==typeof f||!Mc(f))return f}for(var d="",e=0;e<b;e++){d+=a[e];var g=c[e];if(void 0!==g){var h=g.value;if(Lc(h)||!Mc(h))d+="string"==typeof h?h:h+"";else for(var j of h)d+="string"==typeof j?j:j+""}}return d+=a[b],d}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class Oc{constructor(a){this.value=void 0,this.committer=a}setValue(a){a===Ec||Lc(a)&&a===this.value||(this.value=a,!Dc(a)&&(this.committer.dirty=!0))}commit(){for(;Dc(this.value);){var a=this.value;this.value=Ec,a(this)}this.value===Ec||this.committer.commit()}}class Pc{constructor(a){this.value=void 0,this.__pendingValue=void 0,this.options=a}appendInto(a){this.startNode=a.appendChild(yc()),this.endNode=a.appendChild(yc())}insertAfterNode(a){this.startNode=a,this.endNode=a.nextSibling}appendIntoPart(a){a.__insert(this.startNode=yc()),a.__insert(this.endNode=yc())}insertAfterPart(a){a.__insert(this.startNode=yc()),this.endNode=a.endNode,a.endNode=this.startNode}setValue(a){this.__pendingValue=a}commit(){if(null!==this.startNode.parentNode){for(;Dc(this.__pendingValue);){var b=this.__pendingValue;this.__pendingValue=Ec,b(this)}var a=this.__pendingValue;a===Ec||(Lc(a)?a!==this.value&&this.__commitText(a):a instanceof Jc?this.__commitTemplateResult(a):a instanceof Node?this.__commitNode(a):Mc(a)?this.__commitIterable(a):a===Fc?(this.value=Fc,this.clear()):this.__commitText(a))}}__insert(a){this.endNode.parentNode.insertBefore(a,this.endNode)}__commitNode(a){this.value===a||(this.clear(),this.__insert(a),this.value=a)}__commitText(a){var b=this.startNode.nextSibling;a=null==a?"":a;var c="string"==typeof a?a:a+"";b===this.endNode.previousSibling&&3===b.nodeType?b.data=c:this.__commitNode(document.createTextNode(c)),this.value=a}__commitTemplateResult(a){var b=this.options.templateFactory(a);if(this.value instanceof Gc&&this.value.template===b)this.value.update(a.values);else{var c=new Gc(b,a.processor,this.options),d=c._clone();c.update(a.values),this.__commitNode(d),this.value=c}}__commitIterable(a){Array.isArray(this.value)||(this.value=[],this.clear());var b,c=this.value,d=0;for(var e of a)b=c[d],void 0===b&&(b=new Pc(this.options),c.push(b),0===d?b.appendIntoPart(this):b.insertAfterPart(c[d-1])),b.setValue(e),b.commit(),d++;d<c.length&&(c.length=d,this.clear(b&&b.endNode))}clear(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.startNode;qc(this.startNode.parentNode,a.nextSibling,this.endNode)}}class Qc{constructor(a,b,c){if(this.value=void 0,this.__pendingValue=void 0,2!==c.length||""!==c[0]||""!==c[1])throw new Error("Boolean attributes can only contain a single expression");this.element=a,this.name=b,this.strings=c}setValue(a){this.__pendingValue=a}commit(){for(;Dc(this.__pendingValue);){var b=this.__pendingValue;this.__pendingValue=Ec,b(this)}if(this.__pendingValue!==Ec){var a=!!this.__pendingValue;this.value!==a&&(a?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=a),this.__pendingValue=Ec}}}class Rc extends Nc{constructor(a,b,c){super(a,b,c),this.single=2===c.length&&""===c[0]&&""===c[1]}_createPart(){return new Sc(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class Sc extends Oc{}var Tc=!1;(()=>{try{var a={get capture(){return Tc=!0,!1}};window.addEventListener("test",a,a),window.removeEventListener("test",a,a)}catch(a){}})();class Uc{constructor(a,b,c){this.value=void 0,this.__pendingValue=void 0,this.element=a,this.eventName=b,this.eventContext=c,this.__boundHandleEvent=a=>this.handleEvent(a)}setValue(a){this.__pendingValue=a}commit(){for(;Dc(this.__pendingValue);){var d=this.__pendingValue;this.__pendingValue=Ec,d(this)}if(this.__pendingValue!==Ec){var a=this.__pendingValue,b=this.value,c=null==a||null!=b&&(a.capture!==b.capture||a.once!==b.once||a.passive!==b.passive);c&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),null!=a&&(null==b||c)&&(this.__options=Vc(a),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=a,this.__pendingValue=Ec}}handleEvent(a){"function"==typeof this.value?this.value.call(this.eventContext||this.element,a):this.value.handleEvent(a)}}var Vc=a=>a&&(Tc?{capture:a.capture,passive:a.passive,once:a.once}:a.capture),Wc=new Map,Xc=new WeakMap,Yc=(a,b,c)=>{var d=Xc.get(b);d===void 0&&(qc(b,b.firstChild),Xc.set(b,d=new Pc(Object.assign({templateFactory:ya},c))),d.appendInto(b)),d.setValue(a),d.commit()};var Zc=new class a{handleAttributeExpressions(a,b,c,d){var e=b[0];if("."===e){var g=new Rc(a,b.slice(1),c);return g.parts}if("@"===e)return[new Uc(a,b.slice(1),d.eventContext)];if("?"===e)return[new Qc(a,b.slice(1),c)];var f=new Nc(a,b,c);return f.parts}handleTextExpression(a){return new Pc(a)}};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");var $c=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return new Jc(a,c,"html",Zc)},_c=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return new Kc(a,c,"svg",Zc)},ad=(a,b)=>"".concat(a,"--").concat(b),bd=!0;"undefined"==typeof window.ShadyCSS?bd=!1:"undefined"==typeof window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),bd=!1);var cd,dd=a=>b=>{var c=ad(b.type,a),d=Wc.get(c);void 0===d&&(d={stringsArray:new WeakMap,keyString:new Map},Wc.set(c,d));var e=d.stringsArray.get(b.strings);if(void 0!==e)return e;var f=b.strings.join(rc);if(e=d.keyString.get(f),void 0===e){var g=b.getTemplateElement();bd&&window.ShadyCSS.prepareTemplateDom(g,a),e=new vc(b,g),d.keyString.set(f,e)}return d.stringsArray.set(b.strings,e),e},ed=["html","svg"],fd=a=>{ed.forEach(b=>{var c=Wc.get(ad(b,a));c!==void 0&&c.keyString.forEach(a=>{var{element:{content:b}}=a,c=new Set;Array.from(b.querySelectorAll("style")).forEach(a=>{c.add(a)}),i(a,c)})})},gd=new Set,hd=(a,b,c)=>{gd.add(a);var d=!c?document.createElement("template"):c.element,e=b.querySelectorAll("style"),{length:f}=e;if(0===f)return void window.ShadyCSS.prepareTemplateStyles(d,a);for(var g,h=document.createElement("style"),j=0;j<f;j++)g=e[j],g.parentNode.removeChild(g),h.textContent+=g.textContent;fd(a);var k=d.content;!c?k.insertBefore(h,k.firstChild):wa(c,h,k.firstChild),window.ShadyCSS.prepareTemplateStyles(d,a);var l=k.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==l)b.insertBefore(l.cloneNode(!0),b.firstChild);else if(!!c){k.insertBefore(h,k.firstChild);var m=new Set;m.add(h),i(c,m)}},id=(a,b,c)=>{if(!c||"object"!=typeof c||!c.scopeName)throw new Error("The `scopeName` option is required.");var d=c.scopeName,e=Xc.has(b),f=bd&&11===b.nodeType&&!!b.host,g=f&&!gd.has(d),h=g?document.createDocumentFragment():b;if(Yc(a,h,Object.assign({templateFactory:dd(d)},c)),g){var i=Xc.get(h);Xc.delete(h);var j=i.value instanceof Gc?i.value.template:void 0;hd(d,h,j),qc(b,b.firstChild),b.appendChild(h),Xc.set(b,i)}!e&&f&&window.ShadyCSS.styleElement(b.host)};window.JSCompiler_renameProperty=a=>a;var jd={toAttribute(a,b){return b===Boolean?a?"":null:b===Object||b===Array?null==a?a:JSON.stringify(a):a},fromAttribute(a,b){return b===Boolean?null!==a:b===Number?null===a?null:+a:b===Object||b===Array?JSON.parse(a):a}},kd=(a,b)=>b!==a&&(b===b||a===a),ld={attribute:!0,type:String,converter:jd,reflect:!1,hasChanged:kd},md=1,nd=4,od=8,pd=16,qd="finalized";class rd extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();var a=[];return this._classProperties.forEach((b,c)=>{var d=this._attributeNameForProperty(c,b);void 0!==d&&(this._attributeToPropertyMap.set(d,c),a.push(d))}),a}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;var a=Object.getPrototypeOf(this)._classProperties;a!==void 0&&a.forEach((a,b)=>this._classProperties.set(b,a))}}static createProperty(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ld;if(this._ensureClassProperties(),this._classProperties.set(a,b),!(b.noAccessor||this.prototype.hasOwnProperty(a))){var c="symbol"==typeof a?Symbol():"__".concat(a),d=this.getPropertyDescriptor(a,c,b);void 0!==d&&Object.defineProperty(this.prototype,a,d)}}static getPropertyDescriptor(a,b,c){return{get(){return this[b]},set(d){var e=this[a];this[b]=d,this.requestUpdateInternal(a,e,c)},configurable:!0,enumerable:!0}}static getPropertyOptions(a){return this._classProperties&&this._classProperties.get(a)||ld}static finalize(){var a=Object.getPrototypeOf(this);if(a.hasOwnProperty(qd)||a.finalize(),this[qd]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){var b=this.properties,c=[].concat(Da(Object.getOwnPropertyNames(b)),Da("function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(b):[]));for(var d of c)this.createProperty(d,b[d])}}static _attributeNameForProperty(a,b){var c=b.attribute;return!1===c?void 0:"string"==typeof c?c:"string"==typeof a?a.toLowerCase():void 0}static _valueHasChanged(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:kd;return c(a,b)}static _propertyValueFromAttribute(a,b){var c=b.type,d=b.converter||jd,e="function"==typeof d?d:d.fromAttribute;return e?e(a,c):a}static _propertyValueToAttribute(a,b){if(void 0!==b.reflect){var c=b.type,d=b.converter,e=d&&d.toAttribute||jd.toAttribute;return e(a,c)}}initialize(){this._updateState=0,this._updatePromise=new Promise(a=>this._enableUpdatingResolver=a),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((a,b)=>{if(this.hasOwnProperty(b)){var c=this[b];delete this[b],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(b,c)}})}_applyInstanceProperties(){this._instanceProperties.forEach((a,b)=>this[b]=a),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(a,b,c){b!==c&&this._attributeToProperty(a,c)}_propertyToAttribute(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:ld,d=this.constructor,e=d._attributeNameForProperty(a,c);if(e!==void 0){var f=d._propertyValueToAttribute(b,c);if(f===void 0)return;this._updateState|=od,null==f?this.removeAttribute(e):this.setAttribute(e,f),this._updateState&=~od}}_attributeToProperty(a,b){if(!(this._updateState&od)){var c=this.constructor,d=c._attributeToPropertyMap.get(a);if(void 0!==d){var e=c.getPropertyOptions(d);this._updateState|=pd,this[d]=c._propertyValueFromAttribute(b,e),this._updateState&=~pd}}}requestUpdateInternal(a,b,c){var d=!0;if(a!==void 0){var e=this.constructor;c=c||e.getPropertyOptions(a),e._valueHasChanged(this[a],b,c.hasChanged)?(!this._changedProperties.has(a)&&this._changedProperties.set(a,b),!0===c.reflect&&!(this._updateState&pd)&&(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(a,c))):d=!1}!this._hasRequestedUpdate&&d&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(a,b){return this.requestUpdateInternal(a,b),this.updateComplete}_enqueueUpdate(){var a=this;return Ca(function*(){a._updateState|=nd;try{yield a._updatePromise}catch(a){}var b=a.performUpdate();return null!=b&&(yield b),!a._hasRequestedUpdate})()}get _hasRequestedUpdate(){return this._updateState&nd}get hasUpdated(){return this._updateState&md}performUpdate(){if(this._hasRequestedUpdate){this._instanceProperties&&this._applyInstanceProperties();var a=!1,b=this._changedProperties;try{a=this.shouldUpdate(b),a?this.update(b):this._markUpdated()}catch(b){throw a=!1,this._markUpdated(),b}a&&(!(this._updateState&md)&&(this._updateState|=md,this.firstUpdated(b)),this.updated(b))}}_markUpdated(){this._changedProperties=new Map,this._updateState&=~nd}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(){return!0}update(){this._reflectingProperties!==void 0&&0<this._reflectingProperties.size&&(this._reflectingProperties.forEach((a,b)=>this._propertyToAttribute(b,this[b],a)),this._reflectingProperties=void 0),this._markUpdated()}updated(){}firstUpdated(){}}cd=qd,rd[cd]=!0;var sd=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,td=Symbol();class ud{constructor(a,b){if(b!==td)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=a}get styleSheet(){return void 0===this._styleSheet&&(sd?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}var vd=a=>new ud(a+"",td),wd=a=>{if(a instanceof ud)return a.cssText;if("number"==typeof a)return a;throw new Error("Value passed to 'css' function must be a 'css' function result: ".concat(a,". Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security."))},xd=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=c.reduce((b,c,d)=>b+wd(c)+a[d+1],a[0]);return new ud(e,td)};(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");var yd={};class zd extends rd{static getStyles(){return this.styles}static _getUniqueStyles(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_styles",this))){var a=this.getStyles();if(Array.isArray(a)){var b=(a,c)=>a.reduceRight((a,c)=>Array.isArray(c)?b(c,a):(a.add(c),a),c),c=b(a,new Set),d=[];c.forEach(a=>d.unshift(a)),this._styles=d}else this._styles=void 0===a?[]:[a];this._styles=this._styles.map(a=>{if(a instanceof CSSStyleSheet&&!sd){var b=Array.prototype.slice.call(a.cssRules).reduce((a,b)=>a+b.cssText,"");return vd(b)}return a})}}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){var a=this.constructor._styles;0===a.length||(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?sd?this.renderRoot.adoptedStyleSheets=a.map(a=>a instanceof CSSStyleSheet?a:a.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(a.map(a=>a.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(a){var b=this.render();super.update(a),b!==yd&&this.constructor.render(b,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(a=>{var b=document.createElement("style");b.textContent=a.cssText,this.renderRoot.appendChild(b)}))}render(){return yd}}zd.finalized=!0,zd.render=id;var Ad=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(a){}}();"undefined"==typeof Promise&&require("lie/polyfill");var Bd,Cd=Promise,Dd={},Ed=Object.prototype.toString,Fd={_driver:"asyncStorage",_initStorage:function(a){function b(){return Cd.resolve()}var c=this,d={db:null};if(a)for(var e in a)d[e]=a[e];var f=Dd[d.name];f||(f=Xa(),Dd[d.name]=f),f.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=Ua);for(var g,h=[],i=0;i<f.forages.length;i++)g=f.forages[i],g!==c&&h.push(g._initReady().catch(b));var l=f.forages.slice(0);return Cd.all(h).then(function(){return d.db=f.db,Oa(d)}).then(function(a){return d.db=a,Qa(d,c._defaultConfig.version)?Pa(d):a}).then(function(a){d.db=f.db=a,c._dbInfo=d;for(var b,e=0;e<l.length;e++)b=l[e],b!==c&&(b._dbInfo.db=d.db,b._dbInfo.version=d.version)})},_support:function(){try{if(!Ad||!Ad.open)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(a){return!1}}(),iterate:function(a,b){var c=this,d=new Cd(function(b,d){c.ready().then(function(){Wa(c._dbInfo,"readonly",function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.openCursor(),i=1;h.onsuccess=function(){var c=h.result;if(c){var d=c.value;Ta(d)&&(d=Sa(d));var e=a(d,c.key,i++);void 0===e?c.continue():b(e)}else b()},h.onerror=function(){d(h.error)}}catch(a){d(a)}})}).catch(d)});return Ba(d,b),d},getItem:function(a,b){var c=this;a=Fa(a);var d=new Cd(function(b,d){c.ready().then(function(){Wa(c._dbInfo,"readonly",function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.get(a);h.onsuccess=function(){var a=h.result;void 0===a&&(a=null),Ta(a)&&(a=Sa(a)),b(a)},h.onerror=function(){d(h.error)}}catch(a){d(a)}})}).catch(d)});return Ba(d,b),d},setItem:function(a,b,c){var d=this;a=Fa(a);var e=new Cd(function(c,f){var g;d.ready().then(function(){return g=d._dbInfo,"[object Blob]"===Ed.call(b)?Ja(g.db).then(function(a){return a?b:Ra(b)}):b}).then(function(b){Wa(d._dbInfo,"readwrite",function(e,g){if(e)return f(e);try{var h=g.objectStore(d._dbInfo.storeName);null===b&&(b=void 0);var i=h.put(b,a);g.oncomplete=function(){void 0===b&&(b=null),c(b)},g.onabort=g.onerror=function(){var a=i.error?i.error:i.transaction.error;f(a)}}catch(a){f(a)}})}).catch(f)});return Ba(e,c),e},removeItem:function(a,b){var c=this;a=Fa(a);var d=new Cd(function(b,d){c.ready().then(function(){Wa(c._dbInfo,"readwrite",function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.delete(a);f.oncomplete=function(){b()},f.onerror=function(){d(h.error)},f.onabort=function(){var a=h.error?h.error:h.transaction.error;d(a)}}catch(a){d(a)}})}).catch(d)});return Ba(d,b),d},clear:function(a){var b=this,c=new Cd(function(a,c){b.ready().then(function(){Wa(b._dbInfo,"readwrite",function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.clear();e.oncomplete=function(){a()},e.onabort=e.onerror=function(){var a=g.error?g.error:g.transaction.error;c(a)}}catch(a){c(a)}})}).catch(c)});return Ba(c,a),c},length:function(a){var b=this,c=new Cd(function(a,c){b.ready().then(function(){Wa(b._dbInfo,"readonly",function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.count();g.onsuccess=function(){a(g.result)},g.onerror=function(){c(g.error)}}catch(a){c(a)}})}).catch(c)});return Ba(c,a),c},key:function(a,b){var c=this,d=new Cd(function(b,d){return 0>a?void b(null):void c.ready().then(function(){Wa(c._dbInfo,"readonly",function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=!1,i=g.openKeyCursor();i.onsuccess=function(){var c=i.result;return c?void(0===a?b(c.key):h?b(c.key):(h=!0,c.advance(a))):void b(null)},i.onerror=function(){d(i.error)}}catch(a){d(a)}})}).catch(d)});return Ba(d,b),d},keys:function(a){var b=this,c=new Cd(function(a,c){b.ready().then(function(){Wa(b._dbInfo,"readonly",function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.openKeyCursor(),h=[];g.onsuccess=function(){var b=g.result;return b?void(h.push(b.key),b.continue()):void a(h)},g.onerror=function(){c(g.error)}}catch(a){c(a)}})}).catch(c)});return Ba(c,a),c},dropInstance:function(a,b){b=Ga.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{},a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;if(!a.name)d=Cd.reject("Invalid arguments");else{var f=a.name===c.name&&e._dbInfo.db,g=f?Cd.resolve(e._dbInfo.db):Oa(a).then(b=>{var c=Dd[a.name],d=c.forages;c.db=b;for(var e=0;e<d.length;e++)d[e]._dbInfo.db=b;return b});d=a.storeName?g.then(b=>{if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;Ka(a);var d=Dd[a.name],e=d.forages;b.close();for(var g,h=0;h<e.length;h++)g=e[h],g._dbInfo.db=null,g._dbInfo.version=c;var f=new Cd((b,d)=>{var e=Ad.open(a.name,c);e.onerror=a=>{var b=e.result;b.close(),d(a)},e.onupgradeneeded=()=>{var b=e.result;b.deleteObjectStore(a.storeName)},e.onsuccess=()=>{var a=e.result;a.close(),b(a)}});return f.then(a=>{d.db=a;for(var b,c=0;c<e.length;c++)b=e[c],b._dbInfo.db=a,La(b._dbInfo)}).catch(b=>{throw(Ma(a,b)||Cd.resolve()).catch(()=>{}),b})}}):g.then(b=>{Ka(a);var c=Dd[a.name],d=c.forages;b.close();for(var e,f=0;f<d.length;f++)e=d[f],e._dbInfo.db=null;var g=new Cd((b,c)=>{var d=Ad.deleteDatabase(a.name);d.onerror=d.onblocked=a=>{var b=d.result;b&&b.close(),c(a)},d.onsuccess=()=>{var a=d.result;a&&a.close(),b(a)}});return g.then(a=>{c.db=a;for(var b,e=0;e<d.length;e++)b=d[e],La(b._dbInfo)}).catch(b=>{throw(Ma(a,b)||Cd.resolve()).catch(()=>{}),b})})}return Ba(d,b),d}},Gd=/^~~local_forage_type~([^~]+)~/,Hd="__lfsc__:".length,Id=Hd+"arbf".length,Jd=Object.prototype.toString,Kd={serialize:function(a,b){var c="";if(a&&(c=Jd.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===Jd.call(a.buffer))){var d,e="__lfsc__:";a instanceof ArrayBuffer?(d=a,e+="arbf"):(d=a.buffer,"[object Int8Array]"===c?e+="si08":"[object Uint8Array]"===c?e+="ui08":"[object Uint8ClampedArray]"===c?e+="uic8":"[object Int16Array]"===c?e+="si16":"[object Uint16Array]"===c?e+="ur16":"[object Int32Array]"===c?e+="si32":"[object Uint32Array]"===c?e+="ui32":"[object Float32Array]"===c?e+="fl32":"[object Float64Array]"===c?e+="fl64":b(new Error("Failed to get type for BinaryArray"))),b(e+Za(d))}else if("[object Blob]"===c){var f=new FileReader;f.onload=function(){var c="~~local_forage_type~"+a.type+"~"+Za(this.result);b("__lfsc__:blob"+c)},f.readAsArrayBuffer(a)}else try{b(JSON.stringify(a))}catch(c){console.error("Couldn't convert value into a JSON string: ",a),b(null,c)}},deserialize:function(a){if(a.substring(0,Hd)!=="__lfsc__:")return JSON.parse(a);var b,c=a.substring(Id),d=a.substring(Hd,Id);if(d==="blob"&&Gd.test(c)){var e=c.match(Gd);b=e[1],c=c.substring(e[0].length)}var f=Ya(c);switch(d){case"arbf":return f;case"blob":return Aa([f],{type:b});case"si08":return new Int8Array(f);case"ui08":return new Uint8Array(f);case"uic8":return new Uint8ClampedArray(f);case"si16":return new Int16Array(f);case"ur16":return new Uint16Array(f);case"si32":return new Int32Array(f);case"ui32":return new Uint32Array(f);case"fl32":return new Float32Array(f);case"fl64":return new Float64Array(f);default:throw new Error("Unkown type: "+d);}},stringToBuffer:Ya,bufferToString:Za},Ld={_driver:"webSQLStorage",_initStorage:function(a){var b=this,c={db:null};if(a)for(var d in a)c[d]="string"==typeof a[d]?a[d]:a[d].toString();var e=new Cd(function(a,d){try{c.db=openDatabase(c.name,c.version+"",c.description,c.size)}catch(a){return d(a)}c.db.transaction(function(e){$a(e,c,function(){b._dbInfo=c,a()},function(a,b){d(b)})},d)});return c.serializer=Kd,e},_support:function(){return"function"==typeof openDatabase}(),iterate:function(a,b){var c=this,d=new Cd(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){ab(c,e,"SELECT * FROM ".concat(e.storeName),[],function(c,d){for(var f=d.rows,g=f.length,h=0;h<g;h++){var j=f.item(h),k=j.value;if(k&&(k=e.serializer.deserialize(k)),k=a(k,j.key,h+1),void 0!==k)return void b(k)}b()},function(a,b){d(b)})})}).catch(d)});return Ba(d,b),d},getItem:function(a,b){var c=this;a=Fa(a);var d=new Cd(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){ab(c,e,"SELECT * FROM ".concat(e.storeName," WHERE key = ? LIMIT 1"),[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:null;d&&(d=e.serializer.deserialize(d)),b(d)},function(a,b){d(b)})})}).catch(d)});return Ba(d,b),d},setItem:function(a,b,c){return bb.apply(this,[a,b,c,1])},removeItem:function(a,b){var c=this;a=Fa(a);var d=new Cd(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){ab(c,e,"DELETE FROM ".concat(e.storeName," WHERE key = ?"),[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return Ba(d,b),d},clear:function(a){var b=this,c=new Cd(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){ab(b,d,"DELETE FROM ".concat(d.storeName),[],function(){a()},function(a,b){c(b)})})}).catch(c)});return Ba(c,a),c},length:function(a){var b=this,c=new Cd(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){ab(b,d,"SELECT COUNT(key) as c FROM ".concat(d.storeName),[],function(b,c){var d=c.rows.item(0).c;a(d)},function(a,b){c(b)})})}).catch(c)});return Ba(c,a),c},key:function(a,b){var c=this,d=new Cd(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){ab(c,e,"SELECT key FROM ".concat(e.storeName," WHERE id = ? LIMIT 1"),[a+1],function(a,c){var d=c.rows.length?c.rows.item(0).key:null;b(d)},function(a,b){d(b)})})}).catch(d)});return Ba(d,b),d},keys:function(a){var b=this,c=new Cd(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){ab(b,d,"SELECT key FROM ".concat(d.storeName),[],function(b,c){for(var d=[],e=0;e<c.rows.length;e++)d.push(c.rows.item(e).key);a(d)},function(a,b){c(b)})})}).catch(c)});return Ba(c,a),c},dropInstance:function(a,b){b=Ga.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{},a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?new Cd(function(b){var d;d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0),a.storeName?b({db:d,storeNames:[a.storeName]}):b(cb(d))}).then(function(a){return new Cd(function(b,c){a.db.transaction(function(d){function e(a){return new Cd(function(b,c){d.executeSql("DROP TABLE IF EXISTS ".concat(a),[],function(){b()},function(a,b){c(b)})})}for(var f=[],g=0,h=a.storeNames.length;g<h;g++)f.push(e(a.storeNames[g]));Cd.all(f).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):Cd.reject("Invalid arguments"),Ba(d,b),d}},Md={_driver:"localStorageWrapper",_initStorage:function(a){var b=this,c={};if(a)for(var d in a)c[d]=a[d];return(c.keyPrefix=eb(a,b._defaultConfig),!gb())?Cd.reject():(b._dbInfo=c,c.serializer=Kd,Cd.resolve())},_support:db(),iterate:function(a,b){var c=this,d=c.ready().then(function(){for(var b,d=c._dbInfo,e=d.keyPrefix,f=e.length,g=localStorage.length,h=1,j=0;j<g;j++)if(b=localStorage.key(j),0===b.indexOf(e)){var k=localStorage.getItem(b);if(k&&(k=d.serializer.deserialize(k)),k=a(k,b.substring(f),h++),void 0!==k)return k}});return Ba(d,b),d},getItem:function(a,b){var c=this;a=Fa(a);var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return Ba(d,b),d},setItem:function(a,b,c){var d=this;a=Fa(a);var e=d.ready().then(function(){void 0===b&&(b=null);var c=b;return new Cd(function(e,f){var g=d._dbInfo;g.serializer.serialize(b,function(b,d){if(d)f(d);else try{localStorage.setItem(g.keyPrefix+a,b),e(c)}catch(a){("QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&f(a),f(a)}})})});return Ba(e,c),e},removeItem:function(a,b){var c=this;a=Fa(a);var d=c.ready().then(function(){var b=c._dbInfo;localStorage.removeItem(b.keyPrefix+a)});return Ba(d,b),d},clear:function(a){var b=this,c=b.ready().then(function(){for(var a,c=b._dbInfo.keyPrefix,d=localStorage.length-1;0<=d;d--)a=localStorage.key(d),0===a.indexOf(c)&&localStorage.removeItem(a)});return Ba(c,a),c},length:function(a){var b=this,c=b.keys().then(function(a){return a.length});return Ba(c,a),c},key:function(a,b){var c=this,d=c.ready().then(function(){var b,d=c._dbInfo;try{b=localStorage.key(a)}catch(a){b=null}return b&&(b=b.substring(d.keyPrefix.length)),b});return Ba(d,b),d},keys:function(a){var b=this,c=b.ready().then(function(){for(var a,c=b._dbInfo,d=localStorage.length,e=[],f=0;f<d;f++)a=localStorage.key(f),0===a.indexOf(c.keyPrefix)&&e.push(a.substring(c.keyPrefix.length));return e});return Ba(c,a),c},dropInstance:function(a,b){if(b=Ga.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name,a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?new Cd(function(b){a.storeName?b(eb(a,e._defaultConfig)):b("".concat(a.name,"/"))}).then(function(a){for(var b,c=localStorage.length-1;0<=c;c--)b=localStorage.key(c),0===b.indexOf(a)&&localStorage.removeItem(b)}):Cd.reject("Invalid arguments"),Ba(d,b),d}},Nd=(a,b)=>a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b),Od=(a,b)=>{for(var c=a.length,d=0;d<c;){if(Nd(a[d],b))return!0;d++}return!1},Pd=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},Qd={},Rd={},Sd={INDEXEDDB:Fd,WEBSQL:Ld,LOCALSTORAGE:Md},Td=[Sd.INDEXEDDB._driver,Sd.WEBSQL._driver,Sd.LOCALSTORAGE._driver],Ud=["dropInstance"],Vd=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ud),Wd={description:"",driver:Td.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};class Xd{constructor(a){for(var d in Sd)if(Sd.hasOwnProperty(d)){var b=Sd[d],c=b._driver;this[d]=c,Qd[c]||this.defineDriver(b)}this._defaultConfig=ib({},Wd),this._config=ib({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(()=>{})}config(a){if("object"==typeof a){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"==b&&(a[b]=a[b].replace(/\W/g,"_")),"version"==b&&"number"!=typeof a[b])return new Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config}defineDriver(a,b,c){var d=new Cd(function(b,c){try{var d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var f=Vd.concat("_initStorage"),g=0,h=f.length;g<h;g++){var j=f[g],k=!Od(Ud,j);if((k||a[j])&&"function"!=typeof a[j])return void c(e)}(function configureMissingMethods(){for(var b,c=function(a){return function(){var b=new Error("Method ".concat(a," is not implemented by the current driver")),c=Cd.reject(b);return Ba(c,arguments[arguments.length-1]),c}},d=0,e=Ud.length;d<e;d++)b=Ud[d],a[b]||(a[b]=c(b))})();var l=function(c){Qd[d]&&console.info("Redefining LocalForage driver: ".concat(d)),Qd[d]=a,Rd[d]=c,b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(l,c):l(!!a._support):l(!0)}catch(a){c(a)}});return Ea(d,b,c),d}driver(){return this._driver||null}getDriver(a,b,c){var d=Qd[a]?Cd.resolve(Qd[a]):Cd.reject(new Error("Driver not found."));return Ea(d,b,c),d}getSerializer(a){var b=Cd.resolve(Kd);return Ea(b,a),b}ready(a){var b=this,c=b._driverSet.then(()=>(null===b._ready&&(b._ready=b._initDriver()),b._ready));return Ea(c,a,a),c}setDriver(a,b,c){function d(){g._config.driver=g.driver()}function e(a){return g._extend(a),d(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var h=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(h).then(e).catch(b)}d();var f=new Error("No available storage method found.");return g._driverSet=Cd.reject(f),g._driverSet}var c=0;return b()}}var g=this;Pd(a)||(a=[a]);var h=this._getSupportedDrivers(a),i=null===this._driverSet?Cd.resolve():this._driverSet.catch(()=>Cd.resolve());return this._driverSet=i.then(()=>{var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(a=>{g._driver=a._driver,d(),g._wrapLibraryMethodsWithReady(),g._initDriver=f(h)})}).catch(()=>{d();var a=new Error("No available storage method found.");return g._driverSet=Cd.reject(a),g._driverSet}),Ea(this._driverSet,b,c),this._driverSet}supports(a){return!!Rd[a]}_extend(a){ib(this,a)}_getSupportedDrivers(a){for(var b,c=[],d=0,e=a.length;d<e;d++)b=a[d],this.supports(b)&&c.push(b);return c}_wrapLibraryMethodsWithReady(){for(var a=0,b=Vd.length;a<b;a++)hb(this,Vd[a])}createInstance(a){return new Xd(a)}}var Yd=new Xd,Zd=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$d="[1-9]\\d?",_d="\\d\\d",ae="[^\\s]+",be=/\[([^]*?)\]/gm,ce=function(a){return function(b,c){var d=c[a].map(function(a){return a.toLowerCase()}),e=d.indexOf(b.toLowerCase());return-1<e?e:null}},de=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ee=["January","February","March","April","May","June","July","August","September","October","November","December"],fe=jb(ee,3),ge=jb(de,3),he={dayNamesShort:ge,dayNames:de,monthNamesShort:fe,monthNames:ee,amPm:["am","pm"],DoFn:function(a){return a+["th","st","nd","rd"][3<a%10?0:(10==a-a%10?0:1)*a%10]}},ie=kb({},he),je=function(a){return ie=kb(ie,a)},ke=function(a){return a.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},le=function(a,b){for(void 0===b&&(b=2),a+="";a.length<b;)a="0"+a;return a},me={D:function(a){return a.getDate()+""},DD:function(a){return le(a.getDate())},Do:function(a,b){return b.DoFn(a.getDate())},d:function(a){return a.getDay()+""},dd:function(a){return le(a.getDay())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1+""},MM:function(a){return le(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},YY:function(a){return le(a.getFullYear()+"",4).substr(2)},YYYY:function(a){return le(a.getFullYear(),4)},h:function(a){return(a.getHours()%12||12)+""},hh:function(a){return le(a.getHours()%12||12)},H:function(a){return a.getHours()+""},HH:function(a){return le(a.getHours())},m:function(a){return a.getMinutes()+""},mm:function(a){return le(a.getMinutes())},s:function(a){return a.getSeconds()+""},ss:function(a){return le(a.getSeconds())},S:function(a){return lc(a.getMilliseconds()/100)+""},SS:function(a){return le(lc(a.getMilliseconds()/10),2)},SSS:function(a){return le(a.getMilliseconds(),3)},a:function(a,b){return 12>a.getHours()?b.amPm[0]:b.amPm[1]},A:function(a,b){return 12>a.getHours()?b.amPm[0].toUpperCase():b.amPm[1].toUpperCase()},ZZ:function(a){var b=a.getTimezoneOffset();return(0<b?"-":"+")+le(100*ec(fc(b)/60)+fc(b)%60,4)},Z:function(a){var b=a.getTimezoneOffset();return(0<b?"-":"+")+le(ec(fc(b)/60),2)+":"+le(fc(b)%60,2)}},ne=function(a){return+a-1},oe=[null,$d],pe=[null,ae],qe=["isPm",ae,function(a,b){var c=a.toLowerCase();if(c===b.amPm[0])return 0;return c===b.amPm[1]?1:null}],re=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(a){var b=(a+"").match(/([+-]|\d\d)/gi);if(b){var c=60*+b[1]+parseInt(b[2],10);return"+"===b[0]?c:-c}return 0}],se={D:["day",$d],DD:["day",_d],Do:["day",$d+ae,function(a){return parseInt(a,10)}],M:["month",$d,ne],MM:["month",_d,ne],YY:["year",_d,function(a){var b=new Date,c=+(""+b.getFullYear()).substr(0,2);return+(""+(68<+a?c-1:c)+a)}],h:["hour",$d,void 0,"isPm"],hh:["hour",_d,void 0,"isPm"],H:["hour",$d],HH:["hour",_d],m:["minute",$d],mm:["minute",_d],s:["second",$d],ss:["second",_d],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(a){return 100*+a}],SS:["millisecond",_d,function(a){return 10*+a}],SSS:["millisecond","\\d{3}"],d:oe,dd:oe,ddd:pe,dddd:pe,MMM:["month",ae,ce("monthNamesShort")],MMMM:["month",ae,ce("monthNames")],a:qe,A:qe,ZZ:re,Z:re},te={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ue=function(a,b,c){if(void 0===b&&(b=te["default"]),void 0===c&&(c={}),"number"==typeof a&&(a=new Date(a)),"[object Date]"!==Object.prototype.toString.call(a)||isNaN(a.getTime()))throw new Error("Invalid Date pass to format");b=te[b]||b;var d=[];b=b.replace(be,function(a,b){return d.push(b),"@@@"});var e=kb(kb({},ie),c);return b=b.replace(Zd,function(b){return me[b](a,e)}),b.replace(/@@@/g,function(){return d.shift()})},ve={format:ue,parse:lb,defaultI18n:he,setGlobalDateI18n:je,setGlobalDateMasks:function setGlobalDateMasks(a){return kb(te,a)}},we=function(){try{new Date().toLocaleDateString("i")}catch(a){return"RangeError"===a.name}return!1}()?function(a,b){return a.toLocaleDateString(b,{year:"numeric",month:"long",day:"numeric"})}:function(a){return ve.format(a,"mediumDate")},xe=function(){try{new Date().toLocaleString("i")}catch(a){return"RangeError"===a.name}return!1}()?function(a,b){return a.toLocaleString(b,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})}:function(a){return ve.format(a,"haDateTime")},ye=function(){try{new Date().toLocaleTimeString("i")}catch(a){return"RangeError"===a.name}return!1}()?function(a,b){return a.toLocaleTimeString(b,{hour:"numeric",minute:"2-digit"})}:function(a){return ve.format(a,"shortTime")},ze=function(b,c,d,e){e=e||{},d=null==d?{}:d;var f=new Event(c,{bubbles:void 0===e.bubbles||e.bubbles,cancelable:!!e.cancelable,composed:void 0===e.composed||e.composed});return f.detail=d,b.dispatchEvent(f),f},Ae={alert:"hass:alert",automation:"hass:playlist-play",calendar:"hass:calendar",camera:"hass:video",climate:"hass:thermostat",configurator:"hass:settings",conversation:"hass:text-to-speech",device_tracker:"hass:account",fan:"hass:fan",group:"hass:google-circles-communities",history_graph:"hass:chart-line",homeassistant:"hass:home-assistant",homekit:"hass:home-automation",image_processing:"hass:image-filter-frames",input_boolean:"hass:drawing",input_datetime:"hass:calendar-clock",input_number:"hass:ray-vertex",input_select:"hass:format-list-bulleted",input_text:"hass:textbox",light:"hass:lightbulb",mailbox:"hass:mailbox",notify:"hass:comment-alert",person:"hass:account",plant:"hass:flower",proximity:"hass:apple-safari",remote:"hass:remote",scene:"hass:google-pages",script:"hass:file-document",sensor:"hass:eye",simple_alarm:"hass:bell",sun:"hass:white-balance-sunny",switch:"hass:flash",timer:"hass:timer",updater:"hass:cloud-upload",vacuum:"hass:robot-vacuum",water_heater:"hass:thermometer",weblink:"hass:open-in-new"},Be={humidity:"hass:water-percent",illuminance:"hass:brightness-5",temperature:"hass:thermometer",pressure:"hass:gauge",power:"hass:flash",signal_strength:"hass:wifi"},Ce={binary_sensor:function(a){var b=a.state&&"off"===a.state;switch(a.attributes.device_class){case"battery":return b?"hass:battery":"hass:battery-outline";case"cold":return b?"hass:thermometer":"hass:snowflake";case"connectivity":return b?"hass:server-network-off":"hass:server-network";case"door":return b?"hass:door-closed":"hass:door-open";case"garage_door":return b?"hass:garage":"hass:garage-open";case"gas":case"power":case"problem":case"safety":case"smoke":return b?"hass:shield-check":"hass:alert";case"heat":return b?"hass:thermometer":"hass:fire";case"light":return b?"hass:brightness-5":"hass:brightness-7";case"lock":return b?"hass:lock":"hass:lock-open";case"moisture":return b?"hass:water-off":"hass:water";case"motion":return b?"hass:walk":"hass:run";case"occupancy":return b?"hass:home-outline":"hass:home";case"opening":return b?"hass:square":"hass:square-outline";case"plug":return b?"hass:power-plug-off":"hass:power-plug";case"presence":return b?"hass:home-outline":"hass:home";case"sound":return b?"hass:music-note-off":"hass:music-note";case"vibration":return b?"hass:crop-portrait":"hass:vibrate";case"window":return b?"hass:window-closed":"hass:window-open";default:return b?"hass:radiobox-blank":"hass:checkbox-marked-circle";}},cover:function(a){var b="closed"!==a.state;switch(a.attributes.device_class){case"garage":return b?"hass:garage-open":"hass:garage";case"door":return b?"hass:door-open":"hass:door-closed";case"shutter":return b?"hass:window-shutter-open":"hass:window-shutter";case"blind":return b?"hass:blinds-open":"hass:blinds";case"window":return b?"hass:window-open":"hass:window-closed";default:return nb("cover",a.state);}},sensor:function(b){var c=b.attributes.device_class;if(c&&c in Be)return Be[c];if("battery"===c){var d=+b.state;if(isNaN(d))return"hass:battery-unknown";var a=10*lc(d/10);return 100<=a?"hass:battery":0>=a?"hass:battery-alert":"hass:battery-"+a}var e=b.attributes.unit_of_measurement;return"\xB0C"===e||"\xB0F"===e?"hass:thermometer":nb("sensor")},input_datetime:function(a){return a.attributes.has_date?a.attributes.has_time?nb("input_datetime"):"hass:calendar":"hass:clock"}},De=function(a){if(!a)return"hass:bookmark";if(a.attributes.icon)return a.attributes.icon;var b=mb(a.entity_id);return b in Ce?Ce[b](a):nb(b,a.state)},Ee=function(a){var b={exports:{}};return a(b,b.exports),b.exports}(function(a){(function(b){a.exports=b()})(function(a){function b(e,f){var g=e[0],h=e[1],i=e[2],j=e[3];g+=0|(h&i|~h&j)+f[0]-680876936,g=0|(g<<7|g>>>25)+h,j+=0|(g&h|~g&i)+f[1]-389564586,j=0|(j<<12|j>>>20)+g,i+=0|(j&g|~j&h)+f[2]+606105819,i=0|(i<<17|i>>>15)+j,h+=0|(i&j|~i&g)+f[3]-1044525330,h=0|(h<<22|h>>>10)+i,g+=0|(h&i|~h&j)+f[4]-176418897,g=0|(g<<7|g>>>25)+h,j+=0|(g&h|~g&i)+f[5]+1200080426,j=0|(j<<12|j>>>20)+g,i+=0|(j&g|~j&h)+f[6]-1473231341,i=0|(i<<17|i>>>15)+j,h+=0|(i&j|~i&g)+f[7]-45705983,h=0|(h<<22|h>>>10)+i,g+=0|(h&i|~h&j)+f[8]+1770035416,g=0|(g<<7|g>>>25)+h,j+=0|(g&h|~g&i)+f[9]-1958414417,j=0|(j<<12|j>>>20)+g,i+=0|(j&g|~j&h)+f[10]-42063,i=0|(i<<17|i>>>15)+j,h+=0|(i&j|~i&g)+f[11]-1990404162,h=0|(h<<22|h>>>10)+i,g+=0|(h&i|~h&j)+f[12]+1804603682,g=0|(g<<7|g>>>25)+h,j+=0|(g&h|~g&i)+f[13]-40341101,j=0|(j<<12|j>>>20)+g,i+=0|(j&g|~j&h)+f[14]-1502002290,i=0|(i<<17|i>>>15)+j,h+=0|(i&j|~i&g)+f[15]+1236535329,h=0|(h<<22|h>>>10)+i,g+=0|(h&j|i&~j)+f[1]-165796510,g=0|(g<<5|g>>>27)+h,j+=0|(g&i|h&~i)+f[6]-1069501632,j=0|(j<<9|j>>>23)+g,i+=0|(j&h|g&~h)+f[11]+643717713,i=0|(i<<14|i>>>18)+j,h+=0|(i&g|j&~g)+f[0]-373897302,h=0|(h<<20|h>>>12)+i,g+=0|(h&j|i&~j)+f[5]-701558691,g=0|(g<<5|g>>>27)+h,j+=0|(g&i|h&~i)+f[10]+38016083,j=0|(j<<9|j>>>23)+g,i+=0|(j&h|g&~h)+f[15]-660478335,i=0|(i<<14|i>>>18)+j,h+=0|(i&g|j&~g)+f[4]-405537848,h=0|(h<<20|h>>>12)+i,g+=0|(h&j|i&~j)+f[9]+568446438,g=0|(g<<5|g>>>27)+h,j+=0|(g&i|h&~i)+f[14]-1019803690,j=0|(j<<9|j>>>23)+g,i+=0|(j&h|g&~h)+f[3]-187363961,i=0|(i<<14|i>>>18)+j,h+=0|(i&g|j&~g)+f[8]+1163531501,h=0|(h<<20|h>>>12)+i,g+=0|(h&j|i&~j)+f[13]-1444681467,g=0|(g<<5|g>>>27)+h,j+=0|(g&i|h&~i)+f[2]-51403784,j=0|(j<<9|j>>>23)+g,i+=0|(j&h|g&~h)+f[7]+1735328473,i=0|(i<<14|i>>>18)+j,h+=0|(i&g|j&~g)+f[12]-1926607734,h=0|(h<<20|h>>>12)+i,g+=0|(h^i^j)+f[5]-378558,g=0|(g<<4|g>>>28)+h,j+=0|(g^h^i)+f[8]-2022574463,j=0|(j<<11|j>>>21)+g,i+=0|(j^g^h)+f[11]+1839030562,i=0|(i<<16|i>>>16)+j,h+=0|(i^j^g)+f[14]-35309556,h=0|(h<<23|h>>>9)+i,g+=0|(h^i^j)+f[1]-1530992060,g=0|(g<<4|g>>>28)+h,j+=0|(g^h^i)+f[4]+1272893353,j=0|(j<<11|j>>>21)+g,i+=0|(j^g^h)+f[7]-155497632,i=0|(i<<16|i>>>16)+j,h+=0|(i^j^g)+f[10]-1094730640,h=0|(h<<23|h>>>9)+i,g+=0|(h^i^j)+f[13]+681279174,g=0|(g<<4|g>>>28)+h,j+=0|(g^h^i)+f[0]-358537222,j=0|(j<<11|j>>>21)+g,i+=0|(j^g^h)+f[3]-722521979,i=0|(i<<16|i>>>16)+j,h+=0|(i^j^g)+f[6]+76029189,h=0|(h<<23|h>>>9)+i,g+=0|(h^i^j)+f[9]-640364487,g=0|(g<<4|g>>>28)+h,j+=0|(g^h^i)+f[12]-421815835,j=0|(j<<11|j>>>21)+g,i+=0|(j^g^h)+f[15]+530742520,i=0|(i<<16|i>>>16)+j,h+=0|(i^j^g)+f[2]-995338651,h=0|(h<<23|h>>>9)+i,g+=0|(i^(h|~j))+f[0]-198630844,g=0|(g<<6|g>>>26)+h,j+=0|(h^(g|~i))+f[7]+1126891415,j=0|(j<<10|j>>>22)+g,i+=0|(g^(j|~h))+f[14]-1416354905,i=0|(i<<15|i>>>17)+j,h+=0|(j^(i|~g))+f[5]-57434055,h=0|(h<<21|h>>>11)+i,g+=0|(i^(h|~j))+f[12]+1700485571,g=0|(g<<6|g>>>26)+h,j+=0|(h^(g|~i))+f[3]-1894986606,j=0|(j<<10|j>>>22)+g,i+=0|(g^(j|~h))+f[10]-1051523,i=0|(i<<15|i>>>17)+j,h+=0|(j^(i|~g))+f[1]-2054922799,h=0|(h<<21|h>>>11)+i,g+=0|(i^(h|~j))+f[8]+1873313359,g=0|(g<<6|g>>>26)+h,j+=0|(h^(g|~i))+f[15]-30611744,j=0|(j<<10|j>>>22)+g,i+=0|(g^(j|~h))+f[6]-1560198380,i=0|(i<<15|i>>>17)+j,h+=0|(j^(i|~g))+f[13]+1309151649,h=0|(h<<21|h>>>11)+i,g+=0|(i^(h|~j))+f[4]-145523070,g=0|(g<<6|g>>>26)+h,j+=0|(h^(g|~i))+f[11]-1120210379,j=0|(j<<10|j>>>22)+g,i+=0|(g^(j|~h))+f[2]+718787259,i=0|(i<<15|i>>>17)+j,h+=0|(j^(i|~g))+f[9]-343485551,h=0|(h<<21|h>>>11)+i,e[0]=0|g+e[0],e[1]=0|h+e[1],e[2]=0|i+e[2],e[3]=0|j+e[3]}function c(a){var b,c=[];for(b=0;64>b;b+=4)c[b>>2]=a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24);return c}function d(b){var a,c=[];for(a=0;64>a;a+=4)c[a>>2]=b[a]+(b[a+1]<<8)+(b[a+2]<<16)+(b[a+3]<<24);return c}function e(a){var d,e,f,g,h,j,k=a.length,l=[1732584193,-271733879,-1732584194,271733878];for(d=64;d<=k;d+=64)b(l,c(a.substring(d-64,d)));for(a=a.substring(d-64),e=a.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=0;d<e;d+=1)f[d>>2]|=a.charCodeAt(d)<<(d%4<<3);if(f[d>>2]|=128<<(d%4<<3),55<d)for(b(l,f),d=0;16>d;d+=1)f[d]=0;return g=8*k,g=g.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(g[2],16),j=parseInt(g[1],16)||0,f[14]=h,f[15]=j,b(l,f),l}function f(c){var e,f,g,h,j,k,l=c.length,m=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=l;e+=64)b(m,d(c.subarray(e-64,e)));for(c=e-64<l?c.subarray(e-64):new Uint8Array(0),f=c.length,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<f;e+=1)g[e>>2]|=c[e]<<(e%4<<3);if(g[e>>2]|=128<<(e%4<<3),55<e)for(b(m,g),e=0;16>e;e+=1)g[e]=0;return h=8*l,h=h.toString(16).match(/(.*?)(.{0,8})$/),j=parseInt(h[2],16),k=parseInt(h[1],16)||0,g[14]=j,g[15]=k,b(m,g),m}function g(a){var b,c="";for(b=0;4>b;b+=1)c+=o[15&a>>8*b+4]+o[15&a>>8*b];return c}function h(a){var b;for(b=0;b<a.length;b+=1)a[b]=g(a[b]);return a.join("")}function i(a){return /[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),a}function j(a,b){var c,d=a.length,e=new ArrayBuffer(d),f=new Uint8Array(e);for(c=0;c<d;c+=1)f[c]=a.charCodeAt(c);return b?f:e}function k(a){return dc.apply(null,new Uint8Array(a))}function l(a,b,c){var d=new Uint8Array(a.byteLength+b.byteLength);return d.set(new Uint8Array(a)),d.set(new Uint8Array(b),a.byteLength),c?d:d.buffer}function m(a){var b,c=[],d=a.length;for(b=0;b<d-1;b+=2)c.push(parseInt(a.substr(b,2),16));return dc.apply(String,c)}function n(){this.reset()}var o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];if("5d41402abc4b2a76b9719d911017c592"!==h(e("hello")));return"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function b(a,b){return a=0|a||0,0>a?mc(a+b,0):nc(a,b)}ArrayBuffer.prototype.slice=function(c,d){var e,f,g,h,i=this.byteLength,j=b(c,i),k=i;return(d!==a&&(k=b(d,i)),j>k)?new ArrayBuffer(0):(e=k-j,f=new ArrayBuffer(e),g=new Uint8Array(f),h=new Uint8Array(this,j,e),g.set(h),f)}}(),n.prototype.append=function(a){return this.appendBinary(i(a)),this},n.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var d,e=this._buff.length;for(d=64;d<=e;d+=64)b(this._hash,c(this._buff.substring(d-64,d)));return this._buff=this._buff.substring(d-64),this},n.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;b<e;b+=1)f[b>>2]|=d.charCodeAt(b)<<(b%4<<3);return this._finish(f,e),c=h(this._hash),a&&(c=m(c)),this.reset(),c},n.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},n.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},n.prototype.setState=function(a){return this._buff=a.buff,this._length=a.length,this._hash=a.hash,this},n.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},n.prototype._finish=function(a,c){var d,e,f,g=c;if(a[g>>2]|=128<<(g%4<<3),55<g)for(b(this._hash,a),g=0;16>g;g+=1)a[g]=0;d=8*this._length,d=d.toString(16).match(/(.*?)(.{0,8})$/),e=parseInt(d[2],16),f=parseInt(d[1],16)||0,a[14]=e,a[15]=f,b(this._hash,a)},n.hash=function(a,b){return n.hashBinary(i(a),b)},n.hashBinary=function(a,b){var c=e(a),d=h(c);return b?m(d):d},n.ArrayBuffer=function(){this.reset()},n.ArrayBuffer.prototype.append=function(a){var c,e=l(this._buff.buffer,a,!0),f=e.length;for(this._length+=a.byteLength,c=64;c<=f;c+=64)b(this._hash,d(e.subarray(c-64,c)));return this._buff=c-64<f?new Uint8Array(e.buffer.slice(c-64)):new Uint8Array(0),this},n.ArrayBuffer.prototype.end=function(a){var b,c,d=this._buff,e=d.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;b<e;b+=1)f[b>>2]|=d[b]<<(b%4<<3);return this._finish(f,e),c=h(this._hash),a&&(c=m(c)),this.reset(),c},n.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},n.ArrayBuffer.prototype.getState=function(){var a=n.prototype.getState.call(this);return a.buff=k(a.buff),a},n.ArrayBuffer.prototype.setState=function(a){return a.buff=j(a.buff,!0),n.prototype.setState.call(this,a)},n.ArrayBuffer.prototype.destroy=n.prototype.destroy,n.ArrayBuffer.prototype._finish=n.prototype._finish,n.ArrayBuffer.hash=function(a,b){var c=f(new Uint8Array(a)),d=h(c);return b?m(d):d},n})}),Fe=.7,Ge=1/Fe,He="\\s*([+-]?\\d+)\\s*",Ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ke=/^#([0-9a-f]{3,8})$/,Le=new RegExp("^rgb\\(".concat(He,",").concat(He,",").concat(He,"\\)$")),Me=new RegExp("^rgb\\(".concat(Je,",").concat(Je,",").concat(Je,"\\)$")),Ne=new RegExp("^rgba\\(".concat(He,",").concat(He,",").concat(He,",").concat(Ie,"\\)$")),Oe=new RegExp("^rgba\\(".concat(Je,",").concat(Je,",").concat(Je,",").concat(Ie,"\\)$")),Pe=new RegExp("^hsl\\(".concat(Ie,",").concat(Je,",").concat(Je,"\\)$")),Qe=new RegExp("^hsla\\(".concat(Ie,",").concat(Je,",").concat(Je,",").concat(Ie,"\\)$")),Re={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ob(qb,tb,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:rb,formatHex:rb,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Fb(this).formatHsl()},formatRgb:sb,toString:sb}),ob(yb,xb,pb(qb,{brighter(a){return a=null==a?Ge:kc(Ge,a),new yb(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?Fe:kc(Fe,a),new yb(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new yb(Cb(this.r),Cb(this.g),Cb(this.b),Bb(this.opacity))},displayable(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:zb,formatHex:zb,formatHex8:function(){return"#".concat(Db(this.r)).concat(Db(this.g)).concat(Db(this.b)).concat(Db(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:Ab,toString:Ab})),ob(Gb,function(a,b,c,d){return 1===arguments.length?Fb(a):new Gb(a,b,c,null==d?1:d)},pb(qb,{brighter(a){return a=null==a?Ge:kc(Ge,a),new Gb(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?Fe:kc(Fe,a),new Gb(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+360*(0>this.h),b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(.5>c?c:1-c)*b,e=2*c-d;return new yb(Jb(240<=a?a-240:a+120,e,d),Jb(a,e,d),Jb(120>a?a+240:a-120,e,d),this.opacity)},clamp(){return new Gb(Hb(this.h),Ib(this.s),Ib(this.l),Bb(this.opacity))},displayable(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl(){var b=Bb(this.opacity);return"".concat(1===b?"hsl(":"hsla(").concat(Hb(this.h),", ").concat(100*Ib(this.s),"%, ").concat(100*Ib(this.l),"%").concat(1===b?")":", ".concat(b,")"))}}));var Se=cc/180,Te=180/cc,Ue=18,Ve=.96422,We=.82521,Xe=4/29,Ye=6/29,Ze=3*Ye*Ye,$e=Ye*Ye*Ye;ob(Lb,function(c,d,a,b){return 1===arguments.length?Kb(c):new Lb(c,d,a,null==b?1:b)},pb(qb,{brighter(a){return new Lb(this.l+Ue*(null==a?1:a),this.a,this.b,this.opacity)},darker(a){return new Lb(this.l-Ue*(null==a?1:a),this.a,this.b,this.opacity)},rgb(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;return b=Ve*Nb(b),a=1*Nb(a),c=We*Nb(c),new yb(Ob(3.1338561*b-1.6168667*a-.4906146*c),Ob(-.9787684*b+1.9161415*a+.033454*c),Ob(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}})),ob(Rb,function(a,b,c,d){return 1===arguments.length?Qb(a):new Rb(a,b,c,null==d?1:d)},pb(qb,{brighter(a){return new Rb(this.h,this.c,this.l+Ue*(null==a?1:a),this.opacity)},darker(a){return new Rb(this.h,this.c,this.l-Ue*(null==a?1:a),this.opacity)},rgb(){return Sb(this).rgb()}}));var _e=-.14861,af=+1.78277,bf=-.29227,cf=-.90649,df=+1.97294,ef=df*cf,ff=df*af,gf=af*bf-cf*_e;ob(Ub,function(a,b,c,d){return 1===arguments.length?Tb(a):new Ub(a,b,c,null==d?1:d)},pb(qb,{brighter(a){return a=null==a?Ge:kc(Ge,a),new Ub(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?Fe:kc(Fe,a),new Ub(this.h,this.s,this.l*a,this.opacity)},rgb(){var b=isNaN(this.h)?0:(this.h+120)*Se,c=+this.l,d=isNaN(this.s)?0:this.s*c*(1-c),a=hc(b),e=gc(b);return new yb(255*(c+d*(_e*a+af*e)),255*(c+d*(bf*a+cf*e)),255*(c+d*(df*a)),this.opacity)}}));var hf=a=>()=>a,jf=function a(b){function c(a,c){var e=d((a=xb(a)).r,(c=xb(c)).r),f=d(a.g,c.g),g=d(a.b,c.b),b=Yb(a.opacity,c.opacity);return function(c){return a.r=e(c),a.g=f(c),a.b=g(c),a.opacity=b(c),a+""}}var d=Xb(b);return c.gamma=a,c}(1),kf="https://github.com/kalkih/mini-graph-card/blob/master/README.md",lf=14,mf=96,nf={humidity:"hass:water-percent",illuminance:"hass:brightness-5",temperature:"hass:thermometer",battery:"hass:battery",pressure:"hass:gauge",power:"hass:flash",signal_strength:"hass:wifi",motion:"hass:walk",door:"hass:door-closed",window:"hass:window-closed",presence:"hass:account",light:"hass:lightbulb"},of=["var(--accent-color)","#3498db","#e74c3c","#9b59b6","#f1c40f","#2ecc71","#1abc9c","#34495e","#e67e22","#7f8c8d","#27ae60","#2980b9","#8e44ad"],pf=["entity","line","length","fill","points","tooltip","abs","config"],qf={name:!0,icon:!0,state:!0,graph:"line",labels:"hover",labels_secondary:"hover",extrema:!1,legend:!0,fill:!0,points:"hover"},rf=0,sf=1,tf=2,uf=3600000;class vf{constructor(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,e=4<arguments.length&&arguments[4]!==void 0?arguments[4]:1,f=5<arguments.length&&arguments[5]!==void 0?arguments[5]:"avg",g=6<arguments.length&&arguments[6]!==void 0?arguments[6]:"interval",h=!(7<arguments.length&&arguments[7]!==void 0)||arguments[7],i=!!(8<arguments.length&&arguments[8]!==void 0)&&arguments[8],j={avg:this._average,median:this._median,max:this._maximum,min:this._minimum,first:this._first,last:this._last,sum:this._sum,delta:this._delta,diff:this._diff};this._history=void 0,this.coords=[],this.width=a-2*c[rf],this.height=b,this.margin=c,this._max=0,this._min=0,this.points=e,this.hours=d,this.aggregateFuncName=f,this._calcPoint=j[f]||this._average,this._smoothing=h,this._logarithmic=i,this._groupBy=g,this._endTime=0}get max(){return this._max}set max(a){this._max=a}get min(){return this._min}set min(a){this._min=a}set history(a){this._history=a}update(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;if(a&&(this._history=a),!!this._history){this._updateEndTime();var b=this._history.reduce((a,b)=>this._reducer(a,b),[]),c=bc(this.hours*this.points);b.length=c,this.coords=this._calcPoints(b),this.min=nc.apply(Math,Da(this.coords.map(a=>+a[tf]))),this.max=mc.apply(Math,Da(this.coords.map(a=>+a[tf])))}}_reducer(a,b){var c=this._endTime-new Date(b.last_changed).getTime(),d=c/uf*this.points-this.hours*this.points;if(0>d){var e=ec(fc(d));a[e]||(a[e]=[]),a[e].push(b)}else a[0]=[b];return a}_calcPoints(a){var b=this.width/(this.hours*this.points-1);b=ac(b)?b:this.width;for(var c,d=[],e=a.filter(Boolean)[0],f=0;f<a.length;f+=1)c=b*f+this.margin[rf],a[f]?(e=a[f],d.push([c,0,this._calcPoint(e)])):d.push([c,0,this._lastValue(e)]);return d}_calcY(a){var b=this._logarithmic?_b(mc(1,this.max)):this.max,c=this._logarithmic?_b(mc(1,this.min)):this.min,d=(b-c)/this.height||1,e=a.map(a=>{var b=this._logarithmic?_b(mc(1,a[tf])):a[tf],e=this.height-(b-c)/d;return[a[rf],e,a[tf]]});return e}getPoints(){var{coords:a}=this;if(1===a.length&&(a[1]=[this.width+this.margin[rf],0,a[0][tf]]),a=this._calcY(this.coords),this._smoothing){var b=a[0];return a.shift(),a.map((a,c)=>{var d=this._midPoint(b[rf],b[sf],a[rf],a[sf]),e=(b[tf]+a[tf])/2;return b=a,[d[rf],d[sf],e,c+1]})}return a.map((a,b)=>[a[rf],a[sf],a[tf],b])}getPath(){var{coords:a}=this;1===a.length&&(a[1]=[this.width+this.margin[rf],0,a[0][tf]]),a=this._calcY(this.coords);var b,c,d="",e=a[0];return d+="M".concat(e[rf],",").concat(e[sf]),a.forEach(a=>{b=a,c=this._smoothing?this._midPoint(e[rf],e[sf],b[rf],b[sf]):b,d+=" ".concat(c[rf],",").concat(c[sf]),d+=" Q ".concat(b[rf],",").concat(b[sf]),e=b}),d+=" ".concat(b[rf],",").concat(b[sf]),d}computeGradient(a,b){var c=b?_b(mc(1,this._max))-_b(mc(1,this._min)):this._max-this._min;return a.map((a,d,e)=>{var f;if(a.value>this._max&&e[d+1]){var h=(this._max-e[d+1].value)/(a.value-e[d+1].value);f=jf(e[d+1].color,a.color)(h)}else if(a.value<this._min&&e[d-1]){var i=(e[d-1].value-this._min)/(e[d-1].value-a.value);f=jf(e[d-1].color,a.color)(i)}var g;return g=0>=c?0:b?(_b(mc(1,this._max))-_b(mc(1,a.value)))*(100/c):(this._max-a.value)*(100/c),{color:f||a.color,offset:g}})}getFill(a){var b=this.height,c=a,d=this.coords[this.coords.length-1][rf];return c+=" L ".concat(d,", ").concat(b),c+=" L ".concat(this.coords[0][rf],", ").concat(b," z"),c}getBars(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:4,d=this._calcY(this.coords),e=(this.width-c)/bc(this.hours*this.points)/b;return d.map((d,f)=>({x:e*f*b+e*a+c,y:d[sf],height:this.height-d[sf],width:e-c,value:d[tf]}))}_midPoint(a,b,c,d){return[(a-c)/2+c,(b-d)/2+d]}_average(a){return a.reduce((a,b)=>a+parseFloat(b.state),0)/a.length}_median(a){var b=Da(a).sort((c,a)=>parseFloat(c)-parseFloat(a)),c=ec((b.length-1)/2);return 1==b.length%2?parseFloat(b[c].state):(parseFloat(b[c].state)+parseFloat(b[c+1].state))/2}_maximum(a){return mc.apply(Math,Da(a.map(a=>a.state)))}_minimum(a){return nc.apply(Math,Da(a.map(a=>a.state)))}_first(a){return parseFloat(a[0].state)}_last(a){return parseFloat(a[a.length-1].state)}_sum(a){return a.reduce((a,b)=>a+parseFloat(b.state),0)}_delta(a){return this._maximum(a)-this._minimum(a)}_diff(a){return this._last(a)-this._first(a)}_lastValue(a){return["delta","diff"].includes(this.aggregateFuncName)?0:parseFloat(a[a.length-1].state)||0}_updateEndTime(){switch(this._endTime=new Date,this._groupBy){case"month":this._endTime.setMonth(this._endTime.getMonth()+1),this._endTime.setDate(1);break;case"date":this._endTime.setDate(this._endTime.getDate()+1),this._endTime.setHours(0,0,0,0);break;case"hour":this._endTime.setHours(this._endTime.getHours()+1),this._endTime.setMinutes(0,0,0);}}}var wf=xd(za()),xf=(a,b,c,d,f)=>{var g;switch(d.action){case"more-info":{g=new Event("hass-more-info",{composed:!0}),g.detail={entityId:f},a.dispatchEvent(g);break}case"navigate":{if(!d.navigation_path)return;window.history.pushState(null,"",d.navigation_path),g=new Event("location-changed",{composed:!0}),g.detail={replace:!1},window.dispatchEvent(g);break}case"call-service":{if(!d.service)return;var[h,i]=d.service.split(".",2),j=xa({},d.service_data);b.callService(h,i,j);break}case"url":{if(!d.url)return;window.location.href=d.url;break}case"fire-dom-event":{g=new Event("ll-custom",{composed:!0,bubbles:!0}),g.detail=d,a.dispatchEvent(g);break}}},yf=dc,zf=a=>Af(a,16,function(b){return yf(b)}),Af=(a,b,c)=>{if(null==a)return"";var d,e,f,g={},h={},j="",k="",l="",m=2,n=3,o=2,p=[],q=0,r=0;for(f=0;f<a.length;f+=1)if(j=a.charAt(f),Object.prototype.hasOwnProperty.call(g,j)||(g[j]=n++,h[j]=!0),k=l+j,Object.prototype.hasOwnProperty.call(g,k))l=k;else{if(Object.prototype.hasOwnProperty.call(h,l)){if(256>l.charCodeAt(0)){for(d=0;d<o;d++)q<<=1,r==b-1?(r=0,p.push(c(q)),q=0):r++;for(e=l.charCodeAt(0),d=0;8>d;d++)q=q<<1|1&e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e>>=1}else{for(e=1,d=0;d<o;d++)q=q<<1|e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e=0;for(e=l.charCodeAt(0),d=0;16>d;d++)q=q<<1|1&e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e>>=1}m--,0==m&&(m=kc(2,o),o++),delete h[l]}else for(e=g[l],d=0;d<o;d++)q=q<<1|1&e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e>>=1;m--,0==m&&(m=kc(2,o),o++),g[k]=n++,l=j+""}if(""!==l){if(Object.prototype.hasOwnProperty.call(h,l)){if(256>l.charCodeAt(0)){for(d=0;d<o;d++)q<<=1,r==b-1?(r=0,p.push(c(q)),q=0):r++;for(e=l.charCodeAt(0),d=0;8>d;d++)q=q<<1|1&e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e>>=1}else{for(e=1,d=0;d<o;d++)q=q<<1|e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e=0;for(e=l.charCodeAt(0),d=0;16>d;d++)q=q<<1|1&e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e>>=1}m--,0==m&&(m=kc(2,o),o++),delete h[l]}else for(e=g[l],d=0;d<o;d++)q=q<<1|1&e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e>>=1;m--,0==m&&(m=kc(2,o),o++)}for(e=2,d=0;d<o;d++)q=q<<1|1&e,r==b-1?(r=0,p.push(c(q)),q=0):r++,e>>=1;for(;;)if(q<<=1,r==b-1){p.push(c(q));break}else r++;return p.join("")},Bf=a=>null==a?"":""==a?null:Cf(a.length,32768,function(b){return a.charCodeAt(b)}),Cf=(a,b,d)=>{var e,f,g,h,j,k,l,m=[],n=4,o=4,p=3,q="",r=[],s={val:d(0),position:b,index:1};for(e=0;3>e;e+=1)m[e]=e;for(g=0,j=kc(2,2),k=1;k!=j;)h=s.val&s.position,s.position>>=1,0==s.position&&(s.position=b,s.val=d(s.index++)),g|=(0<h?1:0)*k,k<<=1;switch(g){case 0:for(g=0,j=kc(2,8),k=1;k!=j;)h=s.val&s.position,s.position>>=1,0==s.position&&(s.position=b,s.val=d(s.index++)),g|=(0<h?1:0)*k,k<<=1;l=yf(g);break;case 1:for(g=0,j=kc(2,16),k=1;k!=j;)h=s.val&s.position,s.position>>=1,0==s.position&&(s.position=b,s.val=d(s.index++)),g|=(0<h?1:0)*k,k<<=1;l=yf(g);break;case 2:return"";}for(m[3]=l,f=l,r.push(l);;){if(s.index>a)return"";for(g=0,j=kc(2,p),k=1;k!=j;)h=s.val&s.position,s.position>>=1,0==s.position&&(s.position=b,s.val=d(s.index++)),g|=(0<h?1:0)*k,k<<=1;switch(l=g){case 0:for(g=0,j=kc(2,8),k=1;k!=j;)h=s.val&s.position,s.position>>=1,0==s.position&&(s.position=b,s.val=d(s.index++)),g|=(0<h?1:0)*k,k<<=1;m[o++]=yf(g),l=o-1,n--;break;case 1:for(g=0,j=kc(2,16),k=1;k!=j;)h=s.val&s.position,s.position>>=1,0==s.position&&(s.position=b,s.val=d(s.index++)),g|=(0<h?1:0)*k,k<<=1;m[o++]=yf(g),l=o-1,n--;break;case 2:return r.join("");}if(0==n&&(n=kc(2,p),p++),m[l])q=m[l];else if(l===o)q=f+f.charAt(0);else return null;r.push(q),m[o++]=f+q.charAt(0),n--,f=q,0==n&&(n=kc(2,p),p++)}},Df=(a,b)=>a.reduce((a,c)=>+c[b]<+a[b]?c:a,a[0]),Ef=(a,b)=>a.reduce((a,c)=>a+ +c[b],0)/a.length,Ff=(a,b)=>a.reduce((a,c)=>+c[b]>+a[b]?c:a,a[0]),Gf=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"en-US";return a.toLocaleString(c,xa({hour:"numeric",minute:"numeric"},b))},Hf=a=>a*3600*1000,If=a=>zf(JSON.stringify(a)),Jf=a=>"string"==typeof a?JSON.parse(Bf(a)):a,Kf=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.find(a=>"undefined"!=typeof a)},Lf=(c,a)=>c.length===a.length&&c.every((b,c)=>b===a[c]),Mf=a=>{console.warn("mini-graph-card: ",a)},Nf=(a,b)=>{for(var c=b,d=a.length;c<d;c+=1)if(null!=a[c].value)return c;throw new Error("Error in threshold interpolation: could not find right-nearest valued stop. Do the first and last thresholds have a set \"value\"?")},Of=a=>{if(!a||!a.length)return a;if(null==a[0].value||null==a[a.length-1].value)throw new Error("The first and last thresholds must have a set \"value\".\n See ".concat(kf));var b=0,c=null;return a.map((d,e)=>{if(null!=d.value)return b=e,xa({},d);null==c?c=Nf(a,e):e>c&&(b=c,c=Nf(a,e));var f=a[b].value,g=a[c].value,h=(g-f)/(c-b);return{color:"string"==typeof d?d:d.color,value:h*e+f}})},Pf=(a,b)=>{var c=Of(a);if(c.sort((c,a)=>a.value-c.value),"smooth"===b)return c;var d,e=(d=[]).concat.apply(d,Da(c.map((a,b)=>[a,{value:a.value-1e-4,color:c[b+1]?c[b+1].color:a.color}])));return e},Qf=a=>{if(!Array.isArray(a.entities))throw new Error("Please provide the \"entities\" option as a list.\n See ".concat(kf));if(a.line_color_above||a.line_color_below)throw new Error("\"line_color_above/line_color_below\" was removed, please use \"color_thresholds\".\n See ".concat(kf));var b=xa(xa({animate:!1,hour24:!1,font_size:lf,font_size_header:14,height:100,hours_to_show:24,points_per_hour:.5,aggregate_func:"avg",group_by:"interval",line_color:[].concat(of),color_thresholds:[],color_thresholds_transition:"smooth",line_width:5,bar_spacing:4,compress:!0,smoothing:!0,state_map:[],cache:!0,value_factor:0,tap_action:{action:"more-info"},chart_type:"line",zoom_pan_enabled:!1,enable_zoom:!0,enable_pan:!0,show_zoom_controls:!0,micro_interactions:!0,intelligent_cache:!0,performance_mode:!1},JSON.parse(JSON.stringify(a))),{},{show:xa(xa({},qf),a.show)});b.entities.forEach((a,c)=>{"string"==typeof a&&(b.entities[c]={entity:a})}),b.state_map.forEach((a,c)=>{"string"==typeof a&&(b.state_map[c]={value:a,label:a}),b.state_map[c].label=b.state_map[c].label||b.state_map[c].value}),"string"==typeof a.line_color&&(b.line_color=[a.line_color].concat(of)),b.font_size=a.font_size/100*lf||lf,b.color_thresholds=Pf(b.color_thresholds,b.color_thresholds_transition);var c=24<b.hours_to_show?{day:"numeric",weekday:"short"}:{},d=b.hour24?{hourCycle:"h23"}:{hour12:!0};switch(b.format=xa(xa({},d),c),b.group_by){case"date":b.points_per_hour=1/24;break;case"hour":b.points_per_hour=1;}if("bar"===b.show.graph){var e=b.entities.length;b.hours_to_show*b.points_per_hour*e>mf&&(b.points_per_hour=mf/(b.hours_to_show*e),Mf("Not enough space, adjusting points_per_hour to ".concat(b.points_per_hour)))}return b};class Rf{constructor(a){this.element=a,this.activeInteractions=new Set,this.feedbackQueue=[],this.animationFrameId=null}createPulse(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},c=xa({duration:1e3,intensity:.3,color:"#03a9f4"},b),d="pulse-".concat(Date.now());this.activeInteractions.add(d);var e=[{boxShadow:"0 0 0 0 ".concat(c.color,"80"),transform:"scale(1)"},{boxShadow:"0 0 0 10px ".concat(c.color,"00"),transform:"scale(".concat(1+c.intensity,")")},{boxShadow:"0 0 0 0 ".concat(c.color,"00"),transform:"scale(1)"}],f=a.animate(e,{duration:c.duration,easing:"cubic-bezier(0.4, 0, 0.2, 1)",iterations:1/0});return{id:d,stop(){f.cancel()}}}createLoadingPulse(a){return this.createPulse(a,{duration:1500,intensity:.1,color:"#666666"})}createErrorShake(a){return a.animate([{transform:"translateX(0)"},{transform:"translateX(-5px)"},{transform:"translateX(5px)"},{transform:"translateX(-3px)"},{transform:"translateX(3px)"},{transform:"translateX(0)"}],{duration:400,easing:"ease-in-out"})}createSuccessConfirmation(a){return a.animate([{transform:"scale(1)",filter:"brightness(1)"},{transform:"scale(1.1)",filter:"brightness(1.2)"},{transform:"scale(1)",filter:"brightness(1)"}],{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)"})}createChartFeedback(){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"subtle",b={subtle:{scale:1.02,duration:200},moderate:{scale:1.05,duration:300},strong:{scale:1.08,duration:400}},c=b[a]||b.subtle,d=this.element.shadowRoot&&this.element.shadowRoot.querySelector(".graph__container__svg");if(d){var e=d;e.style.transition="transform ".concat(c.duration,"ms cubic-bezier(0.4, 0, 0.2, 1)"),e.style.transform="scale(".concat(c.scale,")"),setTimeout(()=>{e.style.transform="scale(1)"},c.duration)}}enhanceDataPointHover(a,b){return{showEffect:()=>{var c=a;c.style.transition="all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",c.style.transform="scale(1.3)",c.style.filter="drop-shadow(0 4px 8px rgba(0,0,0,0.3))";var d="#03a9f4";0<b&&(d="#4caf50"),0>b&&(d="#f44336"),c.style.fill=d},hideEffect:()=>{var b=a;b.style.transform="scale(1)",b.style.filter="",b.style.fill=""}}}startPerformanceMonitoring(){var a=()=>{"undefined"!=typeof window&&window.requestAnimationFrame&&(this.animationFrameId=window.requestAnimationFrame(a))};"undefined"!=typeof window&&window.requestAnimationFrame&&(this.animationFrameId=window.requestAnimationFrame(a))}stopPerformanceMonitoring(){this.animationFrameId&&"undefined"!=typeof window&&window.cancelAnimationFrame&&(window.cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}cleanup(){this.activeInteractions.forEach(a=>{"object"==typeof a&&a.stop&&a.stop()}),this.activeInteractions.clear(),this.stopPerformanceMonitoring()}}class Sf{constructor(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.config=xa({maxMemorySize:52428800,maxDiskSize:209715200,defaultTTL:900000,compressionThreshold:1e3,enableDiskCache:!0,enableMemoryCache:!0,enableCompression:!0},a),this.memoryCache=new Map,this.memoryCacheSize=0,this.accessTimes=new Map,this.metrics={hits:0,misses:0,compressionRatio:0,averageAccessTime:0},this.diskCache=null,this.initializeDiskCache(),this.cleanupInterval=setInterval(()=>this.cleanup(),300000)}initializeDiskCache(){if(this.config.enableDiskCache)try{"undefined"!=typeof window&&window.localForage&&(this.diskCache=window.localForage.createInstance({name:"mini-graph-cache",version:1,size:this.config.maxDiskSize,storeName:"chart_data"}))}catch(a){console.warn("MGC Cache: Disk cache initialization failed:",a),this.config.enableDiskCache=!1}}generateKey(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},e=xa({entity:a,start:b instanceof Date?b.getTime():b,end:c instanceof Date?c.getTime():c},d);return this.hashObject(e)}hashObject(a){for(var b,c=JSON.stringify(a,Object.keys(a).sort()),d=0,e=0;e<c.length;e+=1)b=c.charCodeAt(e),d=5*d-d+b,d=ec(d);return"mgc_".concat(fc(d).toString(36))}set(a,b){var c=arguments,d=this;return Ca(function*(){var e=2<c.length&&c[2]!==void 0?c[2]:d.config.defaultTTL,f=Date.now();try{var g={data:b,timestamp:Date.now(),ttl:e,accessCount:0,size:d.estimateSize(b)};d.config.enableMemoryCache&&d.setMemoryCache(a,g),d.config.enableDiskCache&&d.diskCache&&(yield d.setDiskCache(a,g));var h=Date.now()-f;d.updateMetrics("set",h)}catch(a){console.warn("MGC Cache: Set operation failed:",a)}})()}get(a){var b=this;return Ca(function*(){var c=Date.now();b.accessTimes.set(a,Date.now());try{var d=null;return b.config.enableMemoryCache&&(d=b.memoryCache.get(a),d&&b.isValid(d))?(d.accessCount+=1,b.updateMetrics("hit",Date.now()-c),d.data):b.config.enableDiskCache&&b.diskCache&&(d=yield b.diskCache.getItem(a),d&&b.isValid(d))?(d.accessCount+=1,b.config.enableMemoryCache&&b.setMemoryCache(a,d),b.updateMetrics("hit",Date.now()-c),d.data):(b.updateMetrics("miss",Date.now()-c),null)}catch(a){return console.warn("MGC Cache: Get operation failed:",a),b.updateMetrics("miss",Date.now()-c),null}})()}setMemoryCache(a,b){if(this.memoryCacheSize+b.size>this.config.maxMemorySize&&(this.evictLeastRecentlyUsed(),this.memoryCacheSize+b.size>this.config.maxMemorySize))for(var c=.7*this.config.maxMemorySize;this.memoryCacheSize>c&&0<this.memoryCache.size;)this.evictLeastRecentlyUsed();if(this.memoryCache.has(a)){var d=this.memoryCache.get(a);this.memoryCacheSize-=d.size}this.memoryCache.set(a,b),this.memoryCacheSize+=b.size}evictLeastRecentlyUsed(){if(0!==this.memoryCache.size){var a=null,b=Date.now();if(Array.from(this.memoryCache.keys()).forEach(c=>{var d=this.accessTimes.get(c)||0;d<b&&(b=d,a=c)}),a){var c=this.memoryCache.get(a);this.memoryCache.delete(a),this.accessTimes.delete(a),this.memoryCacheSize-=c.size}}}setDiskCache(a,b){var c=this;return Ca(function*(){if(c.diskCache)try{yield c.diskCache.setItem(a,b)}catch(d){if("QuotaExceededError"===d.name){yield c.cleanupDiskCache();try{yield c.diskCache.setItem(a,b)}catch(a){console.warn("MGC Cache: Disk cache write failed after cleanup:",a)}}}})()}isValid(a){if(!a)return!1;var b=Date.now(),c=b-a.timestamp;return c<a.ttl}cleanup(){var a=this;return Ca(function*(){Array.from(a.memoryCache.entries()).forEach(b=>{var[c,d]=b;a.isValid(d)||(a.memoryCache.delete(c),a.accessTimes.delete(c),a.memoryCacheSize-=d.size)}),a.diskCache&&(yield a.cleanupDiskCache())})()}cleanupDiskCache(){var a=this;return Ca(function*(){if(a.diskCache)try{var b=yield a.diskCache.keys(),c=b.map(b=>a.diskCache.getItem(b).then(c=>a.isValid(c)?null:a.diskCache.removeItem(b)));yield Promise.all(c)}catch(a){console.warn("MGC Cache: Disk cache cleanup failed:",a)}})()}prefetch(a){var b=this;return Ca(function*(){var c=Date.now();[{start:c-21600000,end:c},{start:c-86400000,end:c-21600000}].forEach(c=>{var d=b.generateKey(a,c.start,c.end);b.get(d).catch(()=>{})})})()}updateMetrics(a,b){"hit"===a?this.metrics.hits+=1:"miss"==a&&(this.metrics.misses+=1),this.metrics.averageAccessTime=(this.metrics.averageAccessTime+b)/2}getPerformanceReport(){var a=this.metrics.hits+this.metrics.misses,b=0<a?100*(this.metrics.hits/a):0;return{hitRate:"".concat(b.toFixed(1),"%"),totalRequests:a,memoryUsage:"".concat((this.memoryCacheSize/1024/1024).toFixed(2),"MB"),averageAccessTime:"".concat(this.metrics.averageAccessTime.toFixed(2),"ms"),cacheEntries:{memory:this.memoryCache.size,disk:"async"}}}estimateSize(a){var b=JSON.stringify(a);return 2*b.length}invalidate(a){var b=this;return Ca(function*(){var c=[];if(Array.from(b.memoryCache.keys()).forEach(b=>{b.includes(a)&&c.push(b)}),c.forEach(a=>{var c=b.memoryCache.get(a);b.memoryCache.delete(a),b.accessTimes.delete(a),c&&(b.memoryCacheSize-=c.size)}),b.diskCache)try{var d=yield b.diskCache.keys(),e=d.filter(b=>b.includes(a)),f=e.map(a=>b.diskCache.removeItem(a));yield Promise.all(f)}catch(a){console.warn("MGC Cache: Disk cache invalidation failed:",a)}})()}clear(){var a=this;return Ca(function*(){if(a.memoryCache.clear(),a.accessTimes.clear(),a.memoryCacheSize=0,a.diskCache)try{yield a.diskCache.clear()}catch(a){console.warn("MGC Cache: Disk cache clear failed:",a)}a.metrics={hits:0,misses:0,compressionRatio:0,averageAccessTime:0}})()}destroy(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null),this.memoryCache.clear(),this.accessTimes.clear(),this.memoryCacheSize=0,this.diskCache=null}}var Tf={HISTORICAL_DATA:{ttl:3600000,enableCompression:!0,compressionThreshold:500},REAL_TIME_DATA:{ttl:30000,enableCompression:!1,enableDiskCache:!1},CONFIGURATION_DATA:{ttl:86400000,enableCompression:!0,compressionThreshold:100}},Uf=null;class Vf{constructor(a,b){this.config=a,this.entityData=b,this.chartCache=new Map}renderStackedArea(a,b,c){var{height:d=100}=c,e=this.calculateStackedLayers(a,b);if(!e.length)return _c(va());var f=e.map((a,b)=>{var c=this.getEntityColor(b),e=this.createAreaPath(a.points,d);return _c(ua(),e,c,c,c=>this.handleStackedHover(c,a,b),()=>this.handleStackedOut())});return _c(ta(),f)}renderCandlestick(a,b,c){var{width:d=500,height:e=100}=c,f=mc(2,.8*(d/a.length)),g=a.map((c,g)=>{var h=g*d/a.length+f/2,{open:i,high:j,low:k,close:l}=c,m=e-(i-b[0])/(b[1]-b[0])*e,n=e-(j-b[0])/(b[1]-b[0])*e,o=e-(k-b[0])/(b[1]-b[0])*e,p=e-(l-b[0])/(b[1]-b[0])*e,q=fc(p-m),r=nc(m,p),s=l>i,t=s?"#4caf50":"#f44336",u=s?"#2e7d32":"#c62828";return _c(sa(),g,h,n,h,o,u,h-f/2,r,f,mc(1,q),t,u,a=>this.handleCandleHover(a,c,g),()=>this.handleCandleOut(),h,n,u,h,o,u)});return _c(ra(),g)}renderMultiAxisLines(a,b,c){var{height:d=100}=c,e=[];return a.forEach((a,c)=>{if(a.coords&&a.coords.length){var f=b[c]||[0,1],g=this.getEntityColor(c),h=0==c%2?"left":"right",i=this.createLinePath(a.coords,f,d);e.push(_c(qa(),i,g,h,c))}}),_c(pa(),e)}calculateStackedLayers(a,b){if(!a.length)return[];var c=mc.apply(Math,Da(a.map(a=>a.coords&&a.coords.length||0))),d=[],e=Array(c).fill(0);return a.forEach((a,c)=>{if(a.coords){var f=[];a.coords.forEach((a,c)=>{var d=e[c]||0,g=a[2]||0,h=d+g,i=100-100*((h-b[0])/(b[1]-b[0]));f.push([a[0],mc(0,nc(100,i)),g]),e[c]=h}),d.push({entityIndex:c,points:f,entity:a,totalValues:Da(e)})}}),d}createAreaPath(a,b){if(!a.length)return"";var c="",d=a[0],e=500*(d[0]/500);c+="M ".concat(e,",").concat(b),c+=" L ".concat(e,",").concat(d[1]),a.forEach((b,d)=>{var e=500*(d/(a.length-1)),f=b[1];c+=" L ".concat(e,",").concat(f)});var f=a.length-1,g=500*(f/(a.length-1));return c+=" L ".concat(g,",").concat(b),c+=" Z",c}createLinePath(a,b,c){if(!a.length)return"";var d="";return a.forEach((e,f)=>{var g=500*(f/(a.length-1)),h=c-(e[2]-b[0])/(b[1]-b[0])*c,i=mc(0,nc(c,h));d+=0===f?"M ".concat(g,",").concat(i):" L ".concat(g,",").concat(i)}),d}getEntityColor(a){var b=["#03a9f4","#4caf50","#ff9800","#f44336","#9c27b0","#00bcd4","#cddc39","#ff5722"];return this.config.line_color&&this.config.line_color[a]?this.config.line_color[a]:b[a%b.length]}handleStackedHover(a,b,c){var d=a.target;d.style.fillOpacity="0.9",d.style.strokeWidth="2";var e={type:"stacked-area",layer:b,index:c,entity:b.entity};"undefined"!=typeof window&&"undefined"!=typeof window.CustomEvent&&d.dispatchEvent(new window.CustomEvent("chart-hover",{detail:e,bubbles:!0}))}handleStackedOut(){var a=document.querySelectorAll(".stacked-area-layer");a.forEach(a=>{var b=a;b.style.fillOpacity="0.7",b.style.strokeWidth="1"})}handleCandleHover(a,b,c){var d=a.target;d.style.transform="scaleY(1.1)",d.style.filter="brightness(1.1)";"undefined"!=typeof window&&"undefined"!=typeof window.CustomEvent&&d.dispatchEvent(new window.CustomEvent("chart-hover",{detail:{type:"candlestick",candle:b,index:c,ohlc:b},bubbles:!0}))}handleCandleOut(){var a=document.querySelectorAll(".candlestick rect");a.forEach(a=>{var b=a;b.style.transform="scaleY(1)",b.style.filter=""})}getCachedCalculation(a,b){if(this.chartCache.has(a))return this.chartCache.get(a);var c=b();return this.chartCache.set(a,c),setTimeout(()=>{this.chartCache.delete(a)},3e4),c}clearCache(){this.chartCache.clear()}}class Wf{constructor(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.config=xa({enableZoom:!0,enablePan:!0,minZoom:.1,maxZoom:10,zoomSpeed:.1,panSpeed:1,wheelZoom:!0,touchZoom:!0,touchPan:!0},a),this.scale=1,this.translateX=0,this.translateY=0,this.isDragging=!1,this.isTouch=!1,this.lastPointer={x:0,y:0},this.touchDistance=0,this.handleWheel=this.handleWheel.bind(this),this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.animationId=null}initialize(a,b){return this.svgElement=a,this.originalViewBox=b,this.currentViewBox=xa({},b),this.attachEventListeners(),this}attachEventListeners(){this.svgElement&&(this.config.wheelZoom&&this.svgElement.addEventListener("wheel",this.handleWheel,{passive:!1}),this.config.enablePan&&(this.svgElement.addEventListener("pointerdown",this.handlePointerDown),this.svgElement.addEventListener("pointermove",this.handlePointerMove),this.svgElement.addEventListener("pointerup",this.handlePointerUp)),(this.config.touchZoom||this.config.touchPan)&&(this.svgElement.addEventListener("touchstart",this.handleTouchStart,{passive:!1}),this.svgElement.addEventListener("touchmove",this.handleTouchMove,{passive:!1}),this.svgElement.addEventListener("touchend",this.handleTouchEnd)),this.svgElement.addEventListener("contextmenu",a=>a.preventDefault()))}handleWheel(a){if(this.config.enableZoom){a.preventDefault();var b=this.svgElement.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top,e=.001*(-a.deltaY*this.config.zoomSpeed);this.zoomAt(c,d,e)}}handlePointerDown(a){this.config.enablePan&&(a.preventDefault(),this.isDragging=!0,this.lastPointer={x:a.clientX,y:a.clientY},this.svgElement.style.cursor="grabbing")}handlePointerMove(a){if(this.isDragging&&this.config.enablePan){var b=a.clientX-this.lastPointer.x,c=a.clientY-this.lastPointer.y;this.pan(b*this.config.panSpeed,c*this.config.panSpeed),this.lastPointer={x:a.clientX,y:a.clientY}}}handlePointerUp(){this.isDragging=!1,this.svgElement.style.cursor="grab"}handleTouchStart(a){a.preventDefault(),1===a.touches.length&&this.config.touchPan?(this.isDragging=!0,this.isTouch=!0,this.lastPointer={x:a.touches[0].clientX,y:a.touches[0].clientY}):2===a.touches.length&&this.config.touchZoom&&(this.isDragging=!1,this.isTouch=!0,this.touchDistance=this.getTouchDistance(a.touches))}handleTouchMove(a){if(a.preventDefault(),1===a.touches.length&&this.isDragging&&this.config.touchPan){var b=a.touches[0].clientX-this.lastPointer.x,c=a.touches[0].clientY-this.lastPointer.y;this.pan(b*this.config.panSpeed,c*this.config.panSpeed),this.lastPointer={x:a.touches[0].clientX,y:a.touches[0].clientY}}else if(2===a.touches.length&&this.config.touchZoom){var d=this.getTouchDistance(a.touches),e=d/this.touchDistance,f=(a.touches[0].clientX+a.touches[1].clientX)/2,g=(a.touches[0].clientY+a.touches[1].clientY)/2,h=this.svgElement.getBoundingClientRect(),i=f-h.left,j=g-h.top;this.zoomAt(i,j,e-1),this.touchDistance=d}}handleTouchEnd(a){0===a.touches.length&&(this.isDragging=!1,this.isTouch=!1)}getTouchDistance(a){var b=a[0].clientX-a[1].clientX,c=a[0].clientY-a[1].clientY;return ic(b*b+c*c)}zoomAt(a,b,c){var d=mc(this.config.minZoom,nc(this.config.maxZoom,this.scale*(1+c)));if(d!==this.scale){var e=this.svgElement.getBoundingClientRect(),f=a/e.width*this.currentViewBox.width+this.currentViewBox.x,g=b/e.height*this.currentViewBox.height+this.currentViewBox.y,h=this.scale/d;this.currentViewBox.width=this.originalViewBox.width*h,this.currentViewBox.height=this.originalViewBox.height*h,this.currentViewBox.x=f-(f-this.currentViewBox.x)*(d/this.scale),this.currentViewBox.y=g-(g-this.currentViewBox.y)*(d/this.scale),this.scale=d,this.updateTransform()}}pan(a,b){var c=this.svgElement.getBoundingClientRect(),d=a/c.width*this.currentViewBox.width,e=b/c.height*this.currentViewBox.height;this.currentViewBox.x-=d,this.currentViewBox.y-=e,this.updateTransform()}updateTransform(){if(this.svgElement){var a=[this.currentViewBox.x,this.currentViewBox.y,this.currentViewBox.width,this.currentViewBox.height].join(" ");if(this.svgElement.setAttribute("viewBox",a),"undefined"!=typeof window&&"undefined"!=typeof window.CustomEvent){var b=new window.CustomEvent("transform",{detail:{scale:this.scale,translateX:this.translateX,translateY:this.translateY,viewBox:this.currentViewBox},bubbles:!0});this.svgElement.dispatchEvent(b)}}}reset(){this.scale=1,this.translateX=0,this.translateY=0,this.currentViewBox=xa({},this.originalViewBox),this.updateTransform()}setZoom(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,d=mc(this.config.minZoom,nc(this.config.maxZoom,a));if(null!==b&&null!==c)this.zoomAt(b,c,d/this.scale-1);else{this.scale=d;var e=1/d;this.currentViewBox.width=this.originalViewBox.width*e,this.currentViewBox.height=this.originalViewBox.height*e,this.updateTransform()}}getTransform(){return{scale:this.scale,translateX:this.translateX,translateY:this.translateY,viewBox:xa({},this.currentViewBox)}}setZoomEnabled(a){this.config.enableZoom=a}setPanEnabled(a){this.config.enablePan=a}fitToView(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:.1;this.scale=1-a,this.currentViewBox={x:this.originalViewBox.x-this.originalViewBox.width*a/2,y:this.originalViewBox.y-this.originalViewBox.height*a/2,width:this.originalViewBox.width*(1+a),height:this.originalViewBox.height*(1+a)},this.updateTransform()}destroy(){this.svgElement&&(this.svgElement.removeEventListener("wheel",this.handleWheel),this.svgElement.removeEventListener("pointerdown",this.handlePointerDown),this.svgElement.removeEventListener("pointermove",this.handlePointerMove),this.svgElement.removeEventListener("pointerup",this.handlePointerUp),this.svgElement.removeEventListener("touchstart",this.handleTouchStart),this.svgElement.removeEventListener("touchmove",this.handleTouchMove),this.svgElement.removeEventListener("touchend",this.handleTouchEnd)),this.animationId&&("undefined"!=typeof window&&window.cancelAnimationFrame&&window.cancelAnimationFrame(this.animationId),this.animationId=null),this.svgElement=null}}Yd.config({name:"mini-graph-card",version:1,storeName:"entity_history_cache",description:"Mini graph card uses caching for the entity history"}),Yd.iterate((a,b)=>{var c=b.endsWith("-raw")?a:Jf(a),d=new Date;d.setHours(d.getHours()-c.hours_to_show),(a.version!=="0.22.7"||new Date(c.last_fetched)<d)&&Yd.removeItem(b)}).catch(a=>{console.warn("Purging has errored: ",a)}),console.info("%c MINI-GRAPH-CARD %c ".concat("0.22.7"," "),"color: white; background: coral; font-weight: 700;","color: coral; background: white; font-weight: 700;");var Xf={"Mini Graph Card Configuration":"Configuration Mini Graph Card","Complete configuration for all options":"Configuration compl\xE8te pour toutes les options","Basic configuration required for the card":"Configuration de base requise pour la carte","Name, icon, and visual appearance settings":"Nom, ic\xF4ne et param\xE8tres d'apparence visuelle","Graph type, colors, and visual properties":"Type de graphique, couleurs et propri\xE9t\xE9s visuelles","Data aggregation and time configuration":"Agr\xE9gation des donn\xE9es et configuration temporelle","Y-axis bounds and scaling options":"Limites de l'axe Y et options d'\xE9chelle","Color configuration and dynamic thresholds":"Configuration des couleurs et seuils dynamiques","Advanced options and performance settings":"Options avanc\xE9es et param\xE8tres de performance","Per-entity configuration and customization":"Configuration et personnalisation par entit\xE9","Required Settings":"Param\xE8tres requis","Display Options":"Options d'affichage","Graph Settings":"Param\xE8tres du graphique","Data & Time":"Donn\xE9es et temps","Scale & Bounds":"\xC9chelle et limites","Colors & Thresholds":"Couleurs et seuils","Advanced Options":"Options avanc\xE9es","Entity Configuration":"Configuration des entit\xE9s","Primary Entity (will be converted to entities list)":"Entit\xE9 principale (sera convertie en liste d'entit\xE9s)","Entities List":"Liste des entit\xE9s","Card Name":"Nom de la carte",Icon:"Ic\xF4ne","Icon Image URL":"URL de l'image d'ic\xF4ne",Unit:"Unit\xE9","Font Size (%)":"Taille de police (%)","Header Font Size (px)":"Taille de police de l'en-t\xEAte (px)","Header Alignment":"Alignement de l'en-t\xEAte","Icon Alignment":"Alignement de l'ic\xF4ne","State Alignment":"Alignement de l'\xE9tat","Decimal Places":"Nombre de d\xE9cimales","Height (px)":"Hauteur (px)","Line Width":"\xC9paisseur de ligne","Line Colors (comma-separated)":"Couleurs de ligne (s\xE9par\xE9es par des virgules)","Bar Spacing":"Espacement des barres","Enable Animation":"Activer l'animation","Smooth Lines":"Lignes liss\xE9es","Logarithmic Scale":"\xC9chelle logarithmique","Hours to Show":"Heures \xE0 afficher","Points per Hour":"Points par heure","Aggregate Function":"Fonction d'agr\xE9gation","Group By":"Grouper par","Update Interval (seconds)":"Intervalle de mise \xE0 jour (secondes)","24-Hour Time Format":"Format 24 heures","Lower Bound (use ~N for soft)":"Limite inf\xE9rieure (utiliser ~N pour souple)","Upper Bound (use ~N for soft)":"Limite sup\xE9rieure (utiliser ~N pour souple)","Minimum Range":"Plage minimale","Threshold Transition":"Transition des seuils","Color Thresholds":"Seuils de couleur","Cache Data":"Cache des donn\xE9es","Compress Data":"Compression des donn\xE9es","Group Entities":"Grouper les entit\xE9s",Default:"Par d\xE9faut",Left:"Gauche",Right:"Droite",Center:"Centre","With State":"Avec l'\xE9tat",Average:"Moyenne",Median:"M\xE9diane",Minimum:"Minimum",Maximum:"Maximum",First:"Premier",Last:"Dernier",Sum:"Somme",Delta:"Delta",Difference:"Diff\xE9rence",Interval:"Intervalle",Date:"Date",Hour:"Heure",Smooth:"Lisse",Hard:"Dur",min:"min",avg:"moy",max:"max","Visibility Options":"Options de visibilit\xE9",Name:"Nom",State:"\xC9tat",Graph:"Graphique",Fill:"Remplissage",Legend:"L\xE9gende",Extrema:"Extrema",Labels:"\xC9tiquettes","Secondary Labels":"\xC9tiquettes secondaires",Points:"Points","Add Entity":"Ajouter une entit\xE9",Remove:"Supprimer","Add Threshold":"Ajouter un seuil","Add State Mapping":"Ajouter un mappage d'\xE9tat","Card title":"Titre de la carte","°C, kW, etc.":"\xB0C, kW, etc.","#ff0000, #00ff00, #0000ff":"#ff0000, #00ff00, #0000ff","0 or ~0":"0 ou ~0","100 or ~100":"100 ou ~100",Value:"Valeur",Color:"Couleur","Original Value":"Valeur originale","Display Label":"Libell\xE9 affich\xE9","Loading Home Assistant...":"Chargement de Home Assistant...","Please wait while the editor loads.":"Veuillez patienter pendant le chargement de l'\xE9diteur.","Editor Error":"Erreur de l'\xE9diteur","An error occurred while rendering the editor:":"Une erreur s'est produite lors du rendu de l'\xE9diteur :","Primary Y-Axis":"Axe Y principal",Thresholds:"Seuils","Custom Name":"Nom personnalis\xE9","Custom Color":"Couleur personnalis\xE9e","Configure individual entity settings. These override global settings for specific entities.":"Configurez les param\xE8tres individuels des entit\xE9s. Ceux-ci remplacent les param\xE8tres globaux pour des entit\xE9s sp\xE9cifiques.",Configure:"Configurer",Hide:"Masquer","Attribute (instead of state)":"Attribut (au lieu de l'\xE9tat)","Y-Axis":"Axe Y",Primary:"Principal",Secondary:"Secondaire","Show State":"Afficher l'\xE9tat","Show in Graph":"Afficher dans le graphique","Show Line":"Afficher la ligne","Show Fill":"Afficher le remplissage","Show Points":"Afficher les points","Show in Legend":"Afficher dans la l\xE9gende",Smoothing:"Lissage","Fixed Value":"Valeur fixe",Entities:"Entit\xE9s","Add, configure and manage all your entities":"Ajoutez, configurez et g\xE9rez toutes vos entit\xE9s","Remove Entity":"Supprimer l'entit\xE9","Tap Action":"Action tactile","Action Type":"Type d'action"},Yf=()=>{var a=navigator.language||navigator.userLanguage||"en";return a.toLowerCase().startsWith("fr")?"fr":"en"},Zf=a=>{var b=Yf();return"fr"===b&&Xf[a]?Xf[a]:a};class $f extends zd{static get properties(){return{hass:Object,_config:Object,_expandedSections:Object,_expandedEntities:Array}}constructor(){super(),this._expandedSections={required:!0,display:!1,graph:!1,data:!1,bounds:!1,colors:!1,advanced:!1,entities:!1},this._expandedEntities=[]}setConfig(a){this._config=xa({},a),this._config.entities&&(this._config.entities=this._config.entities.map(a=>"string"==typeof a?{entity:a}:xa({},a))),this.requestUpdate()}get _entity(){var a=this._config&&this._config.entity||"";return a}get _entities(){var a=this._config&&this._config.entities||[];return a}get _name(){var a=this._config&&this._config.name||"";return a}get _icon(){var a=this._config&&this._config.icon||"";return a}get _icon_image(){var a=this._config&&this._config.icon_image||"";return a}get _unit(){var a=this._config&&this._config.unit||"";return a}get _height(){var a=this._config&&this._config.height||100;return a}get _line_width(){var a=this._config&&this._config.line_width||5;return a}get _line_color(){var a=Array.isArray(this._config&&this._config.line_color)?this._config.line_color.join(", "):this._config&&this._config.line_color||"";return a}get _bar_spacing(){var a=this._config&&this._config.bar_spacing||4;return a}get _animate(){var a=!this._config||!1!==this._config.animate;return a}get _hours_to_show(){var a=this._config&&this._config.hours_to_show||24;return a}get _points_per_hour(){var a=this._config&&this._config.points_per_hour||.5;return a}get _aggregate_func(){var a=this._config&&this._config.aggregate_func||"avg";return a}get _group_by(){var a=this._config&&this._config.group_by||"interval";return a}get _update_interval(){var a=this._config&&this._config.update_interval||"";return a}get _hour24(){var a=this._config&&this._config.hour24||!1;return a}get _lower_bound(){var a=this._config&&this._config.lower_bound!==void 0?this._config.lower_bound:"";return a}get _upper_bound(){var a=this._config&&this._config.upper_bound!==void 0?this._config.upper_bound:"";return a}get _min_bound_range(){var a=this._config&&this._config.min_bound_range||"";return a}get _smoothing(){var a=!this._config||!1!==this._config.smoothing;return a}get _logarithmic(){var a=this._config&&this._config.logarithmic||!1;return a}get _color_thresholds(){var a=this._config&&this._config.color_thresholds||[];return a}get _color_thresholds_transition(){var a=this._config&&this._config.color_thresholds_transition||"smooth";return a}get _font_size(){var a=this._config&&this._config.font_size||100;return a}get _font_size_header(){var a=this._config&&this._config.font_size_header||14;return a}get _align_header(){var a=this._config&&this._config.align_header||"default";return a}get _align_icon(){var a=this._config&&this._config.align_icon||"right";return a}get _align_state(){var a=this._config&&this._config.align_state||"left";return a}get _decimals(){var a=this._config&&this._config.decimals!==void 0?this._config.decimals:"";return a}get _cache(){var a=!this._config||!1!==this._config.cache;return a}get _compress(){var a=!this._config||!1!==this._config.compress;return a}get _group(){var a=this._config&&this._config.group||!1;return a}get _show(){var a=this._config&&this._config.show||{};return a}get _tap_action(){var a=this._config&&this._config.tap_action||{action:"more-info"};return a}render(){if(!this.hass)return $c(oa(),Zf("Loading Home Assistant..."),Zf("Please wait while the editor loads."));try{return $c(na(),Zf("Mini Graph Card Configuration"),Zf("Complete configuration for all options"),this.renderSection("entities","\uD83C\uDFE0 ".concat(Zf("Entities")),Zf("Add, configure and manage all your entities"),$c(ma(),0===this._entities.length?$c(la(),Zf("Primary Entity (will be converted to entities list)"),this.renderEntityPicker(this._entity,a=>this._primaryEntityChanged(a))):"",this._entities.map((a,b)=>$c(ka(),this.renderEntityPicker("string"==typeof a?a:a.entity,a=>this._entityListChanged(a,b)),(()=>{var b="string"==typeof a?a:a.entity,c=this.getEntityInfo(b);return $c(ja(),c.icon,c.friendlyName,c.entityId)})(),()=>this._toggleEntityConfig(b),this._isEntityConfigExpanded(b)?Zf("Hide"):Zf("Configure"),()=>this._removeEntity(b),Zf("Remove Entity"),this._isEntityConfigExpanded(b)?$c(ia(),this.renderEntityConfig(a,b)):"")),this._addEntity,Zf("Add Entity"))),this.renderSection("display","\uD83C\uDFA8 ".concat(Zf("Display Options")),Zf("Name, icon, and visual appearance settings"),$c(ha(),Zf("Card Name"),this._name,a=>this._valueChanged(a,"name"),Zf("Card title"),Zf("Icon"),this.renderIconPicker(this._icon,a=>this._valueChanged(a,"icon")),Zf("Icon Image URL"),this._icon_image,a=>this._valueChanged(a,"icon_image"),Zf("Unit"),this._unit,a=>this._valueChanged(a,"unit"),Zf("\xB0C, kW, etc."),Zf("Font Size (%)"),this._font_size,a=>this._valueChanged(a,"font_size"),Zf("Header Font Size (px)"),this._font_size_header,a=>this._valueChanged(a,"font_size_header"),Zf("Header Alignment"),this._align_header,a=>this._valueChanged(a,"align_header"),Zf("Default"),Zf("Left"),Zf("Right"),Zf("Center"),Zf("Icon Alignment"),this._align_icon,a=>this._valueChanged(a,"align_icon"),Zf("Left"),Zf("Right"),Zf("Center"),Zf("With State"),Zf("State Alignment"),this._align_state,a=>this._valueChanged(a,"align_state"),Zf("Left"),Zf("Right"),Zf("Center"),Zf("Decimal Places"),this._decimals,a=>this._valueChanged(a,"decimals"),Zf("Visibility Options"),[{key:"name",label:Zf("Name")},{key:"icon",label:Zf("Icon")},{key:"state",label:Zf("State")},{key:"graph",label:Zf("Graph")},{key:"fill",label:Zf("Fill")},{key:"points",label:Zf("Points")},{key:"legend",label:Zf("Legend")},{key:"extrema",label:Zf("Extrema")},{key:"average",label:Zf("Average")},{key:"labels",label:Zf("Labels")},{key:"labels_secondary",label:Zf("Secondary Labels")}].map(a=>$c(ga(),!1!==this._show[a.key],b=>this._showChanged(b,a.key),a.label)))),this.renderSection("graph","\uD83D\uDCCA ".concat(Zf("Graph Settings")),Zf("Graph type, colors, and visual properties"),$c(fa(),Zf("Height (px)"),this._height,a=>this._valueChanged(a,"height"),Zf("Line Width"),this._line_width,a=>this._valueChanged(a,"line_width"),Zf("Line Colors (comma-separated)"),this._line_color,a=>this._valueChanged(a,"line_color"),Zf("#ff0000, #00ff00, #0000ff"),Zf("Bar Spacing"),this._bar_spacing,a=>this._valueChanged(a,"bar_spacing"),this._animate,a=>this._valueChanged(a,"animate"),Zf("Enable Animation"),this._smoothing,a=>this._valueChanged(a,"smoothing"),Zf("Smooth Lines"),this._logarithmic,a=>this._valueChanged(a,"logarithmic"),Zf("Logarithmic Scale"))),this.renderSection("data","\u23F1\uFE0F ".concat(Zf("Data & Time")),Zf("Data aggregation and time configuration"),$c(ea(),Zf("Hours to Show"),this._hours_to_show,a=>this._valueChanged(a,"hours_to_show"),Zf("Points per Hour"),this._points_per_hour,a=>this._valueChanged(a,"points_per_hour"),Zf("Aggregate Function"),this._aggregate_func,a=>this._valueChanged(a,"aggregate_func"),Zf("Average"),Zf("Median"),Zf("Minimum"),Zf("Maximum"),Zf("First"),Zf("Last"),Zf("Sum"),Zf("Delta"),Zf("Difference"),Zf("Group By"),this._group_by,a=>this._valueChanged(a,"group_by"),Zf("Interval"),Zf("Date"),Zf("Hour"),Zf("Update Interval (seconds)"),this._update_interval,a=>this._valueChanged(a,"update_interval"),this._hour24,a=>this._valueChanged(a,"hour24"),Zf("24-Hour Time Format"))),this.renderSection("bounds","\uD83D\uDCCF ".concat(Zf("Scale & Bounds")),Zf("Y-axis bounds and scaling options"),$c(da(),Zf("Primary Y-Axis"),Zf("Lower Bound (use ~N for soft)"),this._lower_bound,a=>this._valueChanged(a,"lower_bound"),Zf("0 or ~0"),Zf("Upper Bound (use ~N for soft)"),this._upper_bound,a=>this._valueChanged(a,"upper_bound"),Zf("100 or ~100"),Zf("Minimum Range"),this._min_bound_range,a=>this._valueChanged(a,"min_bound_range"))),this.renderSection("colors","\uD83C\uDFA8 ".concat(Zf("Colors & Thresholds")),Zf("Color configuration and dynamic thresholds"),$c(ca(),Zf("Threshold Transition"),this._color_thresholds_transition,a=>this._valueChanged(a,"color_thresholds_transition"),Zf("Smooth"),Zf("Hard"),Zf("Color Thresholds"),this._addThreshold,Zf("Add Threshold"),this._color_thresholds.map((a,b)=>$c(ba(),a.value,a=>this._thresholdChanged(a,b,"value"),Zf("Value"),a.color,a=>this._thresholdChanged(a,b,"color"),()=>this._removeThreshold(b))))),this.renderSection("advanced","\u2699\uFE0F ".concat(Zf("Advanced Options")),Zf("Advanced options and performance settings"),$c(aa(),this._cache,a=>this._valueChanged(a,"cache"),Zf("Cache Data"),this._compress,a=>this._valueChanged(a,"compress"),Zf("Compress Data"),this._group,a=>this._valueChanged(a,"group"),Zf("Group Entities"),Zf("Tap Action"),Zf("Action Type"),this._tap_action.action,a=>this._tapActionChanged(a,"action"),"navigate"===this._tap_action.action?$c(_(),this._tap_action.navigation_path||"",a=>this._tapActionChanged(a,"navigation_path")):"","url"===this._tap_action.action?$c($(),this._tap_action.url||"",a=>this._tapActionChanged(a,"url")):"","call-service"===this._tap_action.action?$c(Z(),this._tap_action.service||"",a=>this._tapActionChanged(a,"service")):"")))}catch(a){return $c(Y(),Zf("Editor Error"),Zf("An error occurred while rendering the editor:"),a.message,a.stack)}}renderSection(a,b,c,d){var e=this._expandedSections[a];return $c(X(),e?"expanded":"",()=>this._toggleSection(a),b,c,e?"\u25BC":"\u25B6",e?$c(W(),d):"")}renderEntityPicker(a,b){try{if(this.hass&&customElements.get("ha-entity-picker"))return $c(V(),this.hass,a,b)}catch(a){}return $c(U(),a,b,Object.keys(this.hass&&this.hass.states||{}).map(a=>$c(T(),a)))}renderIconPicker(a,b){try{if(this.hass&&customElements.get("ha-icon-picker"))return $c(S(),this.hass,a,b)}catch(a){}return $c(R(),a,b)}renderEntityConfig(a,b){var c="string"==typeof a?{}:a;return $c(Q(),Zf("Custom Name"),c.name||"",a=>this._entityConfigChanged(a,b,"name"),Zf("Custom Color"),c.color||"#ff0000",a=>this._entityConfigChanged(a,b,"color"),Zf("Attribute (instead of state)"),c.attribute||"",a=>this._entityConfigChanged(a,b,"attribute"),Zf("Y-Axis"),c.y_axis||"primary",a=>this._entityConfigChanged(a,b,"y_axis"),Zf("Primary"),Zf("Secondary"),[{key:"show_state",label:"Show State"},{key:"show_graph",label:"Show in Graph"},{key:"show_line",label:"Show Line"},{key:"show_fill",label:"Show Fill"},{key:"show_points",label:"Show Points"},{key:"show_legend",label:"Show in Legend"},{key:"smoothing",label:"Smoothing"},{key:"fixed_value",label:"Fixed Value"}].map(a=>$c(P(),!1!==c[a.key],c=>this._entityConfigChanged(c,b,a.key),Zf(a.label))))}getEntityInfo(a){if(!this.hass||!this.hass.states)return{entityId:a,friendlyName:a,icon:"mdi:help-circle",domain:a.split(".")[0]||"unknown"};var b=this.hass.states[a];return b?{entityId:a,friendlyName:b.attributes.friendly_name||a,icon:b.attributes.icon||this.getDefaultIcon(a),domain:a.split(".")[0]||"unknown",state:b.state}:{entityId:a,friendlyName:a,icon:"mdi:help-circle-outline",domain:a.split(".")[0]||"unknown"}}getDefaultIcon(a){var b=a.split(".")[0];return{sensor:"mdi:gauge",binary_sensor:"mdi:radiobox-blank",switch:"mdi:toggle-switch",light:"mdi:lightbulb",climate:"mdi:thermostat",cover:"mdi:window-shutter",fan:"mdi:fan",lock:"mdi:lock",camera:"mdi:camera",media_player:"mdi:cast",device_tracker:"mdi:account",sun:"mdi:white-balance-sunny",weather:"mdi:weather-partly-cloudy"}[b]||"mdi:help-circle"}_toggleSection(a){this._expandedSections=xa(xa({},this._expandedSections),{},{[a]:!this._expandedSections[a]}),this.requestUpdate()}_primaryEntityChanged(a){var b=a.detail&&a.detail.value||a.target&&a.target.value;b&&!this._entities.length&&(this._config=xa(xa({},this._config),{},{entities:[b]}),delete this._config.entity,ze(this,"config-changed",{config:this._config}))}_addEntity(){var a=[].concat(Da(this._entities),[""]);this._config=xa(xa({},this._config),{},{entities:a}),ze(this,"config-changed",{config:this._config})}_removeEntity(a){var b=Da(this._entities);b.splice(a,1),this._config=xa(xa({},this._config),{},{entities:b}),ze(this,"config-changed",{config:this._config})}_entityListChanged(a,b){var c=a.detail&&a.detail.value||a.target&&a.target.value;if(c){var d=Da(this._entities);d[b]=c,this._config=xa(xa({},this._config),{},{entities:d}),ze(this,"config-changed",{config:this._config})}}_valueChanged(a,b){if(this._config&&this.hass){var c;c="checkbox"===a.target.type?a.target.checked:"number"===a.target.type?+a.target.value||0:a.detail&&void 0!==a.detail.value?a.detail.value:a.target.value,"line_color"===b&&"string"==typeof c&&c.includes(",")&&(c=c.split(",").map(a=>a.trim())),this._config=xa(xa({},this._config),{},{[b]:c}),ze(this,"config-changed",{config:this._config})}}_showChanged(a,b){if(this._config&&this.hass){var c=a.target.checked;this._config=xa(xa({},this._config),{},{show:xa(xa({},this._show),{},{[b]:c})}),ze(this,"config-changed",{config:this._config})}}_addThreshold(){var a=[].concat(Da(this._color_thresholds),[{value:0,color:"#ff0000"}]);this._config=xa(xa({},this._config),{},{color_thresholds:a}),ze(this,"config-changed",{config:this._config})}_removeThreshold(a){var b=Da(this._color_thresholds);b.splice(a,1),this._config=xa(xa({},this._config),{},{color_thresholds:b}),ze(this,"config-changed",{config:this._config})}_thresholdChanged(a,b,c){var d=Da(this._color_thresholds),{value:e}=a.target;"value"===c&&(e=+e),d[b]=xa(xa({},d[b]),{},{[c]:e}),this._config=xa(xa({},this._config),{},{color_thresholds:d}),ze(this,"config-changed",{config:this._config})}_tapActionChanged(a,b){var{value:c}=a.target,d=xa(xa({},this._tap_action),{},{[b]:c});this._config=xa(xa({},this._config),{},{tap_action:d}),ze(this,"config-changed",{config:this._config})}_toggleEntityConfig(a){this._expandedEntities=this._expandedEntities||[];var b=this._expandedEntities.includes(a);this._expandedEntities=b?this._expandedEntities.filter(b=>b!==a):[].concat(Da(this._expandedEntities),[a]),this.requestUpdate()}_isEntityConfigExpanded(a){return this._expandedEntities&&this._expandedEntities.includes(a)}_entityConfigChanged(a,b,c){var d=Da(this._entities),e="string"==typeof d[b]?{entity:d[b]}:xa({},d[b]),{value:f}=a.target;"checkbox"===a.target.type&&(f=a.target.checked),e[c]=f,d[b]=e,this._config=xa(xa({},this._config),{},{entities:d}),ze(this,"config-changed",{config:this._config})}static get styles(){return xd(O())}}customElements.define("mini-graph-card-editor",$f);var _f={min:"min",avg:"moy",max:"max"},ag=(a,b)=>{var c=b||navigator.language||navigator.userLanguage||"en";return c.toLowerCase().startsWith("fr")&&_f[a]?_f[a]:a};class bg extends zd{constructor(){super(),this.id=Math.random().toString(36).substr(2,9),this.config={},this.bound=[0,0],this.boundSecondary=[0,0],this.length=[],this.entity=[],this.line=[],this.bar=[],this.abs=[],this.fill=[],this.points=[],this.gradient=[],this.tooltip={},this.updateQueue=[],this.updating=!1,this.stateChanged=!1,this.initial=!0,this._md5Config=void 0,this.microInteractions=null,this.activeTooltip=null,this.advancedCharts=null,this.zoomPanController=null,this.cache=null}static get styles(){return wf}set hass(a){this._hass=a;var b=!1,c=[];this.config.entities.forEach((d,e)=>{this.config.entities[e].index=e;var f=a&&a.states[d.entity]||void 0;f&&this.entity[e]!==f&&(this.entity[e]=f,c.push("".concat(f.entity_id,"-").concat(e)),b=!0)}),b&&(this.stateChanged=!0,this.entity=Da(this.entity),this.config.update_interval||this.updating?this.updateQueue=[].concat(c,Da(this.updateQueue)):setTimeout(()=>{this.updateQueue=[].concat(c,Da(this.updateQueue)),this.updateData()},this.initial?0:1e3))}static get properties(){return{id:String,_hass:{},config:{},entity:[],Graph:[],line:[],shadow:[],length:Number,bound:[],boundSecondary:[],abs:[],tooltip:{},updateQueue:[],color:String}}setConfig(a){this.config=Qf(a,this.config),this._md5Config=Ee.hash(JSON.stringify(this.config));var b=!Lf(this.config.entities||[],a.entities);(!this.Graph||b)&&(this._hass&&(this.hass=this._hass),this.Graph=this.config.entities.map(a=>new vf(500,this.config.height,[this.config.show.fill?0:this.config.line_width,this.config.line_width],this.config.hours_to_show,this.config.points_per_hour,a.aggregate_func||this.config.aggregate_func,this.config.group_by,Kf(a.smoothing,this.config.smoothing,!a.entity.startsWith("binary_sensor.")),this.config.logarithmic)))}connectedCallback(){super.connectedCallback(),this.microInteractions||(this.microInteractions=new Rf(this)),this.advancedCharts||(this.advancedCharts=new Vf(this.config,this.entity)),this.cache||(this.cache=Zb({maxMemorySize:26214400,enableCompression:!0,enableDiskCache:!0})),this.config.update_interval&&(window.requestAnimationFrame(()=>{this.updateOnInterval()}),this.interval=setInterval(()=>this.updateOnInterval(),1e3*this.config.update_interval))}disconnectedCallback(){this.interval&&clearInterval(this.interval),this.microInteractions&&(this.microInteractions.cleanup(),this.microInteractions=null),this.advancedCharts&&(this.advancedCharts.clearCache(),this.advancedCharts=null),this.zoomPanController&&(this.zoomPanController.destroy(),this.zoomPanController=null),super.disconnectedCallback()}shouldUpdate(a){if(pf.some(b=>a.has(b)))return this.color=this.computeColor(void 0===this.tooltip.value?this.getEntityState(0):this.tooltip.value,this.tooltip.entity||0),!0}firstUpdated(){this.initial=!1,this.config.zoom_pan_enabled&&!this.zoomPanController&&setTimeout(()=>{var a=this.shadowRoot.querySelector("svg");a&&(this.zoomPanController=new Wf({enableZoom:!1!==this.config.enable_zoom,enablePan:!1!==this.config.enable_pan,minZoom:this.config.min_zoom||.1,maxZoom:this.config.max_zoom||10}),this.zoomPanController.initialize(a,{x:0,y:0,width:500,height:this.config.height}))},100)}updated(a){this.config.animate&&a.has("line")&&(this.length.length<this.entity.length?(this.shadowRoot.querySelectorAll("svg path.line").forEach(a=>{this.length[a.id]=a.getTotalLength()}),this.length=Da(this.length)):this.length=Array(this.entity.length).fill("none"))}render(){var{config:a}=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this;return a&&this.entity&&this._hass?this.config.entities.some((a,b)=>void 0===this.entity[b])?this.renderWarnings():$c(M(),a.group,a.show.graph&&a.show.fill,"hover"===a.show.points,"hover"===a.show.labels,"hover"===a.show.labels_secondary,0<a.color_thresholds.length,"none"!==a.tap_action.action,a.font_size,b=>this.handlePopup(b,a.tap_action.entity||this.entity[0]),this.renderHeader(),this.renderStates(),this.renderGraph(),this.renderInfo()):$c(N())}renderWarnings(){return $c(L(),this.config.entities.map((a,b)=>this.entity[b]?$c(J()):$c(K(),this.config.entities[b].entity)))}renderHeader(){var{show:a,align_icon:b,align_header:c,font_size_header:d}=this.config;return a.name||a.icon&&"state"!==b?$c(I(),c,d,this.renderName(),"state"===b?"":this.renderIcon()):""}renderIcon(){if(this.config.icon_image!==void 0)return $c(H(),this.config.icon_image);var{icon:a,icon_adaptive_color:b}=this.config.show;return a?$c(G(),this.config.align_icon,b?"color: ".concat(this.color,";"):"",this.computeIcon(this.entity[0])):""}renderName(){if(this.config.show.name){var a=void 0===this.tooltip.entity?this.config.name||this.computeName(0):this.computeName(this.tooltip.entity),b=this.config.show.name_adaptive_color?"opacity: 1; color: ".concat(this.color,";"):"";return $c(F(),b,a)}}renderStates(){if(this.config.show.state)return $c(E(),this.config.align_state,this.renderState(0),this.config.entities.map((a,b)=>0<b&&this.renderState(b)||""),"state"===this.config.align_icon?this.renderIcon():"")}getObjectAttr(a,b){return b.split(".").reduce((a,b)=>a&&a[b],a)}getEntityState(a){var b=this.config.entities[a];return"last"===this.config.show.state?this.points[a][this.points[a].length-1][tf]:b.attribute?this.getObjectAttr(this.entity[a].attributes,b.attribute):this.entity[a].state}renderState(a){var b=0===a;if(b||this.config.entities[a].show_state){var c=this.getEntityState(a),{entity:d,value:e}=this.tooltip,f=b&&d!==void 0,g=f?e:c,h=f?d:a,i=this.config.entities[h];return $c(D(),!b&&"state--small",b=>this.handlePopup(b,this.entity[a]),i.state_adaptive_color?"color: ".concat(this.computeColor(g,h)):"",i.show_indicator?this.renderIndicator(g,h):"",this.computeState(g),this.computeUom(h),b&&this.renderStateTime()||"")}}renderStateTime(){return void 0===this.tooltip.value?void 0:$c(C(),this.tooltip.label?$c(B(),this.tooltip.label):$c(A(),this.tooltip.time[0],this.tooltip.time[1]))}renderGraph(){var a=this.entity[0]&&!this.Graph.some((a,b)=>a._history===void 0&&!1!==this.config.entities[b].show_graph)||!1===this.config.show.loading_indicator;return this.config.show.graph?$c(z(),a?$c(y(),this.renderLabels(),this.renderLabelsSecondary(),this.renderSvg(),this.renderLegend()):$c(x())):""}computeLegend(a){var b=this.computeName(a),c=this.getEntityState(a),{show_legend_state:d=!1}=this.config.entities[a];if(d){if(b+=" (".concat(this.computeState(c)),!["unavailable"].includes(c)){var e=this.computeUom(a);["%",""].includes(e)||(b+=" "),b+="".concat(e)}b+=")"}return b}renderLegend(){return 1>=this.visibleLegends.length||!this.config.show.legend?void 0:$c(w(),this.visibleLegends.map(a=>{var b=this.computeLegend(a.index);return $c(v(),b=>this.handlePopup(b,this.entity[a.index]),()=>this.setTooltip(a.index,-1,this.getEntityState(a.index),"Current"),()=>this.tooltip={},this.renderIndicator(this.getEntityState(a.index),a.index),b)}))}renderIndicator(a,b){return _c(u(),this.computeColor(a,b))}renderSvgFill(a,b){if(a){var c=this.length[b]||!1===this.config.entities[b].show_line;return _c(t(),"fill-grad-".concat(this.id,"-").concat(b),"fill-grad-mask-".concat(this.id,"-").concat(b),"url(#fill-grad-".concat(this.id,"-").concat(b,")"),"fill-".concat(this.id,"-").concat(b),this.config.show.fill,b,this.config.animate,c,this.config.animate?"".concat(.5*b,"s"):"0s",this.fill[b])}}renderSvgLine(a,b){if(a){var c=_c(s(),b,this.config.animate,this.length[b],this.config.animate?"".concat(.5*b,"s"):"0s",this.length[b]||"none",this.length[b]||"none","white",this.config.line_width,this.line[b]);return _c(r(),"line-".concat(this.id,"-").concat(b),c)}}renderSvgPoint(a,b){var c=this.gradient[b]?this.computeColor(a[tf],b):"inherit";return _c(q(),this.tooltip.index!==a[3],"--mcg-hover: ".concat(c,";"),c,c,a[rf],a[sf],this.config.line_width,()=>{this.setTooltip(b,a[3],a[tf])},()=>{this.tooltip={},this.activeTooltip=null},b,a[tf])}renderSvgPoints(a,b){if(a){var c=this.computeColor(this.entity[b].state,b);return _c(p(),this.tooltip.entity===b,void 0!==this.tooltip.entity&&this.tooltip.entity!==b,this.length[b],this.config.animate&&"hover"!==this.config.show.points,this.config.animate?"".concat(.5*b+.5,"s"):"0s",c,c,this.config.line_width/2,a.map(a=>this.renderSvgPoint(a,b)))}}renderSvgGradient(a){if(a){var b=a.map((a,b)=>a?_c(o(),"grad-".concat(this.id,"-").concat(b),a.map(a=>_c(n(),a.color,"".concat(a.offset,"%")))):void 0);return _c(m(),b)}}renderSvgLineRect(a,b){if(a){var c=this.gradient[b]?"url(#grad-".concat(this.id,"-").concat(b,")"):this.computeColor(this.entity[b].state,b);return _c(l(),void 0!==this.tooltip.entity&&this.tooltip.entity!==b,"rect-".concat(this.id,"-").concat(b),c,"url(#line-".concat(this.id,"-").concat(b,")"))}}renderSvgFillRect(a,b){if(a){var c=this.gradient[b]?"url(#grad-".concat(this.id,"-").concat(b,")"):this.computeColor(this.entity[b].state,b);return _c(k(),void 0!==this.tooltip.entity&&this.tooltip.entity!==b,"fill-rect-".concat(this.id,"-").concat(b),c,"url(#fill-".concat(this.id,"-").concat(b,")"))}}renderSvgBars(a,b){if(a){var c=a.map((a,c)=>{var d=this.config.animate?_c(j(),this.config.height,a.y):"",e=this.computeColor(a.value,b);return _c(h(),a.x,a.y,a.height,a.width,e,()=>this.setTooltip(b,c,a.value),()=>this.tooltip={},d)});return _c(g(),this.config.animate,c)}}renderSvg(){var{height:a}=this.config;return _c(f(),a,a=>a.stopPropagation(),this.renderSvgGradient(this.gradient),this.fill.map((a,b)=>this.renderSvgFill(a,b)),this.fill.map((a,b)=>this.renderSvgFillRect(a,b)),this.line.map((a,b)=>this.renderSvgLine(a,b)),this.line.map((a,b)=>this.renderSvgLineRect(a,b)),this.bar.map((a,b)=>this.renderSvgBars(a,b)),this.points.map((a,b)=>this.renderSvgPoints(a,b)))}setTooltip(a,b,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;this.activeTooltip="".concat(a,"-").concat(b);var{group_by:e,points_per_hour:f,hours_to_show:g,format:h}=this.config,i=Hf(1/f),j=bc(g*f),k=j-1-b,l="interval"===e?0:6e4,m=this.getEndDate();m.setMilliseconds(m.getMilliseconds()-l-i*k);var n=Gf(m,h,this._hass.language);m.setMilliseconds(m.getMilliseconds()+l-i);var o=Gf(m,h,this._hass.language);this.tooltip={value:c,count:k,entity:a,time:[o,n],index:b,label:d}}renderLabels(){return this.config.show.labels&&0!==this.primaryYaxisSeries.length?$c(e(),this.computeState(this.bound[1]),this.computeState(this.bound[0])):void 0}renderLabelsSecondary(){return this.config.show.labels_secondary&&0!==this.secondaryYaxisSeries.length?$c(d(),this.computeState(this.boundSecondary[1]),this.computeState(this.boundSecondary[0])):void 0}renderInfo(){return 0<this.abs.length?$c(c(),this.abs.map(a=>$c(b(),ag(a.type,this._hass.language),this.computeState(a.state),this.computeUom(0),"avg"===a.type?"":Gf(new Date(a.last_changed),this.config.format,this._hass.language)))):$c(a())}handlePopup(a,b){a.stopPropagation(),xf(this,this._hass,this.config,this.config.tap_action,b.entity_id||b)}get visibleEntities(){return this.config.entities.filter(a=>!1!==a.show_graph)}get primaryYaxisEntities(){return this.visibleEntities.filter(a=>a.y_axis===void 0||"primary"===a.y_axis)}get secondaryYaxisEntities(){return this.visibleEntities.filter(a=>"secondary"===a.y_axis)}get visibleLegends(){return this.visibleEntities.filter(a=>!1!==a.show_legend)}get primaryYaxisSeries(){return this.primaryYaxisEntities.map(a=>this.Graph[a.index])}get secondaryYaxisSeries(){return this.secondaryYaxisEntities.map(a=>this.Graph[a.index])}computeColor(a,b){var c,{color_thresholds:d,line_color:e}=this.config,f=+a||0;if(0<d.length){var{color:j}=d.find(a=>a.value<f)||d.slice(-1)[0];c=j;var g=d.findIndex(a=>a.value<f),h=d[g],i=d[g-1];if(i){var k=(i.value-f)/(i.value-h.value);c=jf(i.color,h.color)(k)}else c=g?d[d.length-1].color:d[0].color}return this.config.entities[b].color||c||e[b]||e[0]}computeName(a){return this.config.entities[a].name||this.entity[a].attributes.friendly_name||this.entity[a].entity_id}computeIcon(a){return this.config.icon||a.attributes.icon||De(a)||nf.temperature}computeUom(a){return this.config.entities[a].unit===void 0?this.config.unit===void 0?this.config.entities[a].attribute?"":this.entity[a].attributes.unit_of_measurement||"":this.config.unit:this.config.entities[a].unit}computeState(a){if(0<this.config.state_map.length){var f=Number.isInteger(a)?this.config.state_map[a]:this.config.state_map.find(b=>b.value===a);if(f)return f.label;"string"==typeof a&&$b(parseFloat(a))&&Mf("value [".concat(a,"] not found in state_map"))}var b="string"==typeof a?parseFloat(a.replace(/,/g,".")):+a;var c=this.config.decimals,d=10**this.config.value_factor;if(c===void 0||$b(c)||$b(b))return this.numberFormat(lc(100*(b*d))/100,this._hass.language);var e=10**c;return this.numberFormat((lc(b*d*e)/e).toFixed(c),this._hass.language,c)}numberFormat(a,b,c){return!$b(+a)&&Intl?new Intl.NumberFormat(b,{minimumFractionDigits:c}).format(+a):a.toString()}updateOnInterval(){this.stateChanged&&!this.updating&&(this.stateChanged=!1,this.updateData())}updateData(){var a=arguments,b=this;return Ca(function*(){var{config:c}=0<a.length&&void 0!==a[0]?a[0]:b;b.updating=!0;var d=b.getEndDate(),e=new Date(d);e.setMilliseconds(e.getMilliseconds()-Hf(c.hours_to_show));try{var f=b.entity.map((a,c)=>b.updateEntity(a,c,e,d));yield Promise.all(f)}catch(a){Mf(a)}if(c.show.graph&&b.entity.forEach((a,c)=>{a&&b.Graph[c].update()}),b.updateBounds(),c.show.graph){var g=0;b.entity.forEach((a,d)=>{if(a&&0!==b.Graph[d].coords.length){var e="secondary"===c.entities[d].y_axis?b.boundSecondary:b.bound;if([b.Graph[d].min,b.Graph[d].max]=[e[0],e[1]],"bar"===c.show.graph){var f=b.visibleEntities.length;b.bar[d]=b.Graph[d].getBars(g,f,c.bar_spacing),g+=1}else{var h=b.Graph[d].getPath();!1!==c.entities[d].show_line&&(b.line[d]=h),c.show.fill&&!1!==c.entities[d].show_fill&&(b.fill[d]=b.Graph[d].getFill(h)),c.show.points&&!1!==c.entities[d].show_points&&(b.points[d]=b.Graph[d].getPoints()),0<c.color_thresholds.length&&!c.entities[d].color&&(b.gradient[d]=b.Graph[d].computeGradient(c.color_thresholds,b.config.logarithmic))}}}),b.line=Da(b.line)}b.updating=!1,b.setNextUpdate()})()}getBoundary(a,b,c,d){if(!(a in Math))throw new Error("The type \"".concat(a,"\" is not present on the Math object"));return void 0===c?Math[a].apply(Math,Da(b.map(b=>b[a])))||d:"~"===c[0]?Math[a].apply(Math,[+c.substr(1)].concat(Da(b.map(b=>b[a])))):c}getBoundaries(a,b,c,d,e){var f=[this.getBoundary("min",a,b,d[0]),this.getBoundary("max",a,c,d[1])];if(e){var g=fc(f[0]-f[1]),h=parseFloat(e)-g;if(0<h){var i=[b!==void 0&&"~"!==b[0]||c===void 0?0:1,c!==void 0&&"~"!==c[0]||b===void 0?0:1],j=i[0]+i[1];f=0<j?[f[0]-h*i[0]/j,f[1]+h*i[1]/j]:[f[0]-h/2,f[1]+h/2]}}return f}updateBounds(){var{config:a}=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this;this.bound=this.getBoundaries(this.primaryYaxisSeries,a.lower_bound,a.upper_bound,this.bound,a.min_bound_range),this.boundSecondary=this.getBoundaries(this.secondaryYaxisSeries,a.lower_bound_secondary,a.upper_bound_secondary,this.boundSecondary,a.min_bound_range_secondary)}getCache(a,b){var c=this;return Ca(function*(){var d=yield Yd.getItem("".concat(a,"_").concat(c._md5Config).concat(b?"":"_raw"));return d?b?Jf(d):d:null})()}setCache(a,b,c){var d=this;return Ca(function*(){return c?Yd.setItem("".concat(a,"_").concat(d._md5Config),If(b)):Yd.setItem("".concat(a,"_").concat(d._md5Config,"_raw"),b)})()}updateEntity(a,b,c,d){var e=this;return Ca(function*(){if(a&&e.updateQueue.includes("".concat(a.entity_id,"-").concat(b))&&!1!==e.config.entities[b].show_graph){e.updateQueue=e.updateQueue.filter(c=>c!=="".concat(a.entity_id,"-").concat(b));var f=[],g=c,h=!1,i=null;if(e.config.cache&&e.cache){var n=e.cache.generateKey(a.entity_id,c,d,{hours_to_show:e.config.hours_to_show,points_per_hour:e.config.points_per_hour,index:b});i=yield e.cache.get(n),i&&i.hours_to_show===e.config.hours_to_show&&(f=i.data,e.cache.prefetch(a.entity_id))}else e.config.cache&&(i=yield e.getCache("".concat(a.entity_id,"_").concat(b),e.config.useCompress),i&&i.hours_to_show===e.config.hours_to_show&&(f=i.data));if(0<f.length){var o=f.findIndex(a=>new Date(a.last_changed)>c);-1===o?f=[]:(0<o&&(o-=1,f[o].last_changed=c),f=f.slice(o,f.length),h=!0);var p=new Date(i.last_fetched);p>g&&(g=new Date(p-1))}var j=yield e.fetchRecent(a.entity_id,g,d,!e.config.entities[b].attribute&&h,!!e.config.entities[b].attribute);if(j[0]&&0<j[0].length&&(e.config.entities[b].attribute&&h&&j[0].shift(),(0<e.config.state_map.length||e.config.entities[b].attribute)&&j[0].forEach(a=>{e.config.entities[b].attribute&&(a.state=e.getObjectAttr(a.attributes,e.config.entities[b].attribute),delete a.attributes),0<e.config.state_map.length&&e._convertState(a)}),j=j[0].filter(a=>!$b(parseFloat(a.state))),j=j.map(a=>({last_changed:e.config.entities[b].attribute?a.last_updated:a.last_changed,state:a.state})),f=[].concat(Da(f),Da(j)),e.config.cache))if(e.cache){var k=e.cache.generateKey(a.entity_id,c,d,{hours_to_show:e.config.hours_to_show,points_per_hour:e.config.points_per_hour,index:b}),l={hours_to_show:e.config.hours_to_show,last_fetched:new Date,data:f,version:"0.22.7",entity_id:a.entity_id,index:b},m=1e3<f.length?Tf.HISTORICAL_DATA:Tf.REAL_TIME_DATA;yield e.cache.set(k,l,m.ttl)}else e.setCache("".concat(a.entity_id,"_").concat(b),{hours_to_show:e.config.hours_to_show,last_fetched:new Date,data:f,version:"0.22.7"},e.config.useCompress).catch(a=>{Mf(a),Yd.clear()});if(0!==f.length)if(e.entity[0]&&a.entity_id===e.entity[0].entity_id&&e.updateExtrema(f),!0===e.config.entities[b].fixed_value){var q=f[f.length-1];e.Graph[b].history=[q,q]}else e.Graph[b].history=f}})()}fetchRecent(a,b,c,d,e){var f=this;return Ca(function*(){var g="history/period";return b&&(g+="/".concat(b.toISOString())),g+="?filter_entity_id=".concat(a),c&&(g+="&end_time=".concat(c.toISOString())),d&&(g+="&skip_initial_state"),e||(g+="&minimal_response&no_attributes"),e&&(g+="&significant_changes_only=0"),f._hass.callApi("GET",g)})()}updateExtrema(a){var{extrema:b,average:c}=this.config.show;this.abs=[].concat(Da(b?[xa({type:"min"},Df(a,"state"))]:[]),Da(c?[{type:"avg",state:Ef(a,"state")}]:[]),Da(b?[xa({type:"max"},Ff(a,"state"))]:[]))}_convertState(a){var b=this.config.state_map.findIndex(b=>b.value===a.state);-1===b||(a.state=b)}getEndDate(){var a=new Date;switch(this.config.group_by){case"date":a.setDate(a.getDate()+1),a.setHours(0,0,0);break;case"hour":a.setHours(a.getHours()+1),a.setMinutes(0,0);}return a}setNextUpdate(){if(!this.config.update_interval){var a=1/this.config.points_per_hour;clearInterval(this.interval),this.interval=setInterval(()=>{this.updating||this.updateData()},a*uf)}}getCardSize(){try{var a=this.shadowRoot&&this.shadowRoot.querySelector("ha-card");if(a&&a.getBoundingClientRect){var b=bc(a.getBoundingClientRect().height/50);if(ac(b)&&0<b)return b}}catch(a){}return this.config.card_size||this.calculateCardSize()}calculateCardSize(){var a=1;return(this.config.show.name||this.config.show.icon)&&(a+=1),this.config.show.state&&(a+=1),this.config.show.graph&&(a+=bc(this.config.height/50)),this.config.show.legend&&1<this.visibleLegends.length&&(a+=1),this.abs&&0<this.abs.length&&(a+=1),a}}bg.getConfigElement=function(){return document.createElement("mini-graph-card-editor")},bg.getStubConfig=()=>({type:"custom:mini-graph-card",entity:"sensor.example"}),customElements.define("mini-graph-card",bg),window.customCards=window.customCards||[],window.customCards.push({type:"mini-graph-card",name:"Mini Graph Card",preview:!1,description:"The Mini Graph card is a minimalistic and customizable graph card"})})})();
